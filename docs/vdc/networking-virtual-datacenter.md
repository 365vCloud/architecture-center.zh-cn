---
title: Azure 虚拟数据中心：网络透视图
description: 了解如何在 Azure 中生成虚拟数据中心
author: tracsman
manager: rossort
tags: azure-resource-manager
ms.service: virtual-network
ms.date: 09/24/2018
ms.author: jonor
ms.openlocfilehash: b10930ac6d6458872d8b626825d21bd0bed2b807
ms.sourcegitcommit: 16bc6a91b6b9565ca3bcc72d6eb27c2c4ae935e4
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/28/2018
ms.locfileid: "52550455"
---
# <a name="azure-virtual-datacenter-a-network-perspective"></a><span data-ttu-id="767bb-103">Azure 虚拟数据中心：网络透视图</span><span class="sxs-lookup"><span data-stu-id="767bb-103">Azure virtual datacenter: A network perspective</span></span>

## <a name="overview"></a><span data-ttu-id="767bb-104">概述</span><span class="sxs-lookup"><span data-stu-id="767bb-104">Overview</span></span>
<span data-ttu-id="767bb-105">将本地应用程序迁移到 Azure 可为组织提供安全而具成本效益的基础结构，使组织从中受益。</span><span class="sxs-lookup"><span data-stu-id="767bb-105">Migrating on-premises applications to Azure, even without any significant changes, provides organizations the benefit of a secured and cost-efficient infrastructure.</span></span> <span data-ttu-id="767bb-106">此方法称作“直接迁移”。</span><span class="sxs-lookup"><span data-stu-id="767bb-106">This approach is known as **lift and shift**.</span></span> <span data-ttu-id="767bb-107">若要充分利用云计算的灵活性，企业应提升体系结构，充分利用 Azure 的功能。</span><span class="sxs-lookup"><span data-stu-id="767bb-107">To make the most of the agility possible with cloud computing, enterprises should evolve their architectures to take advantage of Azure capabilities.</span></span> <span data-ttu-id="767bb-108">Microsoft Azure 提供超大规模的服务和基础结构、企业级的功能和可靠性以及许多混合连接选项。</span><span class="sxs-lookup"><span data-stu-id="767bb-108">Microsoft Azure delivers hyperscale services and infrastructure, enterprise-grade capabilities and reliability, and many choices for hybrid connectivity.</span></span> 

<span data-ttu-id="767bb-109">客户可以选择通过 Internet 或 Azure ExpressRoute（提供专用网络连接）访问这些云服务。</span><span class="sxs-lookup"><span data-stu-id="767bb-109">Customers can choose to access these cloud services either via the internet or with Azure ExpressRoute, which provides private network connectivity.</span></span> <span data-ttu-id="767bb-110">客户可以使用 Microsoft Azure 平台将基础结构无缝扩展到云中并构建多层体系结构。</span><span class="sxs-lookup"><span data-stu-id="767bb-110">With the Microsoft Azure platform, customers can seamlessly extend their infrastructure into the cloud and build multi-tier architectures.</span></span> <span data-ttu-id="767bb-111">Microsoft 合作伙伴还可以通过提供在 Azure 中运行的优化安全服务和虚拟设备实现增强型功能。</span><span class="sxs-lookup"><span data-stu-id="767bb-111">Microsoft partners also provide enhanced capabilities by offering security services and virtual appliances that are optimized to run in Azure.</span></span>

<span data-ttu-id="767bb-112">许多客户在考虑将全部内容迁移到云时都会担心结构规模、性能和安全问题，本文概述了可用于解决这些问题的模式和设计。</span><span class="sxs-lookup"><span data-stu-id="767bb-112">This article provides an overview of patterns and designs that solve the architectural scale, performance, and security concerns many customers face when they think about moving en masse to the cloud.</span></span> <span data-ttu-id="767bb-113">本文还概述了如何使不同的 IT 组织角色适应系统的管理和监管。</span><span class="sxs-lookup"><span data-stu-id="767bb-113">An overview of how to fit different organizational IT roles into the management and governance of the system is also discussed.</span></span> <span data-ttu-id="767bb-114">本文侧重于安全要求和成本优化。</span><span class="sxs-lookup"><span data-stu-id="767bb-114">Emphasis is on security requirements and cost optimization.</span></span>

## <a name="what-is-a-virtual-datacenter"></a><span data-ttu-id="767bb-115">什么是虚拟数据中心？</span><span class="sxs-lookup"><span data-stu-id="767bb-115">What is a virtual datacenter?</span></span>
<span data-ttu-id="767bb-116">最初，云解决方案旨在托管相对独立的单个应用程序，主要涉及公共范畴。</span><span class="sxs-lookup"><span data-stu-id="767bb-116">Cloud solutions were first designed to host single, relatively isolated applications in the public spectrum.</span></span> <span data-ttu-id="767bb-117">此方法在刚开始的几年富有成效。</span><span class="sxs-lookup"><span data-stu-id="767bb-117">This approach worked well for a few years.</span></span> <span data-ttu-id="767bb-118">后来，云解决方案的优势日益明显，云上托管的大规模工作负荷越来越多。</span><span class="sxs-lookup"><span data-stu-id="767bb-118">Then the benefits of cloud solutions became apparent, and multiple large-scale workloads were hosted on the cloud.</span></span> <span data-ttu-id="767bb-119">解决在一个或多个区域进行部署的安全性、可靠性、性能和成本问题成为重中之重，这项任务贯穿了云服务的整个生命周期。</span><span class="sxs-lookup"><span data-stu-id="767bb-119">Addressing security, reliability, performance, and cost concerns of deployments in one or more regions became vital throughout the life cycle of the cloud service.</span></span>

<span data-ttu-id="767bb-120">以下云部署关系图中的**红框**展示了安全隐患的示例。</span><span class="sxs-lookup"><span data-stu-id="767bb-120">The following cloud deployment diagram shows an example of a security gap in the **red box**.</span></span> <span data-ttu-id="767bb-121">**黄框**展示了跨工作负荷的优化虚拟网络设备的空间。</span><span class="sxs-lookup"><span data-stu-id="767bb-121">The **yellow box** shows room for optimization network virtual appliances across workloads.</span></span>

<span data-ttu-id="767bb-122">[![0]][0]</span><span class="sxs-lookup"><span data-stu-id="767bb-122">[![0]][0]</span></span>

<span data-ttu-id="767bb-123">支持企业工作负荷要求能够进行缩放，正因如此，虚拟数据中心 (VDC) 应运而生。</span><span class="sxs-lookup"><span data-stu-id="767bb-123">Virtual datacenter (VDC) was born from the necessity to scale to support enterprise workloads.</span></span> <span data-ttu-id="767bb-124">VDC 还能处理在公有云中支持大规模应用程序时遇到的问题。</span><span class="sxs-lookup"><span data-stu-id="767bb-124">It also deals with the problems introduced when supporting large-scale applications in the public cloud.</span></span>

<span data-ttu-id="767bb-125">VDC 不仅仅是云中的应用程序工作负荷。</span><span class="sxs-lookup"><span data-stu-id="767bb-125">The VDC isn't just the application workloads in the cloud.</span></span> <span data-ttu-id="767bb-126">它也是网络、安全、管理和基础结构。</span><span class="sxs-lookup"><span data-stu-id="767bb-126">It's also the network, security, management, and infrastructure.</span></span> <span data-ttu-id="767bb-127">示例包括 DNS 和目录服务。</span><span class="sxs-lookup"><span data-stu-id="767bb-127">Examples are DNS and directory services.</span></span> <span data-ttu-id="767bb-128">它通常提供本地网络或数据中心的专用连接。</span><span class="sxs-lookup"><span data-stu-id="767bb-128">It usually provides a private connection back to an on-premises network or datacenter.</span></span> <span data-ttu-id="767bb-129">随着越来越多的工作负荷迁移到 Azure，必须考虑放置这些工作负荷的支持基础结构和对象。</span><span class="sxs-lookup"><span data-stu-id="767bb-129">As more and more workloads move to Azure, it's important to think about the supporting infrastructure and objects that these workloads are placed in.</span></span> <span data-ttu-id="767bb-130">认真考虑如何结构化资源可以避免激增成百上千的**工作负荷集群**（这种工作负荷集群必须通过独立数据流、安全模型与合规性质询单独管理）。</span><span class="sxs-lookup"><span data-stu-id="767bb-130">Think carefully about how resources are structured to avoid the proliferation of hundreds of **workload islands** that must be managed separately with independent data flow, security models, and compliance challenges.</span></span>

<span data-ttu-id="767bb-131">虚拟数据中心是一系列独立但相关的实体集合，这些实体拥有共同的支持功能、特性和基础结构。</span><span class="sxs-lookup"><span data-stu-id="767bb-131">The virtual datacenter is a collection of separate but related entities with common supporting functions, features, and infrastructure.</span></span> <span data-ttu-id="767bb-132">将工作负荷视作集成式 VDC 可以实现组件和数据流的集中化，获得规模效益和更优的安全性，并凭此降低成本。</span><span class="sxs-lookup"><span data-stu-id="767bb-132">By viewing your workloads as an integrated VDC, you can reduce costs from economies of scale and optimized security through component and data flow centralization.</span></span> <span data-ttu-id="767bb-133">同时，还可以简化操作、管理与法规审核。</span><span class="sxs-lookup"><span data-stu-id="767bb-133">You also get easier operations, management, and compliance audits.</span></span>

> [!NOTE]  
> <span data-ttu-id="767bb-134">必须认识到 VDC **不是**一款离散的 Azure 产品。</span><span class="sxs-lookup"><span data-stu-id="767bb-134">It's important to understand that the VDC is **not** a discrete Azure product.</span></span> <span data-ttu-id="767bb-135">它是能够满足确切要求的多项特性和功能的组合。</span><span class="sxs-lookup"><span data-stu-id="767bb-135">It's the combination of various features and capabilities to  meet your exact requirements.</span></span> <span data-ttu-id="767bb-136">使用 VDC 可以审视工作负荷与 Azure 的用法，以便在云中实现资源和能力的最大化。</span><span class="sxs-lookup"><span data-stu-id="767bb-136">The VDC is a way of thinking about your workloads and Azure usage to maximize your resources and abilities in the cloud.</span></span> <span data-ttu-id="767bb-137">因此，虚拟数据中心是尊重组织角色和责任在 Azure 中建立 IT 服务的模块化方法。</span><span class="sxs-lookup"><span data-stu-id="767bb-137">The virtual datacenter is therefore a modular approach on how to build up IT services in Azure, respecting organizational roles and responsibilities.</span></span>

<span data-ttu-id="767bb-138">在以下情形下，VDC 可帮助企业将工作负荷和应用程序迁移到 Azure：</span><span class="sxs-lookup"><span data-stu-id="767bb-138">The VDC can help enterprises get workloads and applications into Azure for the following scenarios:</span></span>

-   <span data-ttu-id="767bb-139">托管多个相关工作负荷</span><span class="sxs-lookup"><span data-stu-id="767bb-139">Host multiple related workloads.</span></span>
-   <span data-ttu-id="767bb-140">将工作负荷从本地环境迁移到 Azure。</span><span class="sxs-lookup"><span data-stu-id="767bb-140">Migrate workloads from an on-premises environment to Azure.</span></span>
-   <span data-ttu-id="767bb-141">跨工作负荷实现共享化或中心化的安全性和访问要求。</span><span class="sxs-lookup"><span data-stu-id="767bb-141">Implement shared or centralized security and access requirements across workloads.</span></span>
-   <span data-ttu-id="767bb-142">为大型企业适当混合 Azure DevOps 和中心化 IT。</span><span class="sxs-lookup"><span data-stu-id="767bb-142">Mix Azure DevOps and centralized IT appropriately for a large enterprise.</span></span>

<span data-ttu-id="767bb-143">解锁 VDC 优势的关键在于中心化拓扑（中心辐射型）和多项 Azure 功能的混合：</span><span class="sxs-lookup"><span data-stu-id="767bb-143">The key to unlock the advantages of the VDC is a centralized topology, hub and spokes, with a mix of Azure features:</span></span> 

- <span data-ttu-id="767bb-144">[Azure 虚拟网络][VNet]。</span><span class="sxs-lookup"><span data-stu-id="767bb-144">[Azure Virtual Network][VNet].</span></span> 
- <span data-ttu-id="767bb-145">[网络安全组 (NSG)][NSG]。</span><span class="sxs-lookup"><span data-stu-id="767bb-145">[Network security groups (NSGs)][NSG].</span></span>
- <span data-ttu-id="767bb-146">[虚拟网络对等互连][VNetPeering]。</span><span class="sxs-lookup"><span data-stu-id="767bb-146">[Virtual network peering][VNetPeering].</span></span> 
- <span data-ttu-id="767bb-147">[用户定义的路由 (UDR)][UDR]。</span><span class="sxs-lookup"><span data-stu-id="767bb-147">[User-defined routes (UDRs)][UDR].</span></span>
- <span data-ttu-id="767bb-148">采用[基于角色的访问控制 (RBAC)][RBAC] 的 Azure 标识服务。</span><span class="sxs-lookup"><span data-stu-id="767bb-148">Azure identity services with [role-based access control (RBAC)][RBAC].</span></span> 
- <span data-ttu-id="767bb-149">（可选）[Azure 防火墙][AzFW]、[Azure DNS][DNS]、[Azure Front Door][AFD] 和 [Azure 虚拟 WAN][vWAN]。</span><span class="sxs-lookup"><span data-stu-id="767bb-149">Optionally, [Azure Firewall][AzFW], [Azure DNS][DNS], [Azure Front Door][AFD], and [Azure Virtual WAN][vWAN].</span></span>

## <a name="who-should-implement-a-virtual-datacenter"></a><span data-ttu-id="767bb-150">谁应该实施虚拟数据中心？</span><span class="sxs-lookup"><span data-stu-id="767bb-150">Who should implement a virtual datacenter?</span></span>
<span data-ttu-id="767bb-151">需要将少量工作负荷迁移到 Azure 的任何 Azure 客户都可以从公共资源中受益。</span><span class="sxs-lookup"><span data-stu-id="767bb-151">Any Azure customer that needs to move more than a few workloads into Azure can benefit from using common resources.</span></span> <span data-ttu-id="767bb-152">根据规模，即使单个应用程序也可以受益于用于构建 VDC 的模式和组件。</span><span class="sxs-lookup"><span data-stu-id="767bb-152">Depending on the size, even single applications can benefit from using the patterns and components used to build the VDC.</span></span>

<span data-ttu-id="767bb-153">如果组织具备中心化 IT、网络、安全性或合规团队/部门，则 VDC 可以帮助实施策略点和责任分离。</span><span class="sxs-lookup"><span data-stu-id="767bb-153">If your organization has a centralized IT, network, security, or compliance team or department, the VDC can help enforce policy points and segregation of duty.</span></span> <span data-ttu-id="767bb-154">此外，它在基于要求给予应用程序团队尽可能多的自由度和控制度的同时确保基础公共组件的一致性。</span><span class="sxs-lookup"><span data-stu-id="767bb-154">It also ensures uniformity of the underlying common components while giving application teams as much freedom and control as is appropriate for your requirements.</span></span>

<span data-ttu-id="767bb-155">寻求 Azure DevOps 的组织可以利用 VDC 概念提供 Azure 资源的授权包，同时确保他们在相应的组内拥有完全控制权。</span><span class="sxs-lookup"><span data-stu-id="767bb-155">Organizations that look to Azure DevOps can utilize the VDC concepts to provide authorized pockets of Azure resources and to ensure they have total control within that group.</span></span> <span data-ttu-id="767bb-156">组是公共订阅中的订阅组或资源组。</span><span class="sxs-lookup"><span data-stu-id="767bb-156">Groups are either subscriptions or resource groups in a common subscription.</span></span> <span data-ttu-id="767bb-157">但是，网络和安全边界根据中心虚拟网络和资源组内中心化策略的定义保持合规。</span><span class="sxs-lookup"><span data-stu-id="767bb-157">But the network and security boundaries stay compliant as defined by a centralized policy in a hub virtual network and resource group.</span></span>

## <a name="considerations-when-you-implement-a-virtual-datacenter"></a><span data-ttu-id="767bb-158">实施虚拟数据中心时的注意事项</span><span class="sxs-lookup"><span data-stu-id="767bb-158">Considerations when you implement a virtual datacenter</span></span>
<span data-ttu-id="767bb-159">设计 VDC 时，需考虑到以下几个关键问题：</span><span class="sxs-lookup"><span data-stu-id="767bb-159">When you design your VDC, there are several pivotal issues to consider:</span></span>

-   <span data-ttu-id="767bb-160">标识和目录服务。</span><span class="sxs-lookup"><span data-stu-id="767bb-160">Identity and directory services.</span></span>
-   <span data-ttu-id="767bb-161">安全基础结构。</span><span class="sxs-lookup"><span data-stu-id="767bb-161">Security infrastructure.</span></span>
-   <span data-ttu-id="767bb-162">与云的连接。</span><span class="sxs-lookup"><span data-stu-id="767bb-162">Connectivity to the cloud.</span></span>
-   <span data-ttu-id="767bb-163">云内的连接。</span><span class="sxs-lookup"><span data-stu-id="767bb-163">Connectivity within the cloud.</span></span>

### <a name="identity-and-directory-services"></a><span data-ttu-id="767bb-164">标识和目录服务</span><span class="sxs-lookup"><span data-stu-id="767bb-164">Identity and directory services</span></span>
<span data-ttu-id="767bb-165">标识和目录服务是所有数据中心（本地数据中心和云数据中心）的关键方面。</span><span class="sxs-lookup"><span data-stu-id="767bb-165">Identity and directory services are a key aspect of all datacenters, both on-premises and in the cloud.</span></span> <span data-ttu-id="767bb-166">标识与 VDC 内服务的访问和授权的各个方面相关。</span><span class="sxs-lookup"><span data-stu-id="767bb-166">Identity is related to all aspects of access and authorization to services within the VDC.</span></span> <span data-ttu-id="767bb-167">为确保只有获得授权的用户和进程可以访问 Azure 帐户和资源，Azure 使用几种凭据进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="767bb-167">To make sure that only authorized users and processes access your Azure account and resources, Azure uses several types of credentials for authentication.</span></span> <span data-ttu-id="767bb-168">这些凭据包括密码（用于访问 Azure 帐户）、加密密钥、数字签名和安全证书。</span><span class="sxs-lookup"><span data-stu-id="767bb-168">These include passwords to access the Azure account, cryptographic keys, digital signatures, and certificates.</span></span> 

<span data-ttu-id="767bb-169">[Azure 多重身份验证][MFA]是访问 Azure 服务的附加安全层。</span><span class="sxs-lookup"><span data-stu-id="767bb-169">[Azure Multi-Factor Authentication][MFA] is an additional layer of security for accessing Azure services.</span></span> <span data-ttu-id="767bb-170">它提供强式身份验证和一系列简单的验证选项。</span><span class="sxs-lookup"><span data-stu-id="767bb-170">It provides strong authentication with a range of easy verification options.</span></span> <span data-ttu-id="767bb-171">客户可以选择自己偏好的方法。</span><span class="sxs-lookup"><span data-stu-id="767bb-171">Customers can choose the method they prefer.</span></span> <span data-ttu-id="767bb-172">选项包括电话、短信或移动应用通知。</span><span class="sxs-lookup"><span data-stu-id="767bb-172">Options include a phone call, text message, or mobile app notification.</span></span> 

<span data-ttu-id="767bb-173">任何大型企业都需要定义标识管理流程，说明如何在 VDC 内部或跨 VDC 管理各个标识、其身份验证、授权、角色和权限。</span><span class="sxs-lookup"><span data-stu-id="767bb-173">Any large enterprise needs to define an identity management process that describes the management of individual identities and their authentication, authorization, roles, and privileges within or across the VDC.</span></span> <span data-ttu-id="767bb-174">此流程的目标是在降低成本、停机时间和重复性手工任务的同时提高安全性和工作效率。</span><span class="sxs-lookup"><span data-stu-id="767bb-174">The goals of this process are to increase security and productivity while lowering cost, downtime, and repetitive manual tasks.</span></span>

<span data-ttu-id="767bb-175">企业和组织可以要求严格混合针对不同业务线的服务。</span><span class="sxs-lookup"><span data-stu-id="767bb-175">Enterprises and organizations can require a demanding mix of services for different lines of business.</span></span> <span data-ttu-id="767bb-176">员工在参与不同的项目时通常会有不同的角色。</span><span class="sxs-lookup"><span data-stu-id="767bb-176">And employees often have different roles when involved with different projects.</span></span> <span data-ttu-id="767bb-177">VDC 要求不同的团队（每个团队拥有特定的角色定义）精诚合作，确保系统运行并很好地监管。</span><span class="sxs-lookup"><span data-stu-id="767bb-177">The VDC requires good cooperation between different teams, each with specific role definitions, to get systems running with good governance.</span></span> <span data-ttu-id="767bb-178">责任、访问和权限矩阵可能很复杂。</span><span class="sxs-lookup"><span data-stu-id="767bb-178">The matrix of responsibilities, access, and rights can be complex.</span></span> <span data-ttu-id="767bb-179">VDC 中的标识管理通过 [Azure Active Directory (Azure AD)][AAD] 和基于角色的访问控制 (RBAC) 实现。</span><span class="sxs-lookup"><span data-stu-id="767bb-179">Identity management in VDC is implemented through [Azure Active Directory (Azure AD)][AAD] and role-based access control (RBAC).</span></span>

<span data-ttu-id="767bb-180">目录服务是用于查找、控制、管理和组织日常项目和网络资源的共享信息基础结构。</span><span class="sxs-lookup"><span data-stu-id="767bb-180">A directory service is a shared information infrastructure that locates, manages, administers, and organizes everyday items and network resources.</span></span> <span data-ttu-id="767bb-181">这些资源包括卷、文件夹、文件、打印机、用户、组、设备和其他对象。</span><span class="sxs-lookup"><span data-stu-id="767bb-181">These resources can include volumes, folders, files, printers, users, groups, devices, and other objects.</span></span> <span data-ttu-id="767bb-182">目录服务器将网络上的每个资源视作一个对象。</span><span class="sxs-lookup"><span data-stu-id="767bb-182">Each resource on the network is considered an object by the directory server.</span></span> <span data-ttu-id="767bb-183">资源信息作为与该资源或对象相关的属性集合存储。</span><span class="sxs-lookup"><span data-stu-id="767bb-183">Information about a resource is stored as a collection of attributes associated with that resource or object.</span></span>

<span data-ttu-id="767bb-184">所有 Microsoft 联机业务服务都依赖于 Azure Active Directory (Azure AD) 进行登录及满足其他标识需求。</span><span class="sxs-lookup"><span data-stu-id="767bb-184">All Microsoft online business services rely on Azure Active Directory (Azure AD) for sign-in and other identity needs.</span></span> <span data-ttu-id="767bb-185">Azure Active Directory 是一个综合性的、高度可用的标识和访问管理云解决方案，它将核心目录服务、高级标识监管和应用程序访问管理结合起来。</span><span class="sxs-lookup"><span data-stu-id="767bb-185">Azure Active Directory is a comprehensive, highly available identity and access management cloud solution that combines core directory services, advanced identity governance, and application access management.</span></span> <span data-ttu-id="767bb-186">Azure AD 可与本地 Active Directory 集成，为基于云的和本地托管的所有应用程序启用单一登录。</span><span class="sxs-lookup"><span data-stu-id="767bb-186">Azure AD can integrate with on-premises Active Directory to enable single sign-on for all cloud-based and locally hosted on-premises applications.</span></span> <span data-ttu-id="767bb-187">本地 Active Directory 的用户属性可以自动同步到 Azure AD。</span><span class="sxs-lookup"><span data-stu-id="767bb-187">The user attributes of on-premises Active Directory can be automatically synchronized to Azure AD.</span></span>

<span data-ttu-id="767bb-188">在 VDC 实施方案中分配所有权限不需要单个全局管理员。</span><span class="sxs-lookup"><span data-stu-id="767bb-188">A single global administrator isn't required to assign all permissions in a VDC implementation.</span></span> <span data-ttu-id="767bb-189">而是每个特定部门（或目录服务中的用户组或服务组）拥有在 VDC 内管理其资源所需的权限。</span><span class="sxs-lookup"><span data-stu-id="767bb-189">Instead, each specific department or group of users or services in the directory service can have the permissions that are required to manage their own resources within the VDC.</span></span> <span data-ttu-id="767bb-190">权限的结构化需要均衡。</span><span class="sxs-lookup"><span data-stu-id="767bb-190">Structuring permissions requires balancing.</span></span> <span data-ttu-id="767bb-191">权限过多会妨碍性能效率。</span><span class="sxs-lookup"><span data-stu-id="767bb-191">Too many permissions impede performance efficiency.</span></span> <span data-ttu-id="767bb-192">权限过少或过松则会增大安全风险。</span><span class="sxs-lookup"><span data-stu-id="767bb-192">Too few or loose permissions increase security risks.</span></span> <span data-ttu-id="767bb-193">Azure 基于角色的访问控制 (RBAC) 通过对 VDC 资源提供细致的访问管理帮助解决此问题。</span><span class="sxs-lookup"><span data-stu-id="767bb-193">Azure role-based access control (RBAC) helps address this problem by offering fine-grained access management for VDC resources.</span></span>

#### <a name="security-infrastructure"></a><span data-ttu-id="767bb-194">安全基础结构</span><span class="sxs-lookup"><span data-stu-id="767bb-194">Security infrastructure</span></span>
<span data-ttu-id="767bb-195">此安全基础结构是指 VDC 特定虚拟网络段中的流量分离，以及如何控制整个 VDC 的入口流量和出口流量。</span><span class="sxs-lookup"><span data-stu-id="767bb-195">This security infrastructure refers to traffic segregation in the VDC's specific virtual network segment and how to control ingress and egress flows throughout the VDC.</span></span> <span data-ttu-id="767bb-196">Azure 基于多租户体系结构，该体系结构可防止部署间的未经授权流量和意外流量。</span><span class="sxs-lookup"><span data-stu-id="767bb-196">Azure is based on multi-tenant architecture that prevents unauthorized and unintentional traffic between deployments.</span></span> <span data-ttu-id="767bb-197">Azure 使用虚拟网络隔离、访问控制列表 (ACL)、负载均衡器、IP 筛选器和流量流策略。</span><span class="sxs-lookup"><span data-stu-id="767bb-197">It uses virtual network isolation, access control lists (ACLs), load balancers, IP filters, and traffic flow policies.</span></span> <span data-ttu-id="767bb-198">网络地址转换 (NAT) 将内部网络流量与外部流量分开。</span><span class="sxs-lookup"><span data-stu-id="767bb-198">Network address translation (NAT) separates internal network traffic from external traffic.</span></span>

<span data-ttu-id="767bb-199">Azure 结构将基础结构资源分配到租户工作负荷，并管理与虚拟机 (VM) 的通信。</span><span class="sxs-lookup"><span data-stu-id="767bb-199">The Azure fabric allocates infrastructure resources to tenant workloads and manages communications to and from virtual machines (VMs).</span></span> <span data-ttu-id="767bb-200">Azure 虚拟机监控程序会在 VM 之间强制实施内存和进程隔离，并将网络流量安全路由到来宾 OS 租户。</span><span class="sxs-lookup"><span data-stu-id="767bb-200">The Azure hypervisor enforces memory and process separation between VMs and securely routes network traffic to guest OS tenants.</span></span>

#### <a name="connectivity-to-the-cloud"></a><span data-ttu-id="767bb-201">与云的连接</span><span class="sxs-lookup"><span data-stu-id="767bb-201">Connectivity to the cloud</span></span>
<span data-ttu-id="767bb-202">VDC 实施方案需要与外部网络建立连接才能为客户、合作伙伴和内部用户提供服务。</span><span class="sxs-lookup"><span data-stu-id="767bb-202">A VDC implementation requires connectivity with external networks to offer services to customers, partners, and internal users.</span></span> <span data-ttu-id="767bb-203">通常，它不仅需要连接到 Internet，而且还要连接到本地网络和数据中心。</span><span class="sxs-lookup"><span data-stu-id="767bb-203">It usually needs connectivity not only to the internet but also to on-premises networks and datacenters.</span></span>

<span data-ttu-id="767bb-204">客户可以使用 [Azure 防火墙][AzFW]或其他类型的虚拟网络设备 (NVA)、结合使用[用户定义的路由][UDR]和自定义路由策略，以及结合使用[网络安全组][NSG]和网络筛选，来控制哪些服务有权访问公共 Internet，以及可通过公共 Internet 访问这些服务。</span><span class="sxs-lookup"><span data-stu-id="767bb-204">Customers control which services have access to and are accessible from the public internet by using [Azure Firewall][AzFW] or other types of virtual network appliances (NVAs), custom routing policies by using [user-defined routes][UDR], and network filtering by using [network security groups][NSG].</span></span> <span data-ttu-id="767bb-205">我们建议使用 [Azure DDoS 防护标准版][DDOS]来进一步保护所有面向 Internet 的资源。</span><span class="sxs-lookup"><span data-stu-id="767bb-205">We recommend that all internet-facing resources also be protected by the [Azure DDoS Protection Standard][DDOS].</span></span>

<span data-ttu-id="767bb-206">企业通常需要将其 VDC 实施方案连接到本地数据中心或其他资源。</span><span class="sxs-lookup"><span data-stu-id="767bb-206">Enterprises often need to connect their VDC implementations to on-premises datacenters or other resources.</span></span> <span data-ttu-id="767bb-207">因此，Azure 与本地网络的连接是设计高效体系结构的关键方面。</span><span class="sxs-lookup"><span data-stu-id="767bb-207">So the connectivity between Azure and on-premises networks is a crucial aspect when designing an effective architecture.</span></span> <span data-ttu-id="767bb-208">企业可以通过两种的不同方式在 Azure 中的 VDC 实施方案与本地资源之间建立互连：通过 Internet 或专用直接连接传输。</span><span class="sxs-lookup"><span data-stu-id="767bb-208">Enterprises have two different ways to create interconnections between VDC implementations and on-premises in Azure: transit over the internet or private direct connections.</span></span>

<span data-ttu-id="767bb-209">[Azure 站点到站点 VPN][VPN] 通过 Internet 将企业的本地网络连接到 VDC 实施方案。</span><span class="sxs-lookup"><span data-stu-id="767bb-209">An [Azure site-to-site VPN][VPN] connects an enterprise's on-premises network to their VDC implementation over the public internet.</span></span> <span data-ttu-id="767bb-210">使用 IPSec 和 IKE 隧道将通过 VPN 传送的流量加密。</span><span class="sxs-lookup"><span data-stu-id="767bb-210">Traffic over the VPN is encrypted by using IPSec and IKE tunneling.</span></span> <span data-ttu-id="767bb-211">可以快速灵活地创建 Azure 站点到站点连接。</span><span class="sxs-lookup"><span data-stu-id="767bb-211">An Azure site-to-site connection is flexible and quick to create.</span></span> <span data-ttu-id="767bb-212">由于所有连接都通过 Internet 实现，因此，无需进一步购置任何硬件即可建立 VPN。</span><span class="sxs-lookup"><span data-stu-id="767bb-212">This VPN doesn't require any further procurement as all connections connect over the internet.</span></span>

<span data-ttu-id="767bb-213">使用大量的 VPN 连接时，[Azure 虚拟 WAN][vWAN] 可充当网络服务，通过 Azure 提供经优化、自动的分支到分支连接。</span><span class="sxs-lookup"><span data-stu-id="767bb-213">For large numbers of VPN connections, [Azure Virtual WAN][vWAN] is a networking service that provides optimized and automated branch-to-branch connectivity through Azure.</span></span> <span data-ttu-id="767bb-214">使用虚拟 WAN 可以连接分支设备，并将其配置为与 Azure 通信。</span><span class="sxs-lookup"><span data-stu-id="767bb-214">With Virtual WAN, you can connect and configure branch devices to communicate with Azure.</span></span> <span data-ttu-id="767bb-215">可以手动实现此连接，也可以通过虚拟 WAN 合作伙伴使用首选的提供商设备实现此连接。</span><span class="sxs-lookup"><span data-stu-id="767bb-215">This connection can be done either manually or by using preferred provider devices through a Virtual WAN partner.</span></span> <span data-ttu-id="767bb-216">使用首选的提供商设备可以降低操作难度、简化连接和进行配置管理。</span><span class="sxs-lookup"><span data-stu-id="767bb-216">Preferred provider devices give you ease of use, simplification of connectivity, and configuration management.</span></span> <span data-ttu-id="767bb-217">Azure WAN 的内置仪表板提供即时故障排除见解，可帮助你节省时间。</span><span class="sxs-lookup"><span data-stu-id="767bb-217">The Azure WAN built-in dashboard provides instant troubleshooting insights that can save you time.</span></span> <span data-ttu-id="767bb-218">在仪表板中还可以方便查看大规模的站点到站点连接。</span><span class="sxs-lookup"><span data-stu-id="767bb-218">And the dashboard gives you an easy way to view large-scale site-to-site connectivity.</span></span>

<span data-ttu-id="767bb-219">[ExpressRoute][ExR] 是一种 Azure 连接服务，可在企业的本地网络与 VDC 实施方案之间建立专用连接。</span><span class="sxs-lookup"><span data-stu-id="767bb-219">[ExpressRoute][ExR], an Azure connectivity service, enables private connections between the enterprise's on-premises network and their VDC implementation.</span></span> <span data-ttu-id="767bb-220">它提供更高的安全性、可靠性、速度（最高可达 10 Gbps）和一致的延迟。</span><span class="sxs-lookup"><span data-stu-id="767bb-220">It offers higher security, reliability, and higher speeds, up to 10 Gbps, along with consistent latency.</span></span> <span data-ttu-id="767bb-221">ExpressRoute 对 VDC 实施方案十分有用，因为 ExpressRoute 客户可以从与专用连接相关的合规性规则受益。</span><span class="sxs-lookup"><span data-stu-id="767bb-221">ExpressRoute is useful for VDC implementations as ExpressRoute customers get the benefits of compliance rules associated with private connections.</span></span> <span data-ttu-id="767bb-222">带宽需求较高的客户可以使用 [ExpressRoute Direct][ExRD] 以 100 Gbps 的速率直接连接到 Microsoft 路由器。</span><span class="sxs-lookup"><span data-stu-id="767bb-222">[ExpressRoute Direct][ExRD] connects you directly to Microsoft routers at 100 Gbps for customers with larger bandwidth needs.</span></span>

<span data-ttu-id="767bb-223">部署 ExpressRoute 连接通常要与 ExpressRoute 服务提供商合作。</span><span class="sxs-lookup"><span data-stu-id="767bb-223">Deploying ExpressRoute connections usually involves engaging with an ExpressRoute service provider.</span></span> <span data-ttu-id="767bb-224">对于需要快速入门的客户，通常先使用站点到站点 VPN 在 VDC 与本地资源之间建立连接。</span><span class="sxs-lookup"><span data-stu-id="767bb-224">For customers that need to start quickly, it's common to initially use a site-to-site VPN to establish connectivity between the VDC and on-premises resources.</span></span> <span data-ttu-id="767bb-225">然后在完成与服务提供商的物理互连后迁移到 ExpressRoute 连接。</span><span class="sxs-lookup"><span data-stu-id="767bb-225">Then migrate to ExpressRoute connection when your physical interconnection with your service provider is finished.</span></span>

#### <a name="connectivity-within-the-cloud"></a><span data-ttu-id="767bb-226">云内的连接</span><span class="sxs-lookup"><span data-stu-id="767bb-226">Connectivity within the cloud</span></span>
<span data-ttu-id="767bb-227">[虚拟网络][VNet]和[虚拟网络对等互连][VNetPeering]是 VDC 中的基本网络连接服务。</span><span class="sxs-lookup"><span data-stu-id="767bb-227">[Virtual networks][VNet] and [virtual network peering][VNetPeering] are the basic networking connectivity services inside the VDC.</span></span> <span data-ttu-id="767bb-228">虚拟网络保证 VDC 资源具有自然隔离边界。</span><span class="sxs-lookup"><span data-stu-id="767bb-228">A virtual network guarantees a natural boundary of isolation for VDC resources.</span></span> <span data-ttu-id="767bb-229">虚拟网络对等互连允许相同或不同 Azure 区域中的不同虚拟网络相互通信。</span><span class="sxs-lookup"><span data-stu-id="767bb-229">And virtual network peering allows intercommunication between different virtual networks in the same Azure region or even across regions.</span></span> <span data-ttu-id="767bb-230">虚拟网络内部以及虚拟网络之间的流量控制需要与通过访问控制列表指定的一组安全规则匹配。</span><span class="sxs-lookup"><span data-stu-id="767bb-230">Traffic control inside a virtual network and between virtual networks needs to match a set of security rules specified through access control lists.</span></span> <span data-ttu-id="767bb-231">请参阅有关[网络安全组][NSG]、[网络虚拟设备 (NVA)][NVA] 和[用户定义的路由的自定义路由表][UDR]的信息。</span><span class="sxs-lookup"><span data-stu-id="767bb-231">See information on [network security groups][NSG], [network virtual appliances (NVAs)][NVA], and [custom routing tables for user-defined routes][UDR].</span></span>

## <a name="virtual-datacenter-overview"></a><span data-ttu-id="767bb-232">虚拟数据中心概述</span><span class="sxs-lookup"><span data-stu-id="767bb-232">Virtual datacenter overview</span></span>

### <a name="topology"></a><span data-ttu-id="767bb-233">拓扑</span><span class="sxs-lookup"><span data-stu-id="767bb-233">Topology</span></span>
<span data-ttu-id="767bb-234">**中心辐射**模型在单个 Azure 区域内扩展虚拟数据中心。</span><span class="sxs-lookup"><span data-stu-id="767bb-234">**Hub and spoke** is a model for extending a virtual datacenter within a single Azure region.</span></span>

<span data-ttu-id="767bb-235">[![1]][1]</span><span class="sxs-lookup"><span data-stu-id="767bb-235">[![1]][1]</span></span>

<span data-ttu-id="767bb-236">中心是控制和检查不同区域（Internet、本地和辐射）之间入口或出口流量的中心网络区域。</span><span class="sxs-lookup"><span data-stu-id="767bb-236">A hub is the central network zone that controls and inspects ingress or egress traffic between different zones: internet, on-premises, and the spokes.</span></span> <span data-ttu-id="767bb-237">中心辐射型拓扑为 IT 部门提供了在中心位置强制实施安全策略的有效方式。</span><span class="sxs-lookup"><span data-stu-id="767bb-237">The hub and spoke topology gives the IT department an effective way to enforce security policies in a central location.</span></span> <span data-ttu-id="767bb-238">此外，还减少了配置错误和泄密的可能性。</span><span class="sxs-lookup"><span data-stu-id="767bb-238">It also reduces the potential for misconfiguration and exposure.</span></span>

<span data-ttu-id="767bb-239">中心包含辐射使用的常见服务组件。</span><span class="sxs-lookup"><span data-stu-id="767bb-239">The hub contains the common service components consumed by the spokes.</span></span> <span data-ttu-id="767bb-240">下面是常见中心服务的示例：</span><span class="sxs-lookup"><span data-stu-id="767bb-240">The following examples are common central services:</span></span>

-   <span data-ttu-id="767bb-241">Windows Active Directory 基础结构：第三方从不受信任网络访问时，要求进行用户身份验证，验证通过后才可访问辐射中的工作负荷。</span><span class="sxs-lookup"><span data-stu-id="767bb-241">The Windows Active Directory infrastructure, required for user authentication of third parties that access from untrusted networks before they get access to the workloads in the spoke.</span></span> <span data-ttu-id="767bb-242">这包括相关的 Active Directory 联合身份验证服务 (AD FS)。</span><span class="sxs-lookup"><span data-stu-id="767bb-242">It includes the related Active Directory Federation Services (AD FS).</span></span>
-   <span data-ttu-id="767bb-243">用于解析分支中工作负荷的命名，以便在 [Azure DNS][DNS] 不可用时访问本地和 Internet 上的资源的 DNS 服务。</span><span class="sxs-lookup"><span data-stu-id="767bb-243">A DNS service to resolve naming for the workload in the spokes, to access resources on-premises and on the internet if [Azure DNS][DNS] isn't used.</span></span>
-   <span data-ttu-id="767bb-244">用于实现工作负荷的单一登录的公钥基础结构 (PKI)。</span><span class="sxs-lookup"><span data-stu-id="767bb-244">A public key infrastructure (PKI), to implement single sign-on on workloads.</span></span>
-   <span data-ttu-id="767bb-245">辐射网络区域与 Internet 之间的 TCP 和 UDP 流量的流控制。</span><span class="sxs-lookup"><span data-stu-id="767bb-245">Flow control of TCP and UDP traffic between the spoke network zones and the internet.</span></span>
-   <span data-ttu-id="767bb-246">辐射与本地之间的流控制。</span><span class="sxs-lookup"><span data-stu-id="767bb-246">Flow control between the spokes and on-premises.</span></span>
-   <span data-ttu-id="767bb-247">根据需要在一个辐射与另一个辐射之间进行流控制。</span><span class="sxs-lookup"><span data-stu-id="767bb-247">If needed, flow control between one spoke and another.</span></span>

<span data-ttu-id="767bb-248">VDC 通过在多个分支之间使用共享中心基础结构来降低总体成本。</span><span class="sxs-lookup"><span data-stu-id="767bb-248">The VDC reduces overall cost by using the shared hub infrastructure between multiple spokes.</span></span>

<span data-ttu-id="767bb-249">每个辐射的角色可以是托管不同类型的工作负荷。</span><span class="sxs-lookup"><span data-stu-id="767bb-249">The role of each spoke can be to host different types of workloads.</span></span> <span data-ttu-id="767bb-250">辐射还可为同一工作负荷的可重复部署提供模块化方法。</span><span class="sxs-lookup"><span data-stu-id="767bb-250">The spokes also provide a modular approach for repeatable deployments of the same workloads.</span></span> <span data-ttu-id="767bb-251">示例包括开发和测试、用户验收测试、预生产和生产。</span><span class="sxs-lookup"><span data-stu-id="767bb-251">Examples are dev and test, user acceptance testing, preproduction, and production.</span></span> <span data-ttu-id="767bb-252">辐射还可用于隔离和启用组织内部的不同组。</span><span class="sxs-lookup"><span data-stu-id="767bb-252">The spokes can also segregate and enable different groups within your organization.</span></span> <span data-ttu-id="767bb-253">示例包括 Azure DevOps 组。</span><span class="sxs-lookup"><span data-stu-id="767bb-253">An example is Azure DevOps groups.</span></span> <span data-ttu-id="767bb-254">在辐射内，可以通过各层之间的流量控制部署基本工作负荷或复杂的多层工作负荷。</span><span class="sxs-lookup"><span data-stu-id="767bb-254">Inside a spoke, it's possible to deploy a basic workload or complex multi-tier workloads with traffic control between the tiers.</span></span>

#### <a name="subscription-limits-and-multiple-hubs"></a><span data-ttu-id="767bb-255">订阅限制和多个中心</span><span class="sxs-lookup"><span data-stu-id="767bb-255">Subscription limits and multiple hubs</span></span>
<span data-ttu-id="767bb-256">在 Azure 中，每个组件（无论何种类型）都通过 Azure 订阅进行部署。</span><span class="sxs-lookup"><span data-stu-id="767bb-256">In Azure, every component, whatever the type, is deployed in an Azure subscription.</span></span> <span data-ttu-id="767bb-257">不同 Azure 订阅中的 Azure 组件的隔离可满足不同业务线的要求。</span><span class="sxs-lookup"><span data-stu-id="767bb-257">The isolation of Azure components in different Azure subscriptions can satisfy the requirements of different lines of business.</span></span> <span data-ttu-id="767bb-258">示例包括设置不同级别的访问和授权。</span><span class="sxs-lookup"><span data-stu-id="767bb-258">An example is setting up differentiated levels of access and authorization.</span></span>

<span data-ttu-id="767bb-259">单个 VDC 实施方案可纵向扩展到大量辐射。</span><span class="sxs-lookup"><span data-stu-id="767bb-259">A single VDC implementation can scale up to a large number of spokes.</span></span> <span data-ttu-id="767bb-260">但是，与每个 IT 系统一样存在平台限制。</span><span class="sxs-lookup"><span data-stu-id="767bb-260">But as with every IT system, there are platforms limits.</span></span> <span data-ttu-id="767bb-261">中心部署绑定到特定的 Azure 订阅，因此存在相关的约束和限制。</span><span class="sxs-lookup"><span data-stu-id="767bb-261">The hub deployment is bound to a specific Azure subscription, which has restrictions and limits.</span></span> <span data-ttu-id="767bb-262">例如，虚拟网络对等互连数目上限。</span><span class="sxs-lookup"><span data-stu-id="767bb-262">An example is a maximum number of virtual network peerings.</span></span> <span data-ttu-id="767bb-263">有关详细信息，请参阅 [Azure 订阅和服务的限制、配额与约束][Limits]。</span><span class="sxs-lookup"><span data-stu-id="767bb-263">For details, see [Azure subscription and service limits, quotas, and constraints][Limits].</span></span> <span data-ttu-id="767bb-264">如果出现限制问题，体系结构可以进一步纵向扩展。</span><span class="sxs-lookup"><span data-stu-id="767bb-264">In cases where limits might be an issue, the architecture can scale up further.</span></span> <span data-ttu-id="767bb-265">可将模型从单个中心辐射型扩展为中心辐射群集。</span><span class="sxs-lookup"><span data-stu-id="767bb-265">Extend the model from a single hub-spokes to a cluster of hub and spokes.</span></span> <span data-ttu-id="767bb-266">使用虚拟网络对等互连、ExpressRoute、虚拟 WAN 或站点到站点 VPN 互连一个或多个 Azure 区域中的多个中心。</span><span class="sxs-lookup"><span data-stu-id="767bb-266">Interconnect multiple hubs in one or more Azure regions by using virtual network peering, ExpressRoute, Virtual WAN, or a site-to-site VPN.</span></span>

<span data-ttu-id="767bb-267">[![2]][2]</span><span class="sxs-lookup"><span data-stu-id="767bb-267">[![2]][2]</span></span>

<span data-ttu-id="767bb-268">引入多个中心会增加系统的成本和管理工作量。</span><span class="sxs-lookup"><span data-stu-id="767bb-268">The introduction of multiple hubs increases the cost and management effort of the system.</span></span> <span data-ttu-id="767bb-269">引入的唯一原因在于可伸缩性（如系统限制或冗余）和区域复制（如最终用户性能或灾难恢复）。</span><span class="sxs-lookup"><span data-stu-id="767bb-269">It would only be justified by scalability like system limits or redundancy and regional replication like end-user performance or disaster recovery.</span></span> <span data-ttu-id="767bb-270">在要求多个中心的情形下，所有中心应力图提供相同的服务集以方便操作。</span><span class="sxs-lookup"><span data-stu-id="767bb-270">In scenarios requiring multiple hubs, all the hubs should strive to offer the same set of services for operational ease.</span></span>

#### <a name="interconnection-between-spokes"></a><span data-ttu-id="767bb-271">辐射之间的互连</span><span class="sxs-lookup"><span data-stu-id="767bb-271">Interconnection between spokes</span></span>
<span data-ttu-id="767bb-272">在单个辐射内，可以实现复杂的多层工作负荷。</span><span class="sxs-lookup"><span data-stu-id="767bb-272">Inside a single spoke, it's possible to implement complex multi-tier workloads.</span></span> <span data-ttu-id="767bb-273">可以通过对同一虚拟网络中的每个层使用一个子网来实现多层配置。</span><span class="sxs-lookup"><span data-stu-id="767bb-273">You can implement multi-tier configurations by using one subnet for every tier in the same virtual network.</span></span> <span data-ttu-id="767bb-274">使用 NSG 筛选流量。</span><span class="sxs-lookup"><span data-stu-id="767bb-274">Filter the flows by using NSGs.</span></span>

<span data-ttu-id="767bb-275">架构师可能希望跨多个虚拟网络部署多层工作负荷。</span><span class="sxs-lookup"><span data-stu-id="767bb-275">An architect might want to deploy a multi-tier workload across multiple virtual networks.</span></span> <span data-ttu-id="767bb-276">使用虚拟网络对等互连，辐射可以连接到同一中心的其他辐射，也可连接到其他中心的其他辐射。</span><span class="sxs-lookup"><span data-stu-id="767bb-276">With virtual network peering, spokes can connect to other spokes in the same hub or different hubs.</span></span> <span data-ttu-id="767bb-277">此方案的典型示例是应用程序处理服务器位于一个辐射或虚拟网络中。</span><span class="sxs-lookup"><span data-stu-id="767bb-277">A typical example of this scenario is the case where application processing servers are in one spoke, or virtual network.</span></span> <span data-ttu-id="767bb-278">数据库部署在另一个辐射或虚拟网络中。</span><span class="sxs-lookup"><span data-stu-id="767bb-278">The database deploys in a different spoke, or virtual network.</span></span> <span data-ttu-id="767bb-279">在这种情况下，可以轻松实现辐射与虚拟网络对等互连之间的互连，从而避免通过中心传输。</span><span class="sxs-lookup"><span data-stu-id="767bb-279">In this case, it's easy to interconnect the spokes with virtual network peering and thereby avoid transiting through the hub.</span></span> <span data-ttu-id="767bb-280">应仔细审查体系结构和安全性，确保绕过中心并不会绕过可能只存在于中心的重要安全或审核点。</span><span class="sxs-lookup"><span data-stu-id="767bb-280">A careful architecture and security review should be performed to ensure that bypassing the hub doesn’t bypass important security or auditing points that might exist only in the hub.</span></span>

<span data-ttu-id="767bb-281">[![3]][3]</span><span class="sxs-lookup"><span data-stu-id="767bb-281">[![3]][3]</span></span>

<span data-ttu-id="767bb-282">辐射也可以与充当中心的辐射互连。</span><span class="sxs-lookup"><span data-stu-id="767bb-282">Spokes can also be interconnected to a spoke that acts as a hub.</span></span> <span data-ttu-id="767bb-283">此方法可以创建一个两层的层次结构：在该层次结构中，较高级别（第 0 层）的辐射成为较低级别（第 1 层）辐射的中心。</span><span class="sxs-lookup"><span data-stu-id="767bb-283">This approach creates a two-level hierarchy: the spokes in the higher level, level 0, become the hub of lower spokes, level 1, of the hierarchy.</span></span> <span data-ttu-id="767bb-284">VDC 实施方案的分支需要将流量转发到中心，以与本地网络或 Internet 连接。</span><span class="sxs-lookup"><span data-stu-id="767bb-284">The spokes of a VDC implementation are required to forward the traffic to the central hub to reach out either to the on-premises network or internet.</span></span> <span data-ttu-id="767bb-285">具有两层中心的体系结构引入了复杂路由，该路由会消除简单中心辐射关系的优势。</span><span class="sxs-lookup"><span data-stu-id="767bb-285">An architecture with two levels of hub introduces complex routing that removes the benefits of a simple hub-spoke relationship.</span></span>

<span data-ttu-id="767bb-286">尽管 Azure 允许复杂拓扑，但 VDC 概念的核心原则之一是可重复性和简洁性。</span><span class="sxs-lookup"><span data-stu-id="767bb-286">Although Azure allows complex topologies, one of the core principles of the VDC concept is repeatability and simplicity.</span></span> <span data-ttu-id="767bb-287">为了尽量减少管理工作量，我们建议使用简单的中心辐射设计作为 VDC 参考体系结构。</span><span class="sxs-lookup"><span data-stu-id="767bb-287">To minimize management effort, the simple hub-spoke design is the VDC reference architecture that we recommend.</span></span>

### <a name="components"></a><span data-ttu-id="767bb-288">组件</span><span class="sxs-lookup"><span data-stu-id="767bb-288">Components</span></span>
<span data-ttu-id="767bb-289">虚拟数据中心实施方案由四个基本组件类型构成：**基础结构**、**外围网络**、**工作负荷**和**监视**。</span><span class="sxs-lookup"><span data-stu-id="767bb-289">A virtual datacenter implementation is made up of four basic component types: **Infrastructure**, **Perimeter Networks**, **Workloads**, and **Monitoring**.</span></span>

<span data-ttu-id="767bb-290">每个组件类型由各种 Azure 功能和资源组成。</span><span class="sxs-lookup"><span data-stu-id="767bb-290">Each component type consists of various Azure features and resources.</span></span> <span data-ttu-id="767bb-291">企业的 VDC 实施方案由多个组件类型的实例和同一组件类型的多个变体构成。</span><span class="sxs-lookup"><span data-stu-id="767bb-291">An enterprise's VDC implementation is made up of instances of multiple component types and multiple variations of the same component type.</span></span> <span data-ttu-id="767bb-292">例如，可能有许多逻辑上分离的不同工作负荷实例表示不同应用程序。</span><span class="sxs-lookup"><span data-stu-id="767bb-292">For instance, you might have many different, logically separated workload instances that represent different applications.</span></span> <span data-ttu-id="767bb-293">使用这些不同的组件类型和实例最终生成 VDC。</span><span class="sxs-lookup"><span data-stu-id="767bb-293">You use these different component types and instances to ultimately build the VDC.</span></span>

<span data-ttu-id="767bb-294">[![4]][4]</span><span class="sxs-lookup"><span data-stu-id="767bb-294">[![4]][4]</span></span>

<span data-ttu-id="767bb-295">上图中的高级别 VDC 实施方案体系结构显示了中心辐射型拓扑的不同区域使用的不同组件类型。</span><span class="sxs-lookup"><span data-stu-id="767bb-295">The preceding high-level architecture of a VDC implementation shows different component types used in different zones of the hub-spokes topology.</span></span> <span data-ttu-id="767bb-296">此关系图显示了该体系结构中各个部分的基础结构组件。</span><span class="sxs-lookup"><span data-stu-id="767bb-296">The diagram shows infrastructure components in various parts of the architecture.</span></span>

<span data-ttu-id="767bb-297">访问权限和特权应该基于组，这是针对本地数据中心或 VDC 实施方案的良好做法。</span><span class="sxs-lookup"><span data-stu-id="767bb-297">As a good practice for an on-premises datacenter or a VDC implementation, access rights and privileges should be group based.</span></span> <span data-ttu-id="767bb-298">处理组而非单个用户可跨团队一致地维护访问策略，尽可能减少配置错误。</span><span class="sxs-lookup"><span data-stu-id="767bb-298">Deal with groups instead of individual users to maintain access policies consistently across teams and minimize configuration errors.</span></span> <span data-ttu-id="767bb-299">在相应的组中分配或删除用户可使特定用户的特权保持最新。</span><span class="sxs-lookup"><span data-stu-id="767bb-299">Assign and remove users to and from appropriate groups to keep the privileges of a specific user up to date.</span></span>

<span data-ttu-id="767bb-300">每个角色组的名称应具有唯一的前缀。</span><span class="sxs-lookup"><span data-stu-id="767bb-300">Each role group should have a unique prefix on their names.</span></span> <span data-ttu-id="767bb-301">参考此前缀可以轻松识别哪个组与哪个工作负荷相关联。</span><span class="sxs-lookup"><span data-stu-id="767bb-301">This prefix makes it easy to identify which group is associated with which workload.</span></span> <span data-ttu-id="767bb-302">例如，托管身份验证服务的工作负荷应具有名为 **AuthServiceNetOps**、**AuthServiceSecOps**、**AuthServiceDevOps** 和 **AuthServiceInfraOps** 的组。</span><span class="sxs-lookup"><span data-stu-id="767bb-302">For example, a workload hosting an authentication service might have groups named **AuthServiceNetOps**, **AuthServiceSecOps**, **AuthServiceDevOps**, and **AuthServiceInfraOps**.</span></span> <span data-ttu-id="767bb-303">中心化角色或不与特定服务相关的角色的名称可以 **Corp** 开头。例如 **CorpNetOps**。</span><span class="sxs-lookup"><span data-stu-id="767bb-303">Centralized roles, or roles not related to a specific service, might be prefaced with **Corp**. An example is **CorpNetOps**.</span></span>

<span data-ttu-id="767bb-304">许多组织都使用以下组的变体来提供主要角色细分：</span><span class="sxs-lookup"><span data-stu-id="767bb-304">Many organizations use a variation of the following groups to provide a major breakdown of roles:</span></span>

-   <span data-ttu-id="767bb-305">中心 IT 组 **Corp** 具有可控制基础结构组件的所有权。</span><span class="sxs-lookup"><span data-stu-id="767bb-305">The central IT group, **Corp,** has the ownership rights to control infrastructure components.</span></span> <span data-ttu-id="767bb-306">示例包括网络和安全性。</span><span class="sxs-lookup"><span data-stu-id="767bb-306">Examples are networking and security.</span></span> <span data-ttu-id="767bb-307">该组需要在订阅中拥有参与者角色、拥有中心控制权，并在辐射中拥有网络参与者权限。</span><span class="sxs-lookup"><span data-stu-id="767bb-307">The group needs to have the role of contributor on the subscription, control of the hub, and network contributor rights in the spokes.</span></span> <span data-ttu-id="767bb-308">大型组织经常在多个团队之间划分这些管理责任。</span><span class="sxs-lookup"><span data-stu-id="767bb-308">Large organizations frequently split up these management responsibilities between multiple teams.</span></span> <span data-ttu-id="767bb-309">例如，专门处理网络的网络操作 **CorpNetOps** 组，以及负责防火墙和安全策略的安全操作 **CorpSecOps** 组。</span><span class="sxs-lookup"><span data-stu-id="767bb-309">Examples are a network operations **CorpNetOps** group with exclusive focus on networking and a security operations **CorpSecOps** group responsible for the firewall and security policy.</span></span> <span data-ttu-id="767bb-310">在这种特定情况下，需要创建两个不同的组，用于分配这些自定义角色。</span><span class="sxs-lookup"><span data-stu-id="767bb-310">In this specific case, two different groups need to be created for assignment of these custom roles.</span></span>
-   <span data-ttu-id="767bb-311">开发与测试组 **AppDevOps** 负责部署应用或服务工作负荷。</span><span class="sxs-lookup"><span data-stu-id="767bb-311">The dev-test group, **AppDevOps,** has the responsibility to deploy app or service workloads.</span></span> <span data-ttu-id="767bb-312">此组充当 IaaS 部署的虚拟机参与者角色或者一个或多个 PaaS 参与者角色。</span><span class="sxs-lookup"><span data-stu-id="767bb-312">This group takes the role of virtual machine contributor for IaaS deployments or one or more PaaS contributor’s roles.</span></span> <span data-ttu-id="767bb-313">请参阅 [Azure 资源的内置角色][Roles]。</span><span class="sxs-lookup"><span data-stu-id="767bb-313">See [Built-in roles for Azure resources][Roles].</span></span> <span data-ttu-id="767bb-314">（可选）开发与测试团队可能需要对中心或特定辐射内的安全策略 (NSG) 和路由策略 (UDR) 拥有可见性。</span><span class="sxs-lookup"><span data-stu-id="767bb-314">Optionally, the dev-test team might need visibility on security policies, NSGs, and routing policies, UDRs, inside the hub or a specific spoke.</span></span> <span data-ttu-id="767bb-315">除了担任工作负荷参与者角色，此组也需要担任网络读取者角色。</span><span class="sxs-lookup"><span data-stu-id="767bb-315">In addition to the role of contributor for workloads, this group would also need the role of network reader.</span></span>
-   <span data-ttu-id="767bb-316">操作和维护组 **CorpInfraOps** 或 **AppInfraOps** 负责管理生产中的工作负荷。</span><span class="sxs-lookup"><span data-stu-id="767bb-316">The operation and maintenance group, **CorpInfraOps** or **AppInfraOps,** has the responsibility of managing workloads in production.</span></span> <span data-ttu-id="767bb-317">此组必须是任何生产订阅中工作负荷的订阅参与者。</span><span class="sxs-lookup"><span data-stu-id="767bb-317">This group needs to be a subscription contributor on workloads in any production subscriptions.</span></span> <span data-ttu-id="767bb-318">一些组织还可能评估他们是否需要在生产和中心订阅中担任订阅参与者角色的附加升级支持团队组。</span><span class="sxs-lookup"><span data-stu-id="767bb-318">Some organizations might also evaluate if they need an additional escalation support team group with the role of subscription contributor in production and the central hub subscription.</span></span> <span data-ttu-id="767bb-319">该附加组修复生产环境中的潜在配置问题。</span><span class="sxs-lookup"><span data-stu-id="767bb-319">The additional group fixes potential configuration issues in the production environment.</span></span>

<span data-ttu-id="767bb-320">VDC 是结构化的，可确保为中心 IT 组创建的用于管理中心的组在工作负荷级别拥有相应的组。</span><span class="sxs-lookup"><span data-stu-id="767bb-320">The VDC is structured so that groups created for the central IT groups that manage the hub have corresponding groups at the workload level.</span></span> <span data-ttu-id="767bb-321">除了管理中心资源之外，只有中心 IT 组能够在订阅中控制外部访问和最高权限。</span><span class="sxs-lookup"><span data-stu-id="767bb-321">In addition to managing hub resources, only the central IT groups would control external access and top-level permissions on the subscription.</span></span> <span data-ttu-id="767bb-322">但是，工作负荷组将在中心 IT 内独立地控制其虚拟网络中的资源和权限。</span><span class="sxs-lookup"><span data-stu-id="767bb-322">However, workload groups would control resources and permissions of their virtual network independently on the central IT.</span></span>

<span data-ttu-id="767bb-323">将 VDC 分区可以安全托管跨不同业务线的多个项目。</span><span class="sxs-lookup"><span data-stu-id="767bb-323">Partition the VDC to securely host multiple projects across different lines of business.</span></span> <span data-ttu-id="767bb-324">所有项目需要不同的隔离环境（如开发、UAT 和生产）。</span><span class="sxs-lookup"><span data-stu-id="767bb-324">All projects require different isolated environments, such as dev, UAT, and production.</span></span> <span data-ttu-id="767bb-325">每个环境的各个 Azure 订阅自然隔离。</span><span class="sxs-lookup"><span data-stu-id="767bb-325">Separate Azure subscriptions for each of these environments provide natural isolation.</span></span>

<span data-ttu-id="767bb-326">[![5]][5]</span><span class="sxs-lookup"><span data-stu-id="767bb-326">[![5]][5]</span></span>

<span data-ttu-id="767bb-327">上方关系图显示组织中项目、用户、组以及部署 Azure 组件的环境之间的关系。</span><span class="sxs-lookup"><span data-stu-id="767bb-327">The preceding diagram shows the relationship between an organization's projects, users, and groups and the environments where the Azure components are deployed.</span></span>

<span data-ttu-id="767bb-328">在 IT 中，环境或层通常是部署和运行多个应用程序的系统。</span><span class="sxs-lookup"><span data-stu-id="767bb-328">Typically in IT, an environment or tier is a system in which multiple applications are deployed and run.</span></span> <span data-ttu-id="767bb-329">大型企业使用开发环境做出更改和测试更改，并提供最终用户所用的生产环境。</span><span class="sxs-lookup"><span data-stu-id="767bb-329">Large enterprises use a development environment to make and test changes and a production environment that end users use.</span></span> <span data-ttu-id="767bb-330">这些环境相互隔离，环境之间通常存在多个过渡环境，出现问题时可实现分阶段部署（推出）、测试和回滚。</span><span class="sxs-lookup"><span data-stu-id="767bb-330">Those environments are separated, often with several staging environments in between them to allow phased deployment (rollout), testing, and rollback if there are problems.</span></span> <span data-ttu-id="767bb-331">部署体系结构之间存在巨大差异，但通常遵循以下基本流程：始于开发 **DEV**，终于生产 **PROD**。</span><span class="sxs-lookup"><span data-stu-id="767bb-331">Deployment architectures vary significantly but usually still follow the basic process that starts at development, **DEV**, and ends at production, **PROD**.</span></span>

<span data-ttu-id="767bb-332">此类多层环境的常见体系结构包括 Azure DevOps（开发和测试）、UAT（过渡）和生产环境。</span><span class="sxs-lookup"><span data-stu-id="767bb-332">A common architecture for these types of multi-tier environments consists of Azure DevOps for development and testing, UAT for staging, and production environments.</span></span> <span data-ttu-id="767bb-333">组织可以利用单个或多个 Azure AD 租户定义对这些环境的访问和权限。</span><span class="sxs-lookup"><span data-stu-id="767bb-333">Organizations can leverage single or multiple Azure AD tenants to define access and rights to these environments.</span></span> <span data-ttu-id="767bb-334">上方关系图显示使用两个不同 Azure AD 租户的事例：一个用于 Azure DevOps 和 UAT，另一个专门用于生产。</span><span class="sxs-lookup"><span data-stu-id="767bb-334">The previous diagram shows a case where two different Azure AD tenants are used: one for Azure DevOps and UAT, and the other exclusively for production.</span></span>

<span data-ttu-id="767bb-335">不同的 Azure AD 租户可以强化环境之间的隔离。</span><span class="sxs-lookup"><span data-stu-id="767bb-335">The presence of different Azure AD tenants enforces the separation between environments.</span></span> <span data-ttu-id="767bb-336">同一组用户（如中心 IT）需要使用不同 URI 进行身份验证，从而访问不同的 Azure AD 租户，该租户可修改项目的 Azure DevOps 或生产环境的角色或权限。</span><span class="sxs-lookup"><span data-stu-id="767bb-336">The same group of users, such as the central IT, needs to authenticate by using a different URI to access a different Azure AD tenant to modify the roles or permissions of either the Azure DevOps or production environments of a project.</span></span> <span data-ttu-id="767bb-337">通过不同的用户身份验证访问不同的环境可以减少人为失误可能导致的中断和其他问题。</span><span class="sxs-lookup"><span data-stu-id="767bb-337">The presence of different user authentications to access different environments reduces possible outages and other issues caused by human errors.</span></span>

#### <a name="component-type-infrastructure"></a><span data-ttu-id="767bb-338">组件类型：基础结构</span><span class="sxs-lookup"><span data-stu-id="767bb-338">Component type: Infrastructure</span></span>
<span data-ttu-id="767bb-339">大多数支持基础结构都位于此组件类型中。</span><span class="sxs-lookup"><span data-stu-id="767bb-339">This component type is where most of the supporting infrastructure resides.</span></span> <span data-ttu-id="767bb-340">中心化 IT、安全团队与合规团队的大部分时间花费在该类型上。</span><span class="sxs-lookup"><span data-stu-id="767bb-340">It's also where your centralized IT, security, and compliance teams spend most of their time.</span></span>

<span data-ttu-id="767bb-341">[![6]][6]</span><span class="sxs-lookup"><span data-stu-id="767bb-341">[![6]][6]</span></span>

<span data-ttu-id="767bb-342">基础结构组件为 VDC 的不同组件提供互连。</span><span class="sxs-lookup"><span data-stu-id="767bb-342">Infrastructure components provide an interconnection between the different components of the VDC.</span></span> <span data-ttu-id="767bb-343">它们位于中心和辐射中。</span><span class="sxs-lookup"><span data-stu-id="767bb-343">They're present in both the hub and the spokes.</span></span> <span data-ttu-id="767bb-344">管理和维护基础结构组件的责任通常分配给中心 IT 或安全团队。</span><span class="sxs-lookup"><span data-stu-id="767bb-344">The responsibility for managing and maintaining the infrastructure components is typically assigned to the central IT or security team.</span></span>

<span data-ttu-id="767bb-345">IT 基础结构团队的首要任务之一是保证整个企业 IP 地址架构的一致性。</span><span class="sxs-lookup"><span data-stu-id="767bb-345">One of the primary tasks of the IT infrastructure team is to guarantee the consistency of IP address schemas across the enterprise.</span></span> <span data-ttu-id="767bb-346">分配给 VDC 的专用 IP 地址空间需要一致。</span><span class="sxs-lookup"><span data-stu-id="767bb-346">The private IP address space assigned to the VDC needs to be consistent.</span></span> <span data-ttu-id="767bb-347">它不能与本地网络上分配的专用 IP 地址重叠。</span><span class="sxs-lookup"><span data-stu-id="767bb-347">It can't overlap with private IP addresses assigned on your on-premises networks.</span></span>

<span data-ttu-id="767bb-348">本地边缘路由器或 Azure 环境中的 NAT 可避免 IP 地址冲突，</span><span class="sxs-lookup"><span data-stu-id="767bb-348">NAT on the on-premises edge routers or in Azure environments can avoid IP address conflicts.</span></span> <span data-ttu-id="767bb-349">但会增大基础结构组件的复杂性。</span><span class="sxs-lookup"><span data-stu-id="767bb-349">But it adds complications to your infrastructure components.</span></span> <span data-ttu-id="767bb-350">简化管理是 VDC 的关键目标之一。</span><span class="sxs-lookup"><span data-stu-id="767bb-350">Simplicity of management is one of the key goals of the VDC.</span></span> <span data-ttu-id="767bb-351">因此我们不建议使用 NAT 解决 IP 问题。</span><span class="sxs-lookup"><span data-stu-id="767bb-351">So using NAT to handle IP concerns isn't a solution that we recommend.</span></span>

<span data-ttu-id="767bb-352">基础结构组件提供以下功能：</span><span class="sxs-lookup"><span data-stu-id="767bb-352">Infrastructure components have the following functionality:</span></span>

-   <span data-ttu-id="767bb-353">[**标识和目录服务**][AAD]。</span><span class="sxs-lookup"><span data-stu-id="767bb-353">[**Identity and directory services**][AAD].</span></span> <span data-ttu-id="767bb-354">对 Azure 中的每种资源类型的访问都由目录服务中存储的标识控制。</span><span class="sxs-lookup"><span data-stu-id="767bb-354">Access to every resource type in Azure is controlled by an identity stored in a directory service.</span></span> <span data-ttu-id="767bb-355">目录服务存储用户列表，以及特定 Azure 订阅中资源的访问权限。</span><span class="sxs-lookup"><span data-stu-id="767bb-355">The directory service stores the users list and the access rights to resources in a specific Azure subscription.</span></span> <span data-ttu-id="767bb-356">这些服务只可存在于云中。</span><span class="sxs-lookup"><span data-stu-id="767bb-356">These services can exist in the cloud only.</span></span> <span data-ttu-id="767bb-357">或者，它们可与 Azure Active Directory 中存储的本地标识同步。</span><span class="sxs-lookup"><span data-stu-id="767bb-357">Or they can be synchronized with an on-premises identity stored in Azure Active Directory.</span></span>
-   <span data-ttu-id="767bb-358">[**虚拟网络**][VPN]。</span><span class="sxs-lookup"><span data-stu-id="767bb-358">[**Virtual network**][VPN].</span></span> <span data-ttu-id="767bb-359">虚拟网络是 VDC 的主要组件之一。</span><span class="sxs-lookup"><span data-stu-id="767bb-359">Virtual networks are one of main components of the VDC.</span></span> <span data-ttu-id="767bb-360">通过虚拟网络可在 Azure 平台上创建流量隔离边界。</span><span class="sxs-lookup"><span data-stu-id="767bb-360">By using virtual networks, you can create a traffic isolation boundary on the Azure platform.</span></span> <span data-ttu-id="767bb-361">虚拟网络由一个或多个虚拟网络段构成。</span><span class="sxs-lookup"><span data-stu-id="767bb-361">A virtual network is composed of single or multiple virtual network segments.</span></span> <span data-ttu-id="767bb-362">每个虚拟网络段都有一个特定的 IP 网络前缀（子网）。</span><span class="sxs-lookup"><span data-stu-id="767bb-362">Each has a specific IP network prefix, a subnet.</span></span> <span data-ttu-id="767bb-363">虚拟网络定义内部外围区域，在该区域中 IaaS 虚拟机和 PaaS 服务可以建立专用通信。</span><span class="sxs-lookup"><span data-stu-id="767bb-363">The virtual network defines an internal perimeter area where IaaS virtual machines and PaaS services can establish private communications.</span></span> <span data-ttu-id="767bb-364">一个虚拟网络中的 VM 和 PaaS 服务不能与另一个虚拟网络中的 VM 和 PaaS 服务直接通信。</span><span class="sxs-lookup"><span data-stu-id="767bb-364">VMs and PaaS services in one virtual network can't communicate directly to VMs and PaaS services in a different virtual network.</span></span> <span data-ttu-id="767bb-365">即使这两个虚拟网络是由同一个客户在同一订阅下创建的，也存在这种隔离。</span><span class="sxs-lookup"><span data-stu-id="767bb-365">This isolation occurs even if the same customer creates both virtual networks under the same subscription.</span></span> <span data-ttu-id="767bb-366">隔离是一个非常关键的属性，可确保客户 VM 与通信在虚拟网络中保持私密性。</span><span class="sxs-lookup"><span data-stu-id="767bb-366">Isolation is a critical property that ensures customer VMs and communication stay private within a virtual network.</span></span>
-   <span data-ttu-id="767bb-367">[**UDR**][UDR]。</span><span class="sxs-lookup"><span data-stu-id="767bb-367">[**UDR**][UDR].</span></span> <span data-ttu-id="767bb-368">虚拟网络中的流量默认基于系统路由表路由。</span><span class="sxs-lookup"><span data-stu-id="767bb-368">Traffic in a virtual network is routed by default based on the system routing table.</span></span> <span data-ttu-id="767bb-369">用户定义的路由是自定义路由表，网络管理员可将该路由表关联到一个或多个子网。</span><span class="sxs-lookup"><span data-stu-id="767bb-369">A user-defined route is a custom routing table that network administrators can associate to one or more subnets.</span></span> <span data-ttu-id="767bb-370">这种关联会覆盖系统路由表的行为，并定义虚拟网络中的通信路径。</span><span class="sxs-lookup"><span data-stu-id="767bb-370">This association overwrites the behavior of the system routing table and defines a communication path within a virtual network.</span></span> <span data-ttu-id="767bb-371">UDR 保证辐射的出口流量通过中心和辐射中的特定自定义 VM 或虚拟网络设备以及负载均衡器传输。</span><span class="sxs-lookup"><span data-stu-id="767bb-371">The presence of UDRs guarantees that egress traffic from the spoke transits through specific custom VMs or network virtual appliances and load balancers present in the hub and in the spokes.</span></span>
-   <span data-ttu-id="767bb-372">[**NSG**][NSG]。</span><span class="sxs-lookup"><span data-stu-id="767bb-372">[**NSG**][NSG].</span></span> <span data-ttu-id="767bb-373">网络安全组是一系列安全规则，充当 IP 源、IP 目标、协议、IP 源端口和 IP 目标端口的流量筛选器。</span><span class="sxs-lookup"><span data-stu-id="767bb-373">A network security group is a list of security rules that acts as traffic filtering on IP sources, IP destinations, protocols, IP source ports, and IP destination ports.</span></span> <span data-ttu-id="767bb-374">NSG 可应用于子网和/或与 Azure VM 关联的虚拟 NIC 卡。</span><span class="sxs-lookup"><span data-stu-id="767bb-374">The NSG can apply to a subnet, a virtual NIC card associated with an Azure VM, or both.</span></span> <span data-ttu-id="767bb-375">NSG 对在中心和辐射中实现正确的流控制至关重要。</span><span class="sxs-lookup"><span data-stu-id="767bb-375">NSGs are essential to implement a correct flow control in the hub and in the spokes.</span></span> <span data-ttu-id="767bb-376">NSG 提供的安全级别由出于何种原因打开哪个端口决定。</span><span class="sxs-lookup"><span data-stu-id="767bb-376">The level of security afforded by the NSG is a function of which ports you open and for what purpose.</span></span> <span data-ttu-id="767bb-377">客户应通过基于主机的防火墙（如 IPtable 或 Windows 防火墙）对每个 VM 应用附加筛选器。</span><span class="sxs-lookup"><span data-stu-id="767bb-377">Customers should apply additional per VM filters with host-based firewalls such as IPtables or the Windows Firewall.</span></span>
-   <span data-ttu-id="767bb-378">[**DNS**][DNS]。</span><span class="sxs-lookup"><span data-stu-id="767bb-378">[**DNS**][DNS].</span></span> <span data-ttu-id="767bb-379">VDC 中虚拟网络资源的名称解析通过 DNS 提供。</span><span class="sxs-lookup"><span data-stu-id="767bb-379">The name resolution of resources in the virtual networks of the VDC is provided through the DNS.</span></span> <span data-ttu-id="767bb-380">Azure 提供 DNS 服务用于执行[公共][DNS]和[专用][PrivateDNS]名称解析。</span><span class="sxs-lookup"><span data-stu-id="767bb-380">Azure provides DNS services for both [public][DNS] and [private][PrivateDNS] name resolution.</span></span> <span data-ttu-id="767bb-381">专用区域在虚拟网络内或虚拟网络之间提供名称解析功能。</span><span class="sxs-lookup"><span data-stu-id="767bb-381">Private zones provide name resolution both within a virtual network and across virtual networks.</span></span> <span data-ttu-id="767bb-382">可以让专用区域跨同一区域的虚拟网络，以及跨区域和跨订阅。</span><span class="sxs-lookup"><span data-stu-id="767bb-382">You can have private zones that span across virtual networks in the same region and also across regions and subscriptions.</span></span> <span data-ttu-id="767bb-383">对于公共解析，Azure DNS 提供 DNS 域的托管服务。</span><span class="sxs-lookup"><span data-stu-id="767bb-383">For public resolution, Azure DNS provides a hosting service for DNS domains.</span></span> <span data-ttu-id="767bb-384">它使用 Microsoft Azure 基础结构提供名称解析。</span><span class="sxs-lookup"><span data-stu-id="767bb-384">It provides name resolution by using Microsoft Azure infrastructure.</span></span> <span data-ttu-id="767bb-385">通过在 Azure 中托管域，可以使用与其他 Azure 服务相同的凭据、API、工具和计费来管理 DNS 记录。</span><span class="sxs-lookup"><span data-stu-id="767bb-385">By hosting your domains in Azure, you can manage your DNS records by using the same credentials, APIs, tools, and billing as your other Azure services.</span></span>
-   <span data-ttu-id="767bb-386">[**订阅**][SubMgmt]和[**资源组管理**][RGMgmt]。</span><span class="sxs-lookup"><span data-stu-id="767bb-386">[**Subscription**][SubMgmt] and [**resource group management**][RGMgmt].</span></span> <span data-ttu-id="767bb-387">订阅定义在 Azure 创建多个资源组的自然边界。</span><span class="sxs-lookup"><span data-stu-id="767bb-387">A subscription defines a natural boundary to create multiple groups of resources in Azure.</span></span> <span data-ttu-id="767bb-388">订阅中的资源聚集在名为“资源组”的逻辑容器中。</span><span class="sxs-lookup"><span data-stu-id="767bb-388">Resources in a subscription are assembled together in logical containers named **resource groups**.</span></span> <span data-ttu-id="767bb-389">资源组表示组织 VDC 资源的逻辑组。</span><span class="sxs-lookup"><span data-stu-id="767bb-389">The resource group represents a logical group to organize the resources of the VDC.</span></span>
-   <span data-ttu-id="767bb-390">[**RBAC**][RBAC]。</span><span class="sxs-lookup"><span data-stu-id="767bb-390">[**RBAC**][RBAC].</span></span> <span data-ttu-id="767bb-391">通过 RBAC，可以映射组织角色以及访问特定 Azure 资源的权限，允许限制用户只进行特定子网操作。</span><span class="sxs-lookup"><span data-stu-id="767bb-391">Through RBAC, it's possible to map organizational roles along with rights to access specific Azure resources, which allows you to restrict users to only a certain subset of actions.</span></span> <span data-ttu-id="767bb-392">使用 RBAC，可以通过将相应的角色分配给相关范围内的用户、组和应用程序授予访问权限。</span><span class="sxs-lookup"><span data-stu-id="767bb-392">With RBAC, you can grant access by assigning the appropriate role to users, groups, and applications within the relevant scope.</span></span> <span data-ttu-id="767bb-393">角色分配的范围可以是 Azure 订阅、资源组或单个资源。</span><span class="sxs-lookup"><span data-stu-id="767bb-393">The scope of a role assignment can be an Azure subscription, a resource group, or a single resource.</span></span> <span data-ttu-id="767bb-394">RBAC 允许继承权限。</span><span class="sxs-lookup"><span data-stu-id="767bb-394">RBAC allows inheritance of permissions.</span></span> <span data-ttu-id="767bb-395">分配在父范围内的角色也会将访问权限授予给其中包含的子范围。</span><span class="sxs-lookup"><span data-stu-id="767bb-395">A role assigned at a parent scope also grants access to the children within it.</span></span> <span data-ttu-id="767bb-396">使用 RBAC，可以对职责进行分配，仅向用户授予执行作业所需的访问权限。</span><span class="sxs-lookup"><span data-stu-id="767bb-396">With RBAC, you can segregate duties and grant only the amount of access to users that they need to do their jobs.</span></span> <span data-ttu-id="767bb-397">例如，使用 RBAC 允许一个员工管理订阅中的虚拟机，</span><span class="sxs-lookup"><span data-stu-id="767bb-397">For example, use RBAC so one employee can manage virtual machines in a subscription.</span></span> <span data-ttu-id="767bb-398">允许另一个员工管理同一订阅中的 SQL 数据库。</span><span class="sxs-lookup"><span data-stu-id="767bb-398">Another can manage SQL databases within the same subscription.</span></span>
-   <span data-ttu-id="767bb-399">[**虚拟网络对等互连**][VNetPeering]。</span><span class="sxs-lookup"><span data-stu-id="767bb-399">[**Virtual network peering**][VNetPeering].</span></span> <span data-ttu-id="767bb-400">用于创建 VDC 基础结构的基本功能是虚拟网络对等互连。</span><span class="sxs-lookup"><span data-stu-id="767bb-400">The fundamental feature used to create the infrastructure of the VDC is virtual network peering.</span></span> <span data-ttu-id="767bb-401">它是一种通过 Azure 数据中心网络或跨区域的 Azure 全球主干网络连接同一区域中两个虚拟网络的机制。</span><span class="sxs-lookup"><span data-stu-id="767bb-401">It's a mechanism that connects two virtual networks in the same region through the Azure datacenter network or by using the Azure worldwide backbone across regions.</span></span>

#### <a name="component-type-perimeter-networks"></a><span data-ttu-id="767bb-402">组件类型：外围网络</span><span class="sxs-lookup"><span data-stu-id="767bb-402">Component type: Perimeter networks</span></span>
<span data-ttu-id="767bb-403">使用[外围网络][DMZ]组件（又称为 DMZ 网络）可与本地或实际数据中心网络建立连接，并允许与 Internet 建立连接。</span><span class="sxs-lookup"><span data-stu-id="767bb-403">With [perimeter network][DMZ] components, or a DMZ network, you can provide network connectivity with your on-premises or physical datacenter networks, along with any connectivity to and from the internet.</span></span> <span data-ttu-id="767bb-404">它也是网络和安全团队花费大部分时间的地方。</span><span class="sxs-lookup"><span data-stu-id="767bb-404">It's also where your network and security teams likely spend most of their time.</span></span>

<span data-ttu-id="767bb-405">传入数据包应该在流经中心的安全设备之后才到达辐射中的后端服务器。</span><span class="sxs-lookup"><span data-stu-id="767bb-405">Incoming packets should flow through the security appliances in the hub before reaching the back-end servers in the spokes.</span></span> <span data-ttu-id="767bb-406">示例包括防火墙、IDS 和 IPS。</span><span class="sxs-lookup"><span data-stu-id="767bb-406">Examples are the firewall, IDS, and IPS.</span></span> <span data-ttu-id="767bb-407">来自工作负荷的 Internet 绑定数据包在离开网络之前，也应流经外围网络中的安全设备。</span><span class="sxs-lookup"><span data-stu-id="767bb-407">Before they leave the network, internet-bound packets from the workloads should also flow through the security appliances in the perimeter network.</span></span> <span data-ttu-id="767bb-408">这种流动方式的目的是执行策略实施、检查和审核。</span><span class="sxs-lookup"><span data-stu-id="767bb-408">The purposes of this flow are policy enforcement, inspection, and auditing.</span></span>

<span data-ttu-id="767bb-409">外围网络组件提供以下功能：</span><span class="sxs-lookup"><span data-stu-id="767bb-409">Perimeter network components provide the following features:</span></span>

-   <span data-ttu-id="767bb-410">[虚拟网络][VNet]、[UDR][UDR] 和 [NSG][NSG]</span><span class="sxs-lookup"><span data-stu-id="767bb-410">[Virtual networks][VNet], [UDRs][UDR], and [NSGs][NSG]</span></span>
-   <span data-ttu-id="767bb-411">[网络虚拟设备][NVA]</span><span class="sxs-lookup"><span data-stu-id="767bb-411">[Network virtual appliances][NVA]</span></span>
-   <span data-ttu-id="767bb-412">[Azure 负载均衡器][ALB]</span><span class="sxs-lookup"><span data-stu-id="767bb-412">[Azure Load Balancer][ALB]</span></span>
-   <span data-ttu-id="767bb-413">[Azure 应用程序网关][AppGW]和 [Web 应用程序防火墙 (WAF)][WAF]</span><span class="sxs-lookup"><span data-stu-id="767bb-413">[Azure Application Gateway][AppGW] and [web application firewall (WAF)][WAF]</span></span>
-   <span data-ttu-id="767bb-414">[公共 IP][PIP]</span><span class="sxs-lookup"><span data-stu-id="767bb-414">[Public IPs][PIP]</span></span>
-   <span data-ttu-id="767bb-415">[Azure Front Door][AFD]</span><span class="sxs-lookup"><span data-stu-id="767bb-415">[Azure Front Door][AFD]</span></span>
-   <span data-ttu-id="767bb-416">[Azure 防火墙][AzFW]</span><span class="sxs-lookup"><span data-stu-id="767bb-416">[Azure Firewall][AzFW]</span></span>

<span data-ttu-id="767bb-417">通常，中心 IT 和安全团队负责外围网络的需求定义和操作。</span><span class="sxs-lookup"><span data-stu-id="767bb-417">Usually, the central IT and security teams have responsibility for requirement definition and operation of the perimeter networks.</span></span>

<span data-ttu-id="767bb-418">[![7]][7]</span><span class="sxs-lookup"><span data-stu-id="767bb-418">[![7]][7]</span></span>

<span data-ttu-id="767bb-419">上图显示了如何实施可以访问 Internet 和本地网络的两个外围。</span><span class="sxs-lookup"><span data-stu-id="767bb-419">The preceding diagram shows the enforcement of two perimeters with access to the internet and an on-premises network.</span></span> <span data-ttu-id="767bb-420">两者都位于外围网络和 vWAN 中心。</span><span class="sxs-lookup"><span data-stu-id="767bb-420">Both are resident in the DMZ and vWAN hubs.</span></span> <span data-ttu-id="767bb-421">在外围网络中心，可以使用 Web 应用程序防火墙 (WAF) 或 Azure 防火墙的多个场来扩展连接到 Internet 的外围网络，以支持大量的业务线。</span><span class="sxs-lookup"><span data-stu-id="767bb-421">In the DMZ hub, the perimeter network to the internet can scale up to support large numbers of lines of business by using multiple farms of web application firewall (WAF) or Azure Firewall instances.</span></span> <span data-ttu-id="767bb-422">在 vWAN 中心，可以根据需要通过 VPN 或 ExpressRoute 来实现高度可缩放的分支到分支连接和分支到 Azure 连接。</span><span class="sxs-lookup"><span data-stu-id="767bb-422">In the vWAN hub, highly scalable branch-to-branch and branch-to-Azure connectivity is accomplished via a VPN or ExpressRoute as needed.</span></span>

<span data-ttu-id="767bb-423">[**虚拟网络**][VNet]。</span><span class="sxs-lookup"><span data-stu-id="767bb-423">[**Virtual networks**][VNet].</span></span> <span data-ttu-id="767bb-424">通常基于虚拟网络构建中心，该虚拟网络提供多个子网用于托管不同类型的服务，并通过 NVA、WAF 和 Azure 应用程序网关实例筛选和检查流入或流出 Internet 的流量。</span><span class="sxs-lookup"><span data-stu-id="767bb-424">The hub is typically built on a virtual network with multiple subnets to host the different types of services that filter and inspect traffic to or from the internet via NVAs, WAF, and Azure Application Gateway instances.</span></span>

<span data-ttu-id="767bb-425">[**UDR**][UDR]。</span><span class="sxs-lookup"><span data-stu-id="767bb-425">[**UDRs**][UDR].</span></span> <span data-ttu-id="767bb-426">客户可以使用 UDR 部署防火墙、IDS 或 IPS 以及其他虚拟设备。</span><span class="sxs-lookup"><span data-stu-id="767bb-426">With UDRs, customers can deploy firewalls, IDSs or IPSs, and other virtual appliances.</span></span> <span data-ttu-id="767bb-427">他们可以通过这些安全设备路由网络流量，以实施、审核和检查安全边界策略。</span><span class="sxs-lookup"><span data-stu-id="767bb-427">They can route network traffic through these security appliances for security boundary policy enforcement, auditing, and inspection.</span></span> <span data-ttu-id="767bb-428">可以同时在中心和辐射中创建 UDR。</span><span class="sxs-lookup"><span data-stu-id="767bb-428">You can create UDRs in both the hub and the spokes.</span></span> <span data-ttu-id="767bb-429">UDR 保证通过 VDC 使用的特定自定义 VM、网络虚拟设备和负载均衡器传输流量。</span><span class="sxs-lookup"><span data-stu-id="767bb-429">They guarantee that traffic transits through the specific custom VMs, network virtual appliances, and load balancers used by the VDC.</span></span> <span data-ttu-id="767bb-430">若要确保由辐射中的 VM 生成的流量传输到正确的虚拟设备，请在辐射的子网中设置 UDR。</span><span class="sxs-lookup"><span data-stu-id="767bb-430">To make sure that traffic generated from VMs resident in the spoke transits to the correct virtual appliances, set a UDR in the subnets of the spoke.</span></span> <span data-ttu-id="767bb-431">将内部负载均衡器的前端 IP 地址设置为下一跃点。</span><span class="sxs-lookup"><span data-stu-id="767bb-431">Set the front-end IP address of the internal load balancer as the next hop.</span></span> <span data-ttu-id="767bb-432">内部负载均衡器将内部流量分配到虚拟设备或负载均衡器后端池。</span><span class="sxs-lookup"><span data-stu-id="767bb-432">The internal load balancer distributes the internal traffic to the virtual appliances, or load balancer back-end pool.</span></span>

<span data-ttu-id="767bb-433">[**Azure 防火墙**][AzFW]是托管的基于云的网络安全服务，可保护 Azure 虚拟网络资源。</span><span class="sxs-lookup"><span data-stu-id="767bb-433">[**Azure Firewall**][AzFW] is a managed, cloud-based network security service that protects your Azure Virtual Network resources.</span></span> <span data-ttu-id="767bb-434">它是一个服务形式的完全有状态防火墙，具有内置的高可用性和不受限制的云可伸缩性。</span><span class="sxs-lookup"><span data-stu-id="767bb-434">It's a fully stateful firewall as a service with built-in high availability and unrestricted cloud scalability.</span></span> <span data-ttu-id="767bb-435">可以跨订阅和虚拟网络集中创建、实施和记录应用程序与网络连接策略。</span><span class="sxs-lookup"><span data-stu-id="767bb-435">You can centrally create, enforce, and log application and network connectivity policies across subscriptions and virtual networks.</span></span> <span data-ttu-id="767bb-436">Azure 防火墙对虚拟网络资源使用静态公共 IP 地址。</span><span class="sxs-lookup"><span data-stu-id="767bb-436">Azure Firewall uses a static public IP address for your virtual network resources.</span></span> <span data-ttu-id="767bb-437">它允许外部防火墙识别源自虚拟网络的流量。</span><span class="sxs-lookup"><span data-stu-id="767bb-437">It allows outside firewalls to identify traffic that originates from your virtual network.</span></span> <span data-ttu-id="767bb-438">该服务与用于日志记录和分析的 Azure Monitor 完全集成。</span><span class="sxs-lookup"><span data-stu-id="767bb-438">The service is fully integrated with Azure Monitor for logging and analytics.</span></span>

<span data-ttu-id="767bb-439">[**网络虚拟设备**][NVA]。</span><span class="sxs-lookup"><span data-stu-id="767bb-439">[**Network virtual appliances**][NVA].</span></span> <span data-ttu-id="767bb-440">在中心内，可访问 Internet 的外围网络通常是通过 Azure 防火墙实例或防火墙或 Web 应用程序防火墙 (WAF) 的场管理的。</span><span class="sxs-lookup"><span data-stu-id="767bb-440">In the hub, the perimeter network with access to the internet is normally managed through an Azure Firewall instance or a farm of firewalls or web application firewall (WAF).</span></span>

<span data-ttu-id="767bb-441">不同的 LOB 通常使用许多 Web 应用程序。</span><span class="sxs-lookup"><span data-stu-id="767bb-441">Different LOBs commonly use many web applications.</span></span> <span data-ttu-id="767bb-442">这些应用程序容易出现各种漏洞和遭受潜在攻击。</span><span class="sxs-lookup"><span data-stu-id="767bb-442">These applications tend to suffer from various vulnerabilities and potential exploits.</span></span> <span data-ttu-id="767bb-443">Web 应用程序防火墙是一种特殊产品，相较通用防火墙而言，它能够更深入的检测对 Web 应用程序 (HTTP/HTTPS) 的攻击。</span><span class="sxs-lookup"><span data-stu-id="767bb-443">Web application firewalls are a special type of product used to detect attacks against web applications, HTTP/HTTPS, in more depth than a generic firewall.</span></span> <span data-ttu-id="767bb-444">与传统防火墙技术相比，WAF 拥有一组用于保护内部 Web 服务器免受威胁的特定功能。</span><span class="sxs-lookup"><span data-stu-id="767bb-444">Compared with tradition firewall technology, WAFs have a set of specific features to protect internal web servers from threats.</span></span>

<span data-ttu-id="767bb-445">但是，单个 VDC 实施方案必须托管在单个区域中，因为订阅要求不允许跨区域。</span><span class="sxs-lookup"><span data-stu-id="767bb-445">However, a single VDC implementation is required to be hosted within a single region because the subscription requirements don't allow spanning of regions.</span></span> <span data-ttu-id="767bb-446">此项要求使得单个 VDC 实施方案容易出现区域性服务中断。</span><span class="sxs-lookup"><span data-stu-id="767bb-446">This requirement makes a single VDC implementation vulnerable to regional outages.</span></span>

<span data-ttu-id="767bb-447">Azure 防火墙实例或 NVA 防火墙场使用通用的管理平面。</span><span class="sxs-lookup"><span data-stu-id="767bb-447">An Azure Firewall instance or NVA firewall farms use a common administration plane.</span></span> <span data-ttu-id="767bb-448">一组安全规则可以保护辐射中托管的工作负荷，并控制对本地网络的访问。</span><span class="sxs-lookup"><span data-stu-id="767bb-448">A set of security rules protects the workloads that are hosted in the spokes and controls access to on-premises networks.</span></span> <span data-ttu-id="767bb-449">Azure 防火墙内置了可伸缩性，对于 NVA 防火墙，可在负载均衡器后面手动进行缩放。</span><span class="sxs-lookup"><span data-stu-id="767bb-449">Azure Firewall has scalability built in, whereas NVA firewalls can be manually scaled behind a load balancer.</span></span> <span data-ttu-id="767bb-450">一般而言，与 WAF 相比，防火墙场的专用软件更少。</span><span class="sxs-lookup"><span data-stu-id="767bb-450">Generally, a firewall farm has less specialized software compared to WAF.</span></span> <span data-ttu-id="767bb-451">但是，其应用范围更广泛，可以筛选和检查出口和入口的任何流量类型。</span><span class="sxs-lookup"><span data-stu-id="767bb-451">But it has a broader application scope to filter and inspect any type of traffic in egress and ingress.</span></span> <span data-ttu-id="767bb-452">如果使用 NVA 方法，可以在 Azure 市场中查找和部署相关软件。</span><span class="sxs-lookup"><span data-stu-id="767bb-452">If an NVA approach is used, they can be found and deployed from the Azure Marketplace.</span></span>

<span data-ttu-id="767bb-453">我们建议对源自 Internet 的流量使用一组 Azure 防火墙实例或 NVA。</span><span class="sxs-lookup"><span data-stu-id="767bb-453">We recommend that you use one set of Azure Firewall instances, or NVAs, for traffic originating on the internet.</span></span> <span data-ttu-id="767bb-454">对源自本地的流量使用另一组 Azure 防火墙或 NVA。</span><span class="sxs-lookup"><span data-stu-id="767bb-454">Use another for traffic originating on-premises.</span></span> <span data-ttu-id="767bb-455">仅对两组网络流量使用一组防火墙会存在安全风险，因为它不会在两组网络流量之间提供安全外围。</span><span class="sxs-lookup"><span data-stu-id="767bb-455">Using only one set of firewalls for both is a security risk as it provides no security perimeter between the two sets of network traffic.</span></span> <span data-ttu-id="767bb-456">使用不同防火墙层可以降低检查安全规则的复杂性，并指明哪项规则与哪项传入网络请求对应。</span><span class="sxs-lookup"><span data-stu-id="767bb-456">Using separate firewall layers reduces the complexity of checking security rules and makes it clear which rules correspond to which incoming network request.</span></span>

<span data-ttu-id="767bb-457">大多数大型企业都管理多个域。</span><span class="sxs-lookup"><span data-stu-id="767bb-457">Most large enterprises manage multiple domains.</span></span> <span data-ttu-id="767bb-458">[Azure DNS][DNS] 可用于托管某个特定域的 DNS 记录。</span><span class="sxs-lookup"><span data-stu-id="767bb-458">[Azure DNS][DNS] can be used to host the DNS records for a particular domain.</span></span> <span data-ttu-id="767bb-459">例如，可以在 Azure DNS 记录的 **A** 记录中登记 Azure 外部负载均衡器或 WAF 的虚拟 IP (VIP) 地址。</span><span class="sxs-lookup"><span data-stu-id="767bb-459">For example, the virtual IP (VIP) address of the Azure external load balancer, or WAF, can be registered in the **A** record of an Azure DNS record.</span></span> <span data-ttu-id="767bb-460">还可以使用[**专用 DNS**][PrivateDNS] 管理虚拟网络内部的专用地址空间。</span><span class="sxs-lookup"><span data-stu-id="767bb-460">[**Private DNSs**][PrivateDNS] are also available for managing the private address spaces inside virtual networks.</span></span>

<span data-ttu-id="767bb-461">[**Azure 负载均衡器**][ALB]提供高可用性第 4 层 TCP 或 UDP 服务。</span><span class="sxs-lookup"><span data-stu-id="767bb-461">[**Azure Load Balancer**][ALB] offers a high-availability Layer 4, TCP or UDP, service.</span></span> <span data-ttu-id="767bb-462">它可以在负载均衡的集内定义的服务实例之间分配传入流量。</span><span class="sxs-lookup"><span data-stu-id="767bb-462">It can distribute incoming traffic among service instances defined in a load-balanced set.</span></span> <span data-ttu-id="767bb-463">可将由前端终结点公共或专用 IP 发送到负载均衡器的流量重新分配（通过或不通过地址转换）到一组后端 IP 地址池。</span><span class="sxs-lookup"><span data-stu-id="767bb-463">Traffic sent to the load balancer from front-end endpoints, public or private IP, can be redistributed with or without address translation to a set of back-end IP address pools.</span></span> <span data-ttu-id="767bb-464">示例包括网络虚拟设备或 VM。</span><span class="sxs-lookup"><span data-stu-id="767bb-464">Examples are network virtual appliances or VMs.</span></span>

<span data-ttu-id="767bb-465">Azure 负载均衡器还可以探测各种服务器实例的运行状况。</span><span class="sxs-lookup"><span data-stu-id="767bb-465">Azure Load Balancer can probe the health of the various server instances as well.</span></span> <span data-ttu-id="767bb-466">当探测无法响应时，负载均衡器会停止向状况不良的实例发送流量。</span><span class="sxs-lookup"><span data-stu-id="767bb-466">When a probe fails to respond, the load balancer stops sending traffic to the unhealthy instance.</span></span> <span data-ttu-id="767bb-467">例如，在 VDC 中，中心的外部负载均衡器可以均衡发送到 NVA 的流量。</span><span class="sxs-lookup"><span data-stu-id="767bb-467">In the VDC, an external load balancer in the hub balances the traffic to NVAs, for example.</span></span> <span data-ttu-id="767bb-468">辐射中的外部负载均衡器可以执行均衡多层应用程序的不同 VM 之间的流量等任务。</span><span class="sxs-lookup"><span data-stu-id="767bb-468">In the spokes, it does tasks like balancing traffic between different VMs of a multi-tier application.</span></span>

<span data-ttu-id="767bb-469">[**Azure Front Door**][AFD] 是 Microsoft 提供的高度可用、可缩放的 Web 应用程序加速平台、全局 HTTP 负载均衡器、应用程序防护和内容分发网络。</span><span class="sxs-lookup"><span data-stu-id="767bb-469">[**Azure Front Door**][AFD] is Microsoft's highly available and scalable web application acceleration platform, global HTTP load balancer, application protection, and content delivery network.</span></span> <span data-ttu-id="767bb-470">Front Door 在 Microsoft 全球网络边缘中的 100 多个位置运行。</span><span class="sxs-lookup"><span data-stu-id="767bb-470">Front Door runs in more than 100 locations at the edge of Microsoft's global network.</span></span> <span data-ttu-id="767bb-471">使用 Front Door 可以生成、运行和横向扩展动态 Web 应用程序与静态内容。</span><span class="sxs-lookup"><span data-stu-id="767bb-471">By using Front Door, you can build, operate, and scale out your dynamic web applications and static content.</span></span> <span data-ttu-id="767bb-472">Front Door 为应用程序提供以下优势：</span><span class="sxs-lookup"><span data-stu-id="767bb-472">Front Door provides your application the following benefits:</span></span> 
* <span data-ttu-id="767bb-473">一流的最终用户性能。</span><span class="sxs-lookup"><span data-stu-id="767bb-473">World-class end-user performance.</span></span>
* <span data-ttu-id="767bb-474">统一的区域或阵列维护自动化。</span><span class="sxs-lookup"><span data-stu-id="767bb-474">Unified regional or stamp maintenance automation.</span></span>
* <span data-ttu-id="767bb-475">BCDR 自动化。</span><span class="sxs-lookup"><span data-stu-id="767bb-475">BCDR automation.</span></span>
* <span data-ttu-id="767bb-476">统一的客户端或用户信息。</span><span class="sxs-lookup"><span data-stu-id="767bb-476">Unified client or user information.</span></span> 
* <span data-ttu-id="767bb-477">缓存。</span><span class="sxs-lookup"><span data-stu-id="767bb-477">Caching.</span></span> 
* <span data-ttu-id="767bb-478">服务见解。</span><span class="sxs-lookup"><span data-stu-id="767bb-478">Service insights.</span></span> <span data-ttu-id="767bb-479">该平台提供高性能、可靠性和支持性 SLA、合规认证，以及 Azure 原生开发、运行和支持的可审核安全做法。</span><span class="sxs-lookup"><span data-stu-id="767bb-479">The platform offers performance, reliability and support SLAs, compliance certifications, and auditable security practices that are developed, operated, and supported natively by Azure.</span></span>

<span data-ttu-id="767bb-480">[**应用程序网关**][AppGW]是一个专用的虚拟设备，以服务形式提供应用程序传送控制器 (ADC)，为应用程序提供各种第 7 层负载均衡功能。</span><span class="sxs-lookup"><span data-stu-id="767bb-480">[**Application Gateway**][AppGW] is a dedicated virtual appliance that provides application delivery controller (ADC) as a service, offering various layer 7 load-balancing capabilities for your application.</span></span> <span data-ttu-id="767bb-481">可将 CPU 密集型 SSL 终点卸载到应用程序网关实例，优化 Web 场工作效率。</span><span class="sxs-lookup"><span data-stu-id="767bb-481">You can optimize web farm productivity by offloading CPU-intensive SSL termination to the Application Gateway instance.</span></span> <span data-ttu-id="767bb-482">它还提供其他第 7 层路由功能，示例包括：</span><span class="sxs-lookup"><span data-stu-id="767bb-482">It also provides other layer 7 routing capabilities that include the following examples:</span></span> 
* <span data-ttu-id="767bb-483">传入流量的轮循机制分配。</span><span class="sxs-lookup"><span data-stu-id="767bb-483">Round robin distribution of incoming traffic.</span></span> 
* <span data-ttu-id="767bb-484">基于 Cookie 的会话关联。</span><span class="sxs-lookup"><span data-stu-id="767bb-484">Cookie-based session affinity.</span></span> 
* <span data-ttu-id="767bb-485">基于 URL 路径的路由。</span><span class="sxs-lookup"><span data-stu-id="767bb-485">URL path-based routing.</span></span> 
* <span data-ttu-id="767bb-486">能够在单个应用程序网关实例后面托管多个网站</span><span class="sxs-lookup"><span data-stu-id="767bb-486">The ability to host multiple websites behind a single Application Gateway instance.</span></span> <span data-ttu-id="767bb-487">Web 应用程序防火墙 (WAF) 也作为应用程序网关 WAF SKU 的一部分提供。</span><span class="sxs-lookup"><span data-stu-id="767bb-487">Web application firewall (WAF) is also provided as part of the Application Gateway WAF SKU.</span></span> <span data-ttu-id="767bb-488">此 SKU 可保护 Web 应用程序免受 Web 常见漏洞和攻击的影响。</span><span class="sxs-lookup"><span data-stu-id="767bb-488">This SKU provides protection to web applications from common web vulnerabilities and exploits.</span></span> <span data-ttu-id="767bb-489">可将应用程序网关配置为面向 Internet 的网关、仅限内部访问的网关或二者合一的网关。</span><span class="sxs-lookup"><span data-stu-id="767bb-489">Application Gateway can be configured as an internet-facing gateway, an internal-only gateway, or a combination of both.</span></span> 

<span data-ttu-id="767bb-490">[**公共 IP**][PIP]。</span><span class="sxs-lookup"><span data-stu-id="767bb-490">[**Public IPs**][PIP].</span></span> <span data-ttu-id="767bb-491">使用某些 Azure 功能，可将服务终结点关联到某个公共 IP 地址，以便可以从 Internet 访问资源。</span><span class="sxs-lookup"><span data-stu-id="767bb-491">With some Azure features, you can associate service endpoints to a public IP address, so that your resource can be accessed from the internet.</span></span> <span data-ttu-id="767bb-492">该终结点使用网络地址转换 (NAT) 将流量路由到 Azure 虚拟网络上的内部地址和端口。</span><span class="sxs-lookup"><span data-stu-id="767bb-492">This endpoint uses network address translation (NAT) to route traffic to the internal address and port on the Azure virtual network.</span></span> <span data-ttu-id="767bb-493">此路径是外部流量进入虚拟网络的主要方式。</span><span class="sxs-lookup"><span data-stu-id="767bb-493">This path is the primary way for external traffic to pass into the virtual network.</span></span> <span data-ttu-id="767bb-494">可以配置公共 IP 地址，以确定可以传入哪种流量、如何在虚拟网络上转换该流量以及要将它路由到何处。</span><span class="sxs-lookup"><span data-stu-id="767bb-494">You can configure public IP addresses to determine which traffic is passed in and how and where it's translated onto the virtual network.</span></span>

<span data-ttu-id="767bb-495">[**Azure DDoS 防护标准版**][DDOS]在专门针对 Azure 虚拟网络资源优化的[基本服务][DDOS]层上提供其他风险缓解功能。</span><span class="sxs-lookup"><span data-stu-id="767bb-495">[**Azure DDoS Protection Standard**][DDOS] provides additional mitigation capabilities over the [Basic service][DDOS] tier that are tuned specifically to Azure Virtual Network resources.</span></span> <span data-ttu-id="767bb-496">DDoS 保护标准易于启用，无需更改应用程序。</span><span class="sxs-lookup"><span data-stu-id="767bb-496">DDoS Protection Standard is simple to enable and requires no application changes.</span></span> <span data-ttu-id="767bb-497">通过专用流量监控和机器学习算法优化保护策略。</span><span class="sxs-lookup"><span data-stu-id="767bb-497">Protection policies are tuned through dedicated traffic monitoring and machine learning algorithms.</span></span> <span data-ttu-id="767bb-498">策略应用到与虚拟网络中部署的资源关联的公共 IP 地址。</span><span class="sxs-lookup"><span data-stu-id="767bb-498">Policies are applied to public IP addresses associated to resources deployed in virtual networks.</span></span> <span data-ttu-id="767bb-499">示例包括 Azure 负载均衡器、Azure 应用程序网关和 Azure Service Fabric 实例。</span><span class="sxs-lookup"><span data-stu-id="767bb-499">Examples are Azure Load Balancer, Azure Application Gateway, and Azure Service Fabric instances.</span></span> <span data-ttu-id="767bb-500">可在攻击期间通过 Azure Monitor 视图并针对历史记录获得实时遥测。</span><span class="sxs-lookup"><span data-stu-id="767bb-500">Real-time telemetry is available through Azure Monitor views during an attack and for history.</span></span> <span data-ttu-id="767bb-501">可通过 Azure 应用程序网关 Web 应用程序防火墙来添加应用程序层保护。</span><span class="sxs-lookup"><span data-stu-id="767bb-501">Application layer protection can be added through the Azure Application Gateway web application firewall.</span></span> <span data-ttu-id="767bb-502">为 IPv4 Azure 公共 IP 地址提供保护。</span><span class="sxs-lookup"><span data-stu-id="767bb-502">Protection is provided for IPv4 Azure public IP addresses.</span></span>

#### <a name="component-type-monitoring"></a><span data-ttu-id="767bb-503">组件类型：监视</span><span class="sxs-lookup"><span data-stu-id="767bb-503">Component type: Monitoring</span></span>
<span data-ttu-id="767bb-504">监视组件可以监视所有其他组件类型并报警。</span><span class="sxs-lookup"><span data-stu-id="767bb-504">Monitoring components provide visibility and alerting from all the other components types.</span></span> <span data-ttu-id="767bb-505">所有团队都应有权监视他们有权访问的组件和服务。</span><span class="sxs-lookup"><span data-stu-id="767bb-505">All teams should have access to monitoring for the components and services they have access to.</span></span> <span data-ttu-id="767bb-506">如果拥有中心化支持人员或操作团队，他们需要对这些组件提供的数据拥有集成访问权限。</span><span class="sxs-lookup"><span data-stu-id="767bb-506">If you have a centralized help desk or operation teams, they need to have integrated access to the data provided by these components.</span></span>

<span data-ttu-id="767bb-507">Azure 提供不同类型的记录和监视服务，跟踪 Azure 托管资源的行为。</span><span class="sxs-lookup"><span data-stu-id="767bb-507">Azure offers different types of logging and monitoring services to track the behavior of Azure-hosted resources.</span></span> <span data-ttu-id="767bb-508">对 Azure 中工作负荷的管理和控制不仅只基于收集日志数据，也基于根据特定报告事件触发操作的能力。</span><span class="sxs-lookup"><span data-stu-id="767bb-508">Governance and control of workloads in Azure is based not just on collecting log data but also on the ability to trigger actions based on specific reported events.</span></span>

<span data-ttu-id="767bb-509">[**Azure Monitor**][Monitor]。</span><span class="sxs-lookup"><span data-stu-id="767bb-509">[**Azure Monitor**][Monitor].</span></span> <span data-ttu-id="767bb-510">Azure 包括多项可以在监视空间单独执行特定角色或任务的服务。</span><span class="sxs-lookup"><span data-stu-id="767bb-510">Azure includes multiple services that individually perform a specific role or task in the monitoring space.</span></span> <span data-ttu-id="767bb-511">这些服务组合在一起就可以提供一个全面的解决方案，用于从应用程序以及支持应用程序的 Azure 资源收集遥测数据，对这些数据进行分析并执行操作。</span><span class="sxs-lookup"><span data-stu-id="767bb-511">Together, these services deliver a comprehensive solution for collecting, analyzing, and acting on telemetry from your application and the Azure resources that support them.</span></span> <span data-ttu-id="767bb-512">这些服务还监视关键的本地资源，以提供混合监视环境。</span><span class="sxs-lookup"><span data-stu-id="767bb-512">They can also work to monitor critical on-premises resources in order to provide a hybrid monitoring environment.</span></span> <span data-ttu-id="767bb-513">为应用程序开发完整监视策略的第一步是了解可用的工具和数据。</span><span class="sxs-lookup"><span data-stu-id="767bb-513">Understanding the tools and data that are available is the first step in developing a complete monitoring strategy for your application.</span></span>

<span data-ttu-id="767bb-514">Azure 中主要有两种日志类型：</span><span class="sxs-lookup"><span data-stu-id="767bb-514">There are two major types of logs in Azure:</span></span>

-   <span data-ttu-id="767bb-515">[Azure 活动日志][ActLog]（前称为“运行日志”）提供相关信息，方便用户了解对 Azure 订阅中的资源执行的操作。</span><span class="sxs-lookup"><span data-stu-id="767bb-515">The [Azure Activity Log][ActLog], previously called **Operational Logs**, provides insight into the operations that were performed on resources in the Azure subscription.</span></span> <span data-ttu-id="767bb-516">这些日志报告订阅的控制平面事件。</span><span class="sxs-lookup"><span data-stu-id="767bb-516">These logs report the control-plane events for your subscriptions.</span></span> <span data-ttu-id="767bb-517">每个 Azure 资源都会生成审核日志。</span><span class="sxs-lookup"><span data-stu-id="767bb-517">Every Azure resource produces audit logs.</span></span>

-   <span data-ttu-id="767bb-518">[Azure Monitor 诊断日志][DiagLog]是资源生成的日志，记录与该资源的操作相关的各种频繁生成的数据。</span><span class="sxs-lookup"><span data-stu-id="767bb-518">[Azure Monitor diagnostic logs][DiagLog] are logs generated by a resource that provides rich, frequent data about the operation of that resource.</span></span> <span data-ttu-id="767bb-519">这些日志的内容因资源类型而异。</span><span class="sxs-lookup"><span data-stu-id="767bb-519">The content of these logs varies by resource type.</span></span>

<span data-ttu-id="767bb-520">[![9]][9]</span><span class="sxs-lookup"><span data-stu-id="767bb-520">[![9]][9]</span></span>

<span data-ttu-id="767bb-521">在 VDC 中，跟踪 NSG 日志非常重要，尤其是以下信息：</span><span class="sxs-lookup"><span data-stu-id="767bb-521">In the VDC, it's important to track the NSG logs, particularly this information:</span></span>

-   <span data-ttu-id="767bb-522">[事件日志][NSGLog]提供根据 MAC 地址向 VM 和实例角色应用的 NSG 规则的相关信息。</span><span class="sxs-lookup"><span data-stu-id="767bb-522">[Event logs][NSGLog] provide information on what NSG rules are applied to VMs and instance roles based on MAC address.</span></span>
-   <span data-ttu-id="767bb-523">[计数器日志][NSGLog]跟踪拒绝或允许流量的每个 NSG 规则的运行次数。</span><span class="sxs-lookup"><span data-stu-id="767bb-523">[Counter logs][NSGLog] track how many times each NSG rule was run to deny or allow traffic.</span></span>

<span data-ttu-id="767bb-524">所有日志都可以存储在 Azure 存储帐户中，以便进行审核、静态分析或备份。</span><span class="sxs-lookup"><span data-stu-id="767bb-524">All logs can be stored in Azure storage accounts for audit, static analysis, or backup purposes.</span></span> <span data-ttu-id="767bb-525">将日志存储在 Azure 存储帐户中时，客户可以对该数据使用不同类型的框架进行检索、准备、分析和可视化操作，以报告云资源的状态和运行状况。</span><span class="sxs-lookup"><span data-stu-id="767bb-525">When you store the logs in an Azure storage account, customers can use different types of frameworks to retrieve, prep, analyze, and visualize this data to report the status and health of cloud resources.</span></span> 

<span data-ttu-id="767bb-526">大型企业应已获取用于监视本地系统的标准框架。</span><span class="sxs-lookup"><span data-stu-id="767bb-526">Large enterprises should already have acquired a standard framework for monitoring on-premises systems.</span></span> <span data-ttu-id="767bb-527">它们可以扩展该框架以集成云部署生成的日志。</span><span class="sxs-lookup"><span data-stu-id="767bb-527">They can extend that framework to integrate logs generated by cloud deployments.</span></span> <span data-ttu-id="767bb-528">组织可以使用 [Azure Log Analytics][https://docs.microsoft.com/en-us/azure/log-analytics/log-analytics-queries] 将所有日志保留在云中。</span><span class="sxs-lookup"><span data-stu-id="767bb-528">By using [Azure Log Analytics][https://docs.microsoft.com/en-us/azure/log-analytics/log-analytics-queries], organizations can keep all the logging in the cloud.</span></span> <span data-ttu-id="767bb-529">Log Analytics 作为基于云的服务实现。</span><span class="sxs-lookup"><span data-stu-id="767bb-529">Log Analytics is implemented as a cloud-based service.</span></span> <span data-ttu-id="767bb-530">因此，对基础结构服务进行极少量的投资即可快速使其启动并运行。</span><span class="sxs-lookup"><span data-stu-id="767bb-530">So you have it up and running quickly with minimal investment in infrastructure services.</span></span> <span data-ttu-id="767bb-531">Log Analytics 还可与 System Center Operations Manager 等 System Center 组件集成，将现有管理投资扩展到云。</span><span class="sxs-lookup"><span data-stu-id="767bb-531">Log Analytics also integrate with System Center components like System Center Operations Manager to extend your existing management investments into the cloud.</span></span> 

<span data-ttu-id="767bb-532">Log Analytics 是 Azure 中的一个服务，可帮助收集、关联、搜索以及处理由操作系统、应用程序和基础结构云组件生成的日志和性能数据。</span><span class="sxs-lookup"><span data-stu-id="767bb-532">Log Analytics is a service in Azure that helps collect, correlate, search, and act on log and performance data generated by operating systems, applications, and infrastructure cloud components.</span></span> <span data-ttu-id="767bb-533">使用集成搜索和自定义仪表板为客户提供实时操作见解，分析 VDC 中所有工作负荷的所有记录。</span><span class="sxs-lookup"><span data-stu-id="767bb-533">It gives customers real-time operational insights by using integrated search and custom dashboards to analyze all the records across all your workloads in the VDC.</span></span>

<span data-ttu-id="767bb-534">[Azure 网络观察程序][NetWatch]提供所需的工具用于监视、诊断 Azure 虚拟网络中的资源、查看其指标，以及为其启用或禁用日志。</span><span class="sxs-lookup"><span data-stu-id="767bb-534">[Azure Network Watcher][NetWatch] provides tools to monitor, diagnose, and view metrics and enable or disable logs for resources in an Azure virtual network.</span></span> <span data-ttu-id="767bb-535">它是一个多面性的服务，可以实现下述和其他功能：</span><span class="sxs-lookup"><span data-stu-id="767bb-535">It's a multifaceted service that allows the following functionalities and more:</span></span>
-    <span data-ttu-id="767bb-536">监视虚拟机与终结点之间的通信。</span><span class="sxs-lookup"><span data-stu-id="767bb-536">Monitor communication between a virtual machine and an endpoint.</span></span>
-    <span data-ttu-id="767bb-537">查看虚拟网络中的资源及其关系。</span><span class="sxs-lookup"><span data-stu-id="767bb-537">View resources in a virtual network and their relationships.</span></span>
-    <span data-ttu-id="767bb-538">诊断传入或传出 VM 的网络流量筛选问题。</span><span class="sxs-lookup"><span data-stu-id="767bb-538">Diagnose network traffic filtering problems to or from a VM.</span></span>
-    <span data-ttu-id="767bb-539">诊断 VM 的网络路由问题。</span><span class="sxs-lookup"><span data-stu-id="767bb-539">Diagnose network routing problems from a VM.</span></span>
-    <span data-ttu-id="767bb-540">诊断 VM 的出站连接。</span><span class="sxs-lookup"><span data-stu-id="767bb-540">Diagnose outbound connections from a VM.</span></span>
-    <span data-ttu-id="767bb-541">捕获传入和传出 VM 的数据包。</span><span class="sxs-lookup"><span data-stu-id="767bb-541">Capture packets to and from a VM.</span></span>
-    <span data-ttu-id="767bb-542">诊断 Azure 虚拟网络网关和连接的问题。</span><span class="sxs-lookup"><span data-stu-id="767bb-542">Diagnose problems with an Azure virtual network gateway and connections.</span></span>
-    <span data-ttu-id="767bb-543">确定 Azure 区域与 Internet 服务提供商之间的相对延迟。</span><span class="sxs-lookup"><span data-stu-id="767bb-543">Determine relative latencies between Azure regions and internet service providers.</span></span>
-    <span data-ttu-id="767bb-544">查看网络接口的安全规则。</span><span class="sxs-lookup"><span data-stu-id="767bb-544">View security rules for a network interface.</span></span>
-    <span data-ttu-id="767bb-545">查看网络指标。</span><span class="sxs-lookup"><span data-stu-id="767bb-545">View network metrics.</span></span>
-    <span data-ttu-id="767bb-546">分析传入或传出网络安全组的流量。</span><span class="sxs-lookup"><span data-stu-id="767bb-546">Analyze traffic to or from a network security group.</span></span>
-    <span data-ttu-id="767bb-547">查看网络资源的诊断日志。</span><span class="sxs-lookup"><span data-stu-id="767bb-547">View diagnostic logs for network resources.</span></span>

<span data-ttu-id="767bb-548">Operations Management Suite 中的[网络性能监视器][NPM]解决方案提供详细的端到端网络信息。</span><span class="sxs-lookup"><span data-stu-id="767bb-548">The [Network Performance Monitor][NPM] solution inside Operations Management Suite can provide detailed network information end to end.</span></span> <span data-ttu-id="767bb-549">此信息包括 Azure 网络和本地网络的单个视图。</span><span class="sxs-lookup"><span data-stu-id="767bb-549">This information includes a single view of your Azure networks and on-premises networks.</span></span> <span data-ttu-id="767bb-550">该解决方案为 ExpressRoute 和公共服务提供特定的监视器。</span><span class="sxs-lookup"><span data-stu-id="767bb-550">The solution has specific monitors for ExpressRoute and public services.</span></span>

#### <a name="component-type-workloads"></a><span data-ttu-id="767bb-551">组件类型：工作负荷</span><span class="sxs-lookup"><span data-stu-id="767bb-551">Component type: Workloads</span></span>
<span data-ttu-id="767bb-552">工作负荷组件是实际应用程序和服务所在的位置。</span><span class="sxs-lookup"><span data-stu-id="767bb-552">Workload components are where your actual applications and services reside.</span></span> <span data-ttu-id="767bb-553">它们也是应用程序开发团队花费大部分时间的地方。</span><span class="sxs-lookup"><span data-stu-id="767bb-553">They're also where your application development teams spend most of their time.</span></span>

<span data-ttu-id="767bb-554">工作负荷的可能性是无限的。</span><span class="sxs-lookup"><span data-stu-id="767bb-554">The workload possibilities are endless.</span></span> <span data-ttu-id="767bb-555">以下是几种可能的工作负荷类型：</span><span class="sxs-lookup"><span data-stu-id="767bb-555">The following are just a few of the possible workload types:</span></span>

<span data-ttu-id="767bb-556">**内部业务线应用程序**是对企业的日常运营十分重要的计算机应用程序。</span><span class="sxs-lookup"><span data-stu-id="767bb-556">**Internal line-of-business applications** are computer applications critical to the ongoing operation of an enterprise.</span></span> <span data-ttu-id="767bb-557">业务线应用程序具有以下常见特征：</span><span class="sxs-lookup"><span data-stu-id="767bb-557">Line of business applications have some common characteristics:</span></span>

-   <span data-ttu-id="767bb-558">**交互性**。</span><span class="sxs-lookup"><span data-stu-id="767bb-558">**Interactive** by nature.</span></span> <span data-ttu-id="767bb-559">输入数据，然后返回结果或报告。</span><span class="sxs-lookup"><span data-stu-id="767bb-559">Data is entered, and results or reports are returned.</span></span>
-   <span data-ttu-id="767bb-560">**数据驱动** &mdash; 数据密集型应用程序，频繁访问数据库或其他存储。</span><span class="sxs-lookup"><span data-stu-id="767bb-560">**Data driven**&mdash;data intensive with frequent access to databases or other storage.</span></span>
-   <span data-ttu-id="767bb-561">**可集成** &mdash; 可与组织内外的其他系统集成。</span><span class="sxs-lookup"><span data-stu-id="767bb-561">**Integrated**&mdash;offer integration with other systems within or outside the organization.</span></span>

<span data-ttu-id="767bb-562">**面向客户的网站（面向 Internet 或内部）**。</span><span class="sxs-lookup"><span data-stu-id="767bb-562">**Customer-facing websites (internet or internal facing)**.</span></span> <span data-ttu-id="767bb-563">与 Internet 交互的大多数应用程序是网站。</span><span class="sxs-lookup"><span data-stu-id="767bb-563">Most applications that interact with the internet are websites.</span></span> <span data-ttu-id="767bb-564">Azure 提供在 IaaS VM 上或从 [Microsoft Azure 应用服务的 Web 应用功能][WebApps]站点 (PaaS) 运行网站的功能。</span><span class="sxs-lookup"><span data-stu-id="767bb-564">Azure offers the ability to run a website on an IaaS VM or from a [Web Apps feature of Microsoft Azure App Service][WebApps] site (PaaS).</span></span> <span data-ttu-id="767bb-565">Web 应用支持与允许在 VDC 的辐射中部署 Web 应用的虚拟网络集成。</span><span class="sxs-lookup"><span data-stu-id="767bb-565">Web Apps supports integration with virtual networks that allow the deployment of Web Apps in the spoke of the VDC.</span></span> <span data-ttu-id="767bb-566">以面向内部的网站为例，通过虚拟网络集成，便不需要向应用程序公开 Internet 终结点。</span><span class="sxs-lookup"><span data-stu-id="767bb-566">When looking at internal-facing websites, with virtual network integration, you don't need to expose an internet endpoint for your applications.</span></span> <span data-ttu-id="767bb-567">但可以改为从专用虚拟网络通过专用非 Internet 可路由地址来使用资源。</span><span class="sxs-lookup"><span data-stu-id="767bb-567">But you can use the resources via private non-internet routable addresses from your private virtual network instead.</span></span>

<span data-ttu-id="767bb-568">**大数据和分析**。</span><span class="sxs-lookup"><span data-stu-id="767bb-568">**Big data and analytics**.</span></span> <span data-ttu-id="767bb-569">当数据需要增加到较大的量时，数据库可能无法正常扩展。</span><span class="sxs-lookup"><span data-stu-id="767bb-569">When data needs to scale up to a large volume, databases might not scale up properly.</span></span> <span data-ttu-id="767bb-570">Apache Hadoop 技术提供可在大量节点上并行运行所分配查询的系统。</span><span class="sxs-lookup"><span data-stu-id="767bb-570">Apache Hadoop technology offers a system to run distributed queries in parallel on a large number of nodes.</span></span> <span data-ttu-id="767bb-571">客户可以在 IaaS VM、PaaS 或 [Azure HDInsight][HDI] 中运行数据工作负荷。</span><span class="sxs-lookup"><span data-stu-id="767bb-571">Customers can run data workloads in IaaS VMs or PaaS, [Azure HDInsight][HDI].</span></span> <span data-ttu-id="767bb-572">HDInsight 支持部署到基于位置的虚拟网络。</span><span class="sxs-lookup"><span data-stu-id="767bb-572">HDInsight supports deploying into a location-based virtual network.</span></span> <span data-ttu-id="767bb-573">可将它部署到 VDC 辐射中的群集。</span><span class="sxs-lookup"><span data-stu-id="767bb-573">It can be deployed to a cluster in a spoke of the VDC.</span></span>

<span data-ttu-id="767bb-574">**事件和消息传送**。</span><span class="sxs-lookup"><span data-stu-id="767bb-574">**Events and messaging**.</span></span> <span data-ttu-id="767bb-575">[Azure 事件中心][EventHubs]是超大规模的遥测引入服务，可收集、传输和存储数百万的事件。</span><span class="sxs-lookup"><span data-stu-id="767bb-575">[Azure Event Hubs][EventHubs] is a hyperscale telemetry-ingestion service that collects, transforms, and stores millions of events.</span></span> <span data-ttu-id="767bb-576">作为分布式流式处理平台，它提供低延迟和可配置的保留时间。</span><span class="sxs-lookup"><span data-stu-id="767bb-576">As a distributed streaming platform, it offers low latency and configurable time retention.</span></span> <span data-ttu-id="767bb-577">因此，可将大量遥测数据引入到 Azure 中，并从多个应用程序读取该数据。</span><span class="sxs-lookup"><span data-stu-id="767bb-577">So you can ingest massive amounts of telemetry into Azure and read that data from multiple applications.</span></span> <span data-ttu-id="767bb-578">通过事件中心，单个流可以同时支持实时管道和基于批处理的管道。</span><span class="sxs-lookup"><span data-stu-id="767bb-578">With Event Hubs, a single stream can support both real-time and batch-based pipelines.</span></span>

<span data-ttu-id="767bb-579">可以通过 [Azure 服务总线][ServiceBus]在应用程序与服务之间实施高度可靠的云消息传送服务。</span><span class="sxs-lookup"><span data-stu-id="767bb-579">You can implement a highly reliable cloud messaging service between applications and services through [Azure Service Bus][ServiceBus].</span></span> <span data-ttu-id="767bb-580">服务总线提供客户端与服务器之间的异步中转消息传送、结构化先进先出 (FIFO) 消息传送和发布/订阅功能。</span><span class="sxs-lookup"><span data-stu-id="767bb-580">It offers asynchronous brokered messaging between client and server, structured first-in-first-out (FIFO) messaging, and publish and subscribe capabilities.</span></span>

<span data-ttu-id="767bb-581">[![10]][10]</span><span class="sxs-lookup"><span data-stu-id="767bb-581">[![10]][10]</span></span>

### <a name="multiple-vdc-implementations"></a><span data-ttu-id="767bb-582">多个 VDC 实施方案</span><span class="sxs-lookup"><span data-stu-id="767bb-582">Multiple VDC implementations</span></span>


<span data-ttu-id="767bb-583">但是，单个 VDC 托管在单个区域中。</span><span class="sxs-lookup"><span data-stu-id="767bb-583">However, a single VDC is hosted within a single region.</span></span> <span data-ttu-id="767bb-584">它容易受到可能影响整个区域的重大服务中断的影响。</span><span class="sxs-lookup"><span data-stu-id="767bb-584">It's vulnerable to a major outage that might affect that entire region.</span></span> <span data-ttu-id="767bb-585">希望实现高 SLA 级别的客户需要通过在位于不同区域的两个或更多 VDC 实施方案中部署相同的项目来保护服务。</span><span class="sxs-lookup"><span data-stu-id="767bb-585">Customers that want to achieve high SLAs need to protect their services through deployments of the same project in two or more VDC implementations, placed in different regions.</span></span>

<span data-ttu-id="767bb-586">除了 SLA 问题之外，以下几种常见情形也适合部署多个 VDC 实施方案：</span><span class="sxs-lookup"><span data-stu-id="767bb-586">In addition to SLA concerns, there are several common scenarios where deploying multiple VDC implementations makes sense:</span></span>

-   <span data-ttu-id="767bb-587">区域或全球影响力。</span><span class="sxs-lookup"><span data-stu-id="767bb-587">Regional or global presence.</span></span>
-   <span data-ttu-id="767bb-588">灾难恢复。</span><span class="sxs-lookup"><span data-stu-id="767bb-588">Disaster recovery.</span></span>
-   <span data-ttu-id="767bb-589">在数据中心之间转移流量的机制。</span><span class="sxs-lookup"><span data-stu-id="767bb-589">A mechanism to divert traffic between datacenters.</span></span>

#### <a name="regional-and-global-presence"></a><span data-ttu-id="767bb-590">区域和全球影响力</span><span class="sxs-lookup"><span data-stu-id="767bb-590">Regional and global presence</span></span>
<span data-ttu-id="767bb-591">Azure 数据中心遍布全球多个区域。</span><span class="sxs-lookup"><span data-stu-id="767bb-591">Azure datacenters are present in many regions worldwide.</span></span> <span data-ttu-id="767bb-592">选择多个 Azure 数据中心时，客户需要考虑两个相关因素：地理距离和延迟。</span><span class="sxs-lookup"><span data-stu-id="767bb-592">When they select multiple Azure datacenters, customers need to consider two related factors: geographical distances and latency.</span></span> <span data-ttu-id="767bb-593">若要提供最佳用户体验，客户需要评估 VDC 实施方案之间的地理距离，以及 VDC 实施方案与最终用户之间的距离。</span><span class="sxs-lookup"><span data-stu-id="767bb-593">To offer the best user experience, customers need to evaluate the geographical distance between the VDC implementations and the distance between the VDC implementations and the end users.</span></span>

<span data-ttu-id="767bb-594">托管 VDC 实施方案的 Azure 区域也需要符合由所在组织所属的任何法律管辖区域制定的法规要求。</span><span class="sxs-lookup"><span data-stu-id="767bb-594">The Azure region where VDC implementations are hosted also needs to conform with regulatory requirements established by any legal jurisdiction under which your organization operates.</span></span>

#### <a name="disaster-recovery"></a><span data-ttu-id="767bb-595">灾难恢复</span><span class="sxs-lookup"><span data-stu-id="767bb-595">Disaster recovery</span></span>
<span data-ttu-id="767bb-596">灾难恢复计划的实现与所涉及的工作负荷类型以及同步不同 VDC 实施方案之间工作负荷状态的能力相关。</span><span class="sxs-lookup"><span data-stu-id="767bb-596">The implementation of a disaster recovery plan is related to the type of workload concerned and the ability to synchronize the workload state between different VDC implementations.</span></span> <span data-ttu-id="767bb-597">理想情况下，大多数客户希望同步在两个不同 VDC 实施方案中运行的部署之间的应用程序数据，从而快速实现故障转移机制。</span><span class="sxs-lookup"><span data-stu-id="767bb-597">Ideally, most customers want to synchronize application data between deployments that run in two different VDC implementations to implement a fast fail-over mechanism.</span></span> <span data-ttu-id="767bb-598">大多数应用程序易受延迟影响，这可能在数据同步时导致潜在超时和延迟。</span><span class="sxs-lookup"><span data-stu-id="767bb-598">Most applications are sensitive to latency, and that can cause potential timeout and delay in data synchronization.</span></span>

<span data-ttu-id="767bb-599">对不同 VDC 实施方案中应用程序的同步性和检测信号的监视需要在不同 VDC 实施方案之间建立通信。</span><span class="sxs-lookup"><span data-stu-id="767bb-599">Synchronization or heartbeat monitoring of applications in different VDC implementations requires communication between them.</span></span> <span data-ttu-id="767bb-600">可通过以下方式连接不同区域中的两个 VDC 实施方案：</span><span class="sxs-lookup"><span data-stu-id="767bb-600">Two VDC implementations in different regions can be connected as follows:</span></span>

-   <span data-ttu-id="767bb-601">虚拟网络对等互连可跨区域连接多个中心。</span><span class="sxs-lookup"><span data-stu-id="767bb-601">Virtual network peering can connect hubs across regions.</span></span>
-   <span data-ttu-id="767bb-602">当 VDC 中心连接到同一 ExpressRoute 线路时使用 ExpressRoute 专用对等互连。</span><span class="sxs-lookup"><span data-stu-id="767bb-602">ExpressRoute private peering when the VDC hubs are connected to the same ExpressRoute circuit.</span></span>
-   <span data-ttu-id="767bb-603">通过企业主干和连接到 ExpressRoute 线路的 VDC 对等网格连接多个 ExpressRoute 线路。</span><span class="sxs-lookup"><span data-stu-id="767bb-603">Multiple ExpressRoute circuits connected via your corporate backbone and your VDC mesh connected to the ExpressRoute circuits.</span></span>
-   <span data-ttu-id="767bb-604">在每个 Azure 区域中的 VDC 中心建立站点到站点 VPN 连接。</span><span class="sxs-lookup"><span data-stu-id="767bb-604">Site-to-site VPN connections between your VDC hubs in each Azure region.</span></span>

<span data-ttu-id="767bb-605">通常情况下，虚拟网络对等互连或 ExpressRoute 连接是首选机制，因为通过 Microsoft 主干传输时具有更高的带宽和一致性延迟。</span><span class="sxs-lookup"><span data-stu-id="767bb-605">Usually, virtual network peering or ExpressRoute connections are the preferred mechanism because of higher bandwidth and consistent latency when transiting through the Microsoft backbone.</span></span>

<span data-ttu-id="767bb-606">没有魔法秘诀来验证在不同区域中的两个或更多个不同 VDC 实施方案之间分配的应用程序。</span><span class="sxs-lookup"><span data-stu-id="767bb-606">There's no magic recipe to validate an application distributed between two or more different VDC implementations located in different regions.</span></span> <span data-ttu-id="767bb-607">客户应通过运行网络资格测试来验证连接的延迟和带宽。</span><span class="sxs-lookup"><span data-stu-id="767bb-607">Customers should run network qualification tests to verify the latency and bandwidth of the connections.</span></span> <span data-ttu-id="767bb-608">然后检查同步或异步数据复制是否合适，并确定工作负荷的最佳恢复时间目标 (RTO)。</span><span class="sxs-lookup"><span data-stu-id="767bb-608">Then target whether synchronous or asynchronous data replication is appropriate and what the optimal recovery time objective (RTO) can be for your workloads.</span></span>

#### <a name="mechanism-to-divert-traffic-between-datacenters"></a><span data-ttu-id="767bb-609">在数据中心之间转移流量的机制</span><span class="sxs-lookup"><span data-stu-id="767bb-609">Mechanism to divert traffic between datacenters</span></span>
<span data-ttu-id="767bb-610">将传入一个数据中心的流量转移到另一个数据中心的有效方法是基于域名系统 (DNS)。</span><span class="sxs-lookup"><span data-stu-id="767bb-610">One effective technique to divert the traffic incoming in one datacenter to another is based on the Domain Name System (DNS).</span></span> <span data-ttu-id="767bb-611">[Azure 流量管理器][TM]使用 DNS 机制将最终用户的流量转移到特定 VDC 中最合适的公共终结点。</span><span class="sxs-lookup"><span data-stu-id="767bb-611">[Azure Traffic Manager][TM] uses the DNS mechanism to direct end-user traffic to the most appropriate public endpoint in a specific VDC.</span></span> <span data-ttu-id="767bb-612">通过探测，流量管理器可以定期检查不同 VDC 实施方案中公共终结点的服务运行状况。</span><span class="sxs-lookup"><span data-stu-id="767bb-612">Through probes, Traffic Manager periodically checks the service health of public endpoints in different VDC implementations.</span></span> <span data-ttu-id="767bb-613">如果这些终结点出现故障，流量管理器会将自动将流量路由到辅助 VDC。</span><span class="sxs-lookup"><span data-stu-id="767bb-613">If those endpoints fail, it routes automatically to the secondary VDC.</span></span>

<span data-ttu-id="767bb-614">流量管理器适用于 Azure 公共终结点。</span><span class="sxs-lookup"><span data-stu-id="767bb-614">Traffic Manager works on Azure public endpoints.</span></span> <span data-ttu-id="767bb-615">例如，它可以控制流量，或将流量转移到合适的 VDC 中的 Azure VM 和 Web 应用。</span><span class="sxs-lookup"><span data-stu-id="767bb-615">For example, it can control or divert traffic to Azure VMs and Web Apps in the appropriate VDC.</span></span> <span data-ttu-id="767bb-616">即使整个 Azure 区域出现故障，流量管理器也能复原。</span><span class="sxs-lookup"><span data-stu-id="767bb-616">Traffic Manager is resilient even in the face of an entire Azure region failing.</span></span> <span data-ttu-id="767bb-617">它可以基于多个标准控制不同 VDC 实施方案中服务终结点的用户流量分配。</span><span class="sxs-lookup"><span data-stu-id="767bb-617">It can control the distribution of user traffic for service endpoints in different VDC implementations based on several criteria.</span></span> <span data-ttu-id="767bb-618">例如，特定 VDC 中出现服务故障时，或选择客户端网络延迟最低的 VDC 时。</span><span class="sxs-lookup"><span data-stu-id="767bb-618">Examples are service failure in a specific VDC or selecting the VDC with the lowest network latency for the client.</span></span>

### <a name="conclusion"></a><span data-ttu-id="767bb-619">结束语</span><span class="sxs-lookup"><span data-stu-id="767bb-619">Conclusion</span></span>
<span data-ttu-id="767bb-620">虚拟数据中心是使用一系列特性和功能将数据中心迁移到云的方法，可在 Azure 中创建可缩放的体系结构。</span><span class="sxs-lookup"><span data-stu-id="767bb-620">The virtual datacenter is an approach to datacenter migration into the cloud that uses a combination of features and capabilities to create a scalable architecture in Azure.</span></span> <span data-ttu-id="767bb-621">它可以最大程度地利用云资源、降低成本和简化系统管理。</span><span class="sxs-lookup"><span data-stu-id="767bb-621">It maximizes cloud resource use, reduces costs, and simplifies system governance.</span></span> <span data-ttu-id="767bb-622">VDC 的概念基于在中心提供通用共享服务的中心辐射型拓扑。</span><span class="sxs-lookup"><span data-stu-id="767bb-622">The VDC concept is based on a hub-spokes topology that provides common shared services in the hub.</span></span> <span data-ttu-id="767bb-623">它允许辐射中存在特定的应用程序或工作负荷。</span><span class="sxs-lookup"><span data-stu-id="767bb-623">It allows specific applications or workloads in the spokes.</span></span> <span data-ttu-id="767bb-624">VDC 与公司角色的结构相匹配，在该结构中，不同部门共同合作。</span><span class="sxs-lookup"><span data-stu-id="767bb-624">The VDC matches the structure of company roles, where different departments work together.</span></span> <span data-ttu-id="767bb-625">例如，中心 IT、Azure DevOps、运营和维护部门。</span><span class="sxs-lookup"><span data-stu-id="767bb-625">Examples are the central IT, Azure DevOps, and operations and maintenance.</span></span> <span data-ttu-id="767bb-626">每个部门具有特定的角色和职责。</span><span class="sxs-lookup"><span data-stu-id="767bb-626">Each department has a specific list of roles and duties.</span></span> <span data-ttu-id="767bb-627">VDC 的概念符合“直接迁移”的要求。</span><span class="sxs-lookup"><span data-stu-id="767bb-627">The VDC concept satisfies the requirements for a **lift and shift** migration.</span></span> <span data-ttu-id="767bb-628">但是，它还为本机云部署提供众多优势。</span><span class="sxs-lookup"><span data-stu-id="767bb-628">But it also provides many advantages to native cloud deployments.</span></span>

## <a name="references"></a><span data-ttu-id="767bb-629">参考</span><span class="sxs-lookup"><span data-stu-id="767bb-629">References</span></span>
<span data-ttu-id="767bb-630">详细了解本文中所述的以下功能：</span><span class="sxs-lookup"><span data-stu-id="767bb-630">Learn more about the following features discussed in this article:</span></span>

| | | |
|-|-|-|
|<span data-ttu-id="767bb-631">网络功能</span><span class="sxs-lookup"><span data-stu-id="767bb-631">Network features</span></span>|<span data-ttu-id="767bb-632">负载均衡</span><span class="sxs-lookup"><span data-stu-id="767bb-632">Load balancing</span></span>|<span data-ttu-id="767bb-633">连接</span><span class="sxs-lookup"><span data-stu-id="767bb-633">Connectivity</span></span>|
|<span data-ttu-id="767bb-634">[Azure 虚拟网络][VNet]</span><span class="sxs-lookup"><span data-stu-id="767bb-634">[Azure Virtual Network][VNet]</span></span></br><span data-ttu-id="767bb-635">[网络安全组][NSG]</span><span class="sxs-lookup"><span data-stu-id="767bb-635">[Network security groups][NSG]</span></span></br><span data-ttu-id="767bb-636">[NSG 日志][NSGLog]</span><span class="sxs-lookup"><span data-stu-id="767bb-636">[NSG logs][NSGLog]</span></span></br><span data-ttu-id="767bb-637">[用户定义的路由][UDR]</span><span class="sxs-lookup"><span data-stu-id="767bb-637">[User-defined routes][UDR]</span></span></br><span data-ttu-id="767bb-638">[网络虚拟设备][NVA]</span><span class="sxs-lookup"><span data-stu-id="767bb-638">[Network virtual appliances][NVA]</span></span></br><span data-ttu-id="767bb-639">[公共 IP 地址][PIP]</span><span class="sxs-lookup"><span data-stu-id="767bb-639">[Public IP addresses][PIP]</span></span></br><span data-ttu-id="767bb-640">[Azure DDoS 防护][DDOS]</span><span class="sxs-lookup"><span data-stu-id="767bb-640">[Azure DDoS Protection][DDOS]</span></span></br><span data-ttu-id="767bb-641">[Azure 防火墙][AzFW]</span><span class="sxs-lookup"><span data-stu-id="767bb-641">[Azure Firewall][AzFW]</span></span></br><span data-ttu-id="767bb-642">[Azure DNS][DNS]</span><span class="sxs-lookup"><span data-stu-id="767bb-642">[Azure DNS][DNS]</span></span>|<span data-ttu-id="767bb-643">[Azure Front Door][AFD]</span><span class="sxs-lookup"><span data-stu-id="767bb-643">[Azure Front Door][AFD]</span></span></br><span data-ttu-id="767bb-644">[Azure 负载均衡器 (L3)][ALB]</span><span class="sxs-lookup"><span data-stu-id="767bb-644">[Azure Load Balancer (L3)][ALB]</span></span></br><span data-ttu-id="767bb-645">[应用程序网关 (L7)][AppGW]</span><span class="sxs-lookup"><span data-stu-id="767bb-645">[Application Gateway (L7)][AppGW]</span></span></br><span data-ttu-id="767bb-646">[Web 应用程序防火墙][WAF]</span><span class="sxs-lookup"><span data-stu-id="767bb-646">[Web application firewall][WAF]</span></span></br><span data-ttu-id="767bb-647">[Azure 流量管理器][TM]</span><span class="sxs-lookup"><span data-stu-id="767bb-647">[Azure Traffic Manager][TM]</span></span></br></br></br></br></br> |<span data-ttu-id="767bb-648">[虚拟网络对等互连][VNetPeering]</span><span class="sxs-lookup"><span data-stu-id="767bb-648">[Virtual network peering][VNetPeering]</span></span></br><span data-ttu-id="767bb-649">[虚拟专用网络][VPN]</span><span class="sxs-lookup"><span data-stu-id="767bb-649">[Virtual private network][VPN]</span></span></br><span data-ttu-id="767bb-650">[虚拟 WAN][vWAN]</span><span class="sxs-lookup"><span data-stu-id="767bb-650">[Virtual WAN][vWAN]</span></span></br><span data-ttu-id="767bb-651">[ExpressRoute][ExR]</span><span class="sxs-lookup"><span data-stu-id="767bb-651">[ExpressRoute][ExR]</span></span></br><span data-ttu-id="767bb-652">[ExpressRoute Direct][ExRD]</span><span class="sxs-lookup"><span data-stu-id="767bb-652">[ExpressRoute Direct][ExRD]</span></span></br></br></br></br></br>
|<span data-ttu-id="767bb-653">标识</span><span class="sxs-lookup"><span data-stu-id="767bb-653">Identity</span></span></br>|<span data-ttu-id="767bb-654">监视</span><span class="sxs-lookup"><span data-stu-id="767bb-654">Monitoring</span></span></br>|<span data-ttu-id="767bb-655">最佳做法</span><span class="sxs-lookup"><span data-stu-id="767bb-655">Best practices</span></span></br>|
|<span data-ttu-id="767bb-656">[Azure Active Directory][AAD]</span><span class="sxs-lookup"><span data-stu-id="767bb-656">[Azure Active Directory][AAD]</span></span></br><span data-ttu-id="767bb-657">[多重身份验证][MFA]</span><span class="sxs-lookup"><span data-stu-id="767bb-657">[Multi-Factor Authentication][MFA]</span></span></br><span data-ttu-id="767bb-658">[基于角色的访问控制][RBAC]</span><span class="sxs-lookup"><span data-stu-id="767bb-658">[Role-based access control][RBAC]</span></span></br><span data-ttu-id="767bb-659">[默认 Azure AD 角色][Roles]</span><span class="sxs-lookup"><span data-stu-id="767bb-659">[Default Azure AD roles][Roles]</span></span></br></br></br> |<span data-ttu-id="767bb-660">[网络观察程序][NetWatch]</span><span class="sxs-lookup"><span data-stu-id="767bb-660">[Network Watcher][NetWatch]</span></span></br><span data-ttu-id="767bb-661">[Azure Monitor][Monitor]</span><span class="sxs-lookup"><span data-stu-id="767bb-661">[Azure Monitor][Monitor]</span></span></br><span data-ttu-id="767bb-662">[活动日志][ActLog]</span><span class="sxs-lookup"><span data-stu-id="767bb-662">[Activity Log][ActLog]</span></span></br><span data-ttu-id="767bb-663">[监视诊断日志][DiagLog]</span><span class="sxs-lookup"><span data-stu-id="767bb-663">[Monitor diagnostic logs][DiagLog]</span></span></br><span data-ttu-id="767bb-664">[Microsoft Operations Management Suite][OMS]</span><span class="sxs-lookup"><span data-stu-id="767bb-664">[Microsoft Operations Management Suite][OMS]</span></span></br><span data-ttu-id="767bb-665">[网络性能监视器][NPM]</span><span class="sxs-lookup"><span data-stu-id="767bb-665">[Network Performance Monitor][NPM]</span></span>|<span data-ttu-id="767bb-666">[外围网络最佳做法][DMZ]</span><span class="sxs-lookup"><span data-stu-id="767bb-666">[Perimeter network best practices][DMZ]</span></span></br><span data-ttu-id="767bb-667">[订阅管理][SubMgmt]</span><span class="sxs-lookup"><span data-stu-id="767bb-667">[Subscription management][SubMgmt]</span></span></br><span data-ttu-id="767bb-668">[资源组管理][RGMgmt]</span><span class="sxs-lookup"><span data-stu-id="767bb-668">[Resource group management][RGMgmt]</span></span></br><span data-ttu-id="767bb-669">[Azure 订阅限制][Limits]</span><span class="sxs-lookup"><span data-stu-id="767bb-669">[Azure subscription limits][Limits]</span></span> </br></br></br>|
|<span data-ttu-id="767bb-670">其他 Azure 服务</span><span class="sxs-lookup"><span data-stu-id="767bb-670">Other Azure services</span></span>|
|<span data-ttu-id="767bb-671">[Web 应用][WebApps]</span><span class="sxs-lookup"><span data-stu-id="767bb-671">[Web Apps][WebApps]</span></span></br><span data-ttu-id="767bb-672">[HDInsight (Hadoop)][HDI]</span><span class="sxs-lookup"><span data-stu-id="767bb-672">[HDInsight (Hadoop)][HDI]</span></span></br><span data-ttu-id="767bb-673">[事件中心][EventHubs]</span><span class="sxs-lookup"><span data-stu-id="767bb-673">[Event Hubs][EventHubs]</span></span></br><span data-ttu-id="767bb-674">[服务总线][ServiceBus]</span><span class="sxs-lookup"><span data-stu-id="767bb-674">[Service Bus][ServiceBus]</span></span>|

## <a name="next-steps"></a><span data-ttu-id="767bb-675">后续步骤</span><span class="sxs-lookup"><span data-stu-id="767bb-675">Next steps</span></span>
 - <span data-ttu-id="767bb-676">探索[虚拟网络对等互连][VNetPeering]，这是 VDC 中心辐射型设计的基础技术。</span><span class="sxs-lookup"><span data-stu-id="767bb-676">Explore [virtual network peering][VNetPeering], the underpinning technology for VDC hub and spoke designs.</span></span>
 - <span data-ttu-id="767bb-677">实施 [Azure AD][AAD] 以开始探索 [RBAC][RBAC]。</span><span class="sxs-lookup"><span data-stu-id="767bb-677">Implement [Azure AD][AAD] to get started with [RBAC][RBAC] exploration.</span></span>
 - <span data-ttu-id="767bb-678">根据所在组织的结构、要求和策略开发订阅与资源管理模型和 RBAC 模型。</span><span class="sxs-lookup"><span data-stu-id="767bb-678">Develop a subscription and resource management model and an RBAC model to meet the structure, requirements, and policies of your organization.</span></span> <span data-ttu-id="767bb-679">最重要的活动是计划。</span><span class="sxs-lookup"><span data-stu-id="767bb-679">The most important activity is planning.</span></span> <span data-ttu-id="767bb-680">针对重组、合并、新产品线和其他情况，做出尽可能切合实际的规划。</span><span class="sxs-lookup"><span data-stu-id="767bb-680">As much as practical, plan for reorganizations, mergers, new product lines, and other possibilities.</span></span>

<!--Image References-->
[0]: ./images/networking-redundant-equipment.png "组件重叠示例" 
[1]: ./images/networking-vdc-high-level.png "中心辐射型 VDC 的概要示例"
[2]: ./images/networking-hub-spokes-cluster.png "中心辐射型群集"
[3]: ./images/networking-spoke-to-spoke.png "辐射到辐射"
[4]: ./images/networking-vdc-block-level-diagram.png "VDC 的块级关系图"
[5]: ./images/networking-users-groups-subsciptions.png "用户、组、订阅和项目"
[6]: ./images/networking-infrastructure-high-level.png "高级别基础结构关系图"
[7]: ./images/networking-highlevel-perimeter-networks.png "高级别基础结构关系图"
[8]: ./images/networking-vnet-peering-perimeter-neworks.png "VNet 对等互连和外围网络"
[9]: ./images/networking-high-level-diagram-monitoring.png "用于监视的高级别关系图"
[10]: ./images/networking-high-level-workloads.png "用于工作负荷的高级别关系图"

<!--Link References-->
[Limits]: /azure/azure-subscription-service-limits
[Roles]: /azure/role-based-access-control/built-in-roles
[VNet]: /azure/virtual-network/virtual-networks-overview
[NSG]: /azure/virtual-network/virtual-networks-nsg
[DNS]: /azure/dns/dns-overview
[PrivateDNS]: /azure/dns/private-dns-overview
[VNetPeering]: /azure/virtual-network/virtual-network-peering-overview 
[UDR]: /azure/virtual-network/virtual-networks-udr-overview 
[RBAC]: /azure/role-based-access-control/overview
[MFA]: /azure/multi-factor-authentication/multi-factor-authentication
[AAD]: /azure/active-directory/active-directory-whatis
[VPN]: /azure/vpn-gateway/vpn-gateway-about-vpngateways 
[ExR]: /azure/expressroute/expressroute-introduction
[ExRD]: https://docs.microsoft.com/en-us/azure/expressroute/expressroute-erdirect-about
[vWAN]: /azure/virtual-wan/virtual-wan-about
[NVA]: /azure/architecture/reference-architectures/dmz/nva-ha
[AzFW]: /azure/firewall/overview
[SubMgmt]: /azure/architecture/cloud-adoption/appendix/azure-scaffold 
[RGMgmt]: /azure/azure-resource-manager/resource-group-overview
[DMZ]: /azure/best-practices-network-security
[ALB]: /azure/load-balancer/load-balancer-overview
[DDOS]: /azure/virtual-network/ddos-protection-overview
[PIP]: /azure/virtual-network/resource-groups-networking#public-ip-address
[AFD]: https://docs.microsoft.com/en-us/azure/frontdoor/front-door-overview
[AppGW]: /azure/application-gateway/application-gateway-introduction
[WAF]: /azure/application-gateway/application-gateway-web-application-firewall-overview
[Monitor]: /azure/monitoring-and-diagnostics/
[ActLog]: /azure/monitoring-and-diagnostics/monitoring-overview-activity-logs 
[DiagLog]: /azure/monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs
[NSGLog]: /azure/virtual-network/virtual-network-nsg-manage-log
[OMS]: /azure/operations-management-suite/operations-management-suite-overview
[NPM]: /azure/log-analytics/log-analytics-network-performance-monitor
[NetWatch]: /azure/network-watcher/network-watcher-monitoring-overview
[WebApps]: /azure/app-service/
[HDI]: /azure/hdinsight/hdinsight-hadoop-introduction
[EventHubs]: /azure/event-hubs/event-hubs-what-is-event-hubs 
[ServiceBus]: /azure/service-bus-messaging/service-bus-messaging-overview
[TM]: /azure/traffic-manager/traffic-manager-overview

