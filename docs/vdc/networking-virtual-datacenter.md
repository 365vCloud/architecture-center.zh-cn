---
title: Azure 虚拟数据中心 - 网络透视图
description: 了解如何在 Azure 中生成虚拟数据中心
author: tracsman
manager: rossort
tags: azure-resource-manager
ms.service: virtual-network
ms.date: 04/3/2018
ms.author: jonor
ms.openlocfilehash: 34fab47cef6d5a9c0130f0864e9fdef33357ba25
ms.sourcegitcommit: ae8a1de6f4af7a89a66a8339879843d945201f85
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/31/2018
ms.locfileid: "43325472"
---
# <a name="azure-virtual-datacenter-a-network-perspective"></a><span data-ttu-id="7382b-103">Azure 虚拟数据中心：网络透视图</span><span class="sxs-lookup"><span data-stu-id="7382b-103">Azure Virtual Datacenter: A network perspective</span></span>

## <a name="overview"></a><span data-ttu-id="7382b-104">概述</span><span class="sxs-lookup"><span data-stu-id="7382b-104">Overview</span></span>
<span data-ttu-id="7382b-105">将本地应用程序迁移到 Azure（即使是不做任何重大更改的“直接迁移”）可为组织提供安全而具成本效益的基础结构，使组织从中受益。</span><span class="sxs-lookup"><span data-stu-id="7382b-105">Migrating on-premises applications to Azure, even without any significant changes (an approach known as “lift and shift”), provides organizations the benefits of a secured and cost-efficient infrastructure.</span></span> <span data-ttu-id="7382b-106">但是，若要充分利用云计算的灵活性，企业应提升体系结构，充分利用 Azure 的功能。</span><span class="sxs-lookup"><span data-stu-id="7382b-106">However, to make the most of the agility possible with cloud computing, enterprises should evolve their architectures to take advantage of Azure capabilities.</span></span> <span data-ttu-id="7382b-107">Microsoft Azure 提供超大规模的服务和基础结构、企业级的功能和可靠性以及许多混合连接选项。</span><span class="sxs-lookup"><span data-stu-id="7382b-107">Microsoft Azure delivers hyper-scale services and infrastructure, enterprise-grade capabilities and reliability, and many choices for hybrid connectivity.</span></span> <span data-ttu-id="7382b-108">客户可以选择通过 Internet 或 Azure ExpressRoute（提供专用网络连接）访问这些云服务。</span><span class="sxs-lookup"><span data-stu-id="7382b-108">Customers can choose to access these cloud services either via the Internet or with Azure ExpressRoute, which provides private network connectivity.</span></span> <span data-ttu-id="7382b-109">Microsoft Azure 平台可让客户无缝地将基础结构扩展到云中并构建多层体系结构。</span><span class="sxs-lookup"><span data-stu-id="7382b-109">The Microsoft Azure platform allows customers to seamlessly extend their infrastructure into the cloud and build multi-tier architectures.</span></span> <span data-ttu-id="7382b-110">此外，Microsoft 合作伙伴还可以通过提供在 Azure 中运行的优化安全服务和虚拟设备实现增强型功能。</span><span class="sxs-lookup"><span data-stu-id="7382b-110">Additionally, Microsoft partners provide enhanced capabilities by offering security services and virtual appliances that are optimized to run in Azure.</span></span>

<span data-ttu-id="7382b-111">许多客户在考虑将全部内容迁移到云时都会担心结构规模、性能和安全问题，本文概述了可用于解决这些问题的模式和设计。</span><span class="sxs-lookup"><span data-stu-id="7382b-111">This article provides an overview of patterns and designs that can be used to solve the architectural scale, performance, and security concerns many customers face when thinking about moving en masse to the cloud.</span></span> <span data-ttu-id="7382b-112">本文还概述了如何使不同的 IT 组织角色适应系统的管理和监管，同时强调了安全要求和成本优化。</span><span class="sxs-lookup"><span data-stu-id="7382b-112">An overview of how to fit different organizational IT roles into the management and governance of the system is also discussed, with emphasis to security requirements and cost optimization.</span></span>

## <a name="what-is-a-virtual-data-center"></a><span data-ttu-id="7382b-113">什么是虚拟数据中心？</span><span class="sxs-lookup"><span data-stu-id="7382b-113">What is a Virtual Data Center?</span></span>
<span data-ttu-id="7382b-114">早期的云解决方案旨在托管相对独立的单个应用程序，主要涉及公共范畴。</span><span class="sxs-lookup"><span data-stu-id="7382b-114">In the early days, cloud solutions were designed to host single, relatively isolated, applications, in the public spectrum.</span></span> <span data-ttu-id="7382b-115">此方法在刚开始的几年富有成效。</span><span class="sxs-lookup"><span data-stu-id="7382b-115">This approach worked well for a few years.</span></span> <span data-ttu-id="7382b-116">然而，随着云解决方案的优势日益明显并且云上托管的大规模工作负荷越来越多，解决在一个或多个区域进行部署的安全性、可靠性、性能和成本问题成为重中之重，这项任务贯穿了云服务的整个生命周期。</span><span class="sxs-lookup"><span data-stu-id="7382b-116">However, as the benefits of cloud solutions became apparent and multiple large-scale workloads were hosted on the cloud, addressing security, reliability, performance, and cost concerns of deployments in one or more regions became vital throughout the life cycle of the cloud service.</span></span>

<span data-ttu-id="7382b-117">以下云部署关系图展示了关于跨工作负荷优化虚拟网络设备的安全隐患（红盒子）和空间（黄盒子）的一些示例。</span><span class="sxs-lookup"><span data-stu-id="7382b-117">The following cloud deployment diagram illustrates some examples of security gaps (red box) and room for optimization network virtual appliances across workloads (yellow box).</span></span>

<span data-ttu-id="7382b-118">[![0]][0]</span><span class="sxs-lookup"><span data-stu-id="7382b-118">[![0]][0]</span></span>

<span data-ttu-id="7382b-119">支持企业工作负荷要求能够进行缩放，并且需要处理在公有云中支持大规模应用程序时遇到的问题，正因这两点，虚拟数据中心 (VDC) 应运而生。</span><span class="sxs-lookup"><span data-stu-id="7382b-119">The Virtual Data Center (VDC) was born from this necessity for scaling to support enterprise workloads, and the need to deal with the problems introduced when supporting large-scale applications in the public cloud.</span></span>

<span data-ttu-id="7382b-120">VDC 不仅只是云中的应用程序工作负荷，也是网络、安全、管理和基础结构（如 DNS 和目录服务）。</span><span class="sxs-lookup"><span data-stu-id="7382b-120">A VDC is not just the application workloads in the cloud, but also the network, security, management, and infrastructure (for example, DNS and Directory Services).</span></span> <span data-ttu-id="7382b-121">它通常还提供可返回本地网络或数据中心的专用连接。</span><span class="sxs-lookup"><span data-stu-id="7382b-121">It usually also provides a private connection back to an on-premises network or data center.</span></span> <span data-ttu-id="7382b-122">随着越来越多的工作负荷迁移到 Azure，必须考虑放置这些工作负荷的支持基础结构和对象。</span><span class="sxs-lookup"><span data-stu-id="7382b-122">As more and more workloads move to Azure, it is important to think about the supporting infrastructure and objects that these workloads are placed in.</span></span> <span data-ttu-id="7382b-123">认真考虑如何结构化资源可以避免激增成百上千的“工作负荷集群”（这种工作负荷集群必须通过独立数据流、安全模型和符合性质询单独管理）。</span><span class="sxs-lookup"><span data-stu-id="7382b-123">Thinking carefully about how resources are structured can avoid the proliferation of hundreds of "workload islands" that must be managed separately with independent data flow, security models, and compliance challenges.</span></span>

<span data-ttu-id="7382b-124">虚拟数据中心本质上是一系列独立但相关的实体集合，这些实体拥有共同的支持函数、功能和基础结构。</span><span class="sxs-lookup"><span data-stu-id="7382b-124">A Virtual Data Center is essentially a collection of separate but related entities with common supporting functions, features, and infrastructure.</span></span> <span data-ttu-id="7382b-125">将工作负荷视作集成型 VDC 可以实现组件和数据流的集中化，获得规模效益和更优的安全性，降低成本，同时简化操作、管理和符合性审核。</span><span class="sxs-lookup"><span data-stu-id="7382b-125">By viewing your workloads as an integrated VDC, you can realize reduced cost due to economies of scale, optimized security through component and data flow centralization, along with easier operations, management, and compliance audits.</span></span>

> [!NOTE]
> <span data-ttu-id="7382b-126">必须认识到 VDC **不是**一款离散的 Azure 产品，而是能够满足确切需求的多项特性和功能的组合。</span><span class="sxs-lookup"><span data-stu-id="7382b-126">It's important to understand that the VDC is **NOT** a discrete Azure product, but the combination of various features and capabilities to  meet your exact requirements.</span></span> <span data-ttu-id="7382b-127">考虑工作负荷的托管时，条件反射的是 VDC，Azure 使用它在云中实现资源和能力的最大化。</span><span class="sxs-lookup"><span data-stu-id="7382b-127">VDC is a way of thinking about your workloads and Azure usage to maximize your resources and abilities in the cloud.</span></span> <span data-ttu-id="7382b-128">因此，虚拟 DC 是尊重组织角色和责任在 Azure 中建立 IT 服务的模块化方法。</span><span class="sxs-lookup"><span data-stu-id="7382b-128">The virtual DC is therefore a modular approach on how to build up IT services in the Azure, respecting organizational roles and responsibilities.</span></span>

<span data-ttu-id="7382b-129">在以下情形下，VDC 可帮助企业将工作负荷和应用程序迁移到 Azure：</span><span class="sxs-lookup"><span data-stu-id="7382b-129">The VDC can help enterprises get workloads and applications into Azure for the following scenarios:</span></span>

-   <span data-ttu-id="7382b-130">托管多个相关工作负荷</span><span class="sxs-lookup"><span data-stu-id="7382b-130">Hosting multiple related workloads</span></span>
-   <span data-ttu-id="7382b-131">将工作负荷从本地环境迁移到 Azure</span><span class="sxs-lookup"><span data-stu-id="7382b-131">Migrating workloads from an on-premises environment to Azure</span></span>
-   <span data-ttu-id="7382b-132">跨工作负荷实现共享化或中心化的安全性和访问需求</span><span class="sxs-lookup"><span data-stu-id="7382b-132">Implementing shared or centralized security and access requirements across workloads</span></span>
-   <span data-ttu-id="7382b-133">为大型企业适当混合 DevOps 和中心化 IT</span><span class="sxs-lookup"><span data-stu-id="7382b-133">Mixing DevOps and Centralized IT appropriately for a large enterprise</span></span>

<span data-ttu-id="7382b-134">解锁 VDC 优势的关键在于中心化拓扑（中心辐射型）和多项 Azure 功能的混合：[Azure VNet][VNet]、[NSG][NSG]、[VNet 对等互连][VNetPeering]、[用户定义的路由 (UDR)][UDR] 以及具有[基于角色的访问控制 (RBAC)][RBAC] 的 Azure 标识。</span><span class="sxs-lookup"><span data-stu-id="7382b-134">The key to unlock the advantages of VDC, is a centralized topology (hub and spokes) with a mix of Azure features: [Azure VNet][VNet], [NSGs][NSG], [VNet Peering][VNetPeering], [User-Defined Routes (UDR)][UDR], and Azure Identity with [Role Base Access Control (RBAC)][RBAC].</span></span>

## <a name="who-needs-a-virtual-data-center"></a><span data-ttu-id="7382b-135">谁需要虚拟数据中心？</span><span class="sxs-lookup"><span data-stu-id="7382b-135">Who Needs a Virtual Data Center?</span></span>
<span data-ttu-id="7382b-136">需要将多个工作负荷迁移到 Azure 的任何 Azure 客户都可以考虑使用公共资源并从中受益。</span><span class="sxs-lookup"><span data-stu-id="7382b-136">Any Azure customer that needs to move more than a couple of workloads into Azure can benefit from thinking about using common resources.</span></span> <span data-ttu-id="7382b-137">根据数量级，即使单个应用程序也可从使用用于生成 VDC 的模式和组件受益。</span><span class="sxs-lookup"><span data-stu-id="7382b-137">Depending on the magnitude, even single applications can benefit from using the patterns and components used to build a VDC.</span></span>

<span data-ttu-id="7382b-138">如果组织具备中心化 IT、网络、安全性和/或符合性团队/部门，VDC 可以帮助实施策略点和责任分离，在基于需求给予应用程序团队尽可能多的自由和控制权的同时确保基础公共组件的一致性。</span><span class="sxs-lookup"><span data-stu-id="7382b-138">If your organization has a centralized IT, Network, Security, and/or Compliance team/department, a VDC can help enforce policy points, segregation of duty, and ensure uniformity of the underlying common components while giving application teams as much freedom and control as is appropriate for your requirements.</span></span>

<span data-ttu-id="7382b-139">期待 DevOps 的组织可以利用 VDC 概念提供 Azure 资源的授权包，同时确保他们在相应的组（公共订阅中的订阅组或资源组）内拥有完全控制权，但网络和安全边界必须按照中心 VNet 和资源组内中心化策略的定义保持合规。</span><span class="sxs-lookup"><span data-stu-id="7382b-139">Organizations that are looking to DevOps can utilize the VDC concepts to provide authorized pockets of Azure resources and ensure they have total control within that group (either subscription or resource group in a common subscription), but the network and security boundaries stay compliant as defined by a centralized policy in a hub VNet and Resource Group.</span></span>

## <a name="considerations-on-implementing-a-virtual-data-center"></a><span data-ttu-id="7382b-140">实现虚拟数据中心的注意事项</span><span class="sxs-lookup"><span data-stu-id="7382b-140">Considerations on Implementing a Virtual Data Center</span></span>
<span data-ttu-id="7382b-141">设计 VDC 时，需考虑以下几项关键问题：</span><span class="sxs-lookup"><span data-stu-id="7382b-141">When designing a VDC, there are several pivotal issues to consider:</span></span>

-   <span data-ttu-id="7382b-142">标识和目录服务</span><span class="sxs-lookup"><span data-stu-id="7382b-142">Identity and Directory Services</span></span>
-   <span data-ttu-id="7382b-143">安全基础结构</span><span class="sxs-lookup"><span data-stu-id="7382b-143">Security infrastructure</span></span>
-   <span data-ttu-id="7382b-144">与云的连接</span><span class="sxs-lookup"><span data-stu-id="7382b-144">Connectivity to the cloud</span></span>
-   <span data-ttu-id="7382b-145">云内的连接</span><span class="sxs-lookup"><span data-stu-id="7382b-145">Connectivity within the cloud</span></span>

### <a name="identity-and-directory-service"></a><span data-ttu-id="7382b-146">标识和目录服务</span><span class="sxs-lookup"><span data-stu-id="7382b-146">Identity and Directory Service</span></span>
<span data-ttu-id="7382b-147">标识和目录服务是所有数据中心（本地数据中心和云数据中心）的关键方面。</span><span class="sxs-lookup"><span data-stu-id="7382b-147">Identity and Directory services are a key aspect of all data centers, both on-premises and in the cloud.</span></span> <span data-ttu-id="7382b-148">标识与 VDC 内服务的访问和授权的各个方面相关。</span><span class="sxs-lookup"><span data-stu-id="7382b-148">Identity is related to all aspects of access and authorization to services within the VDC.</span></span> <span data-ttu-id="7382b-149">为了帮助确保只有获得授权的用户和进程可以访问 Azure 帐户和资源，Azure 使用几种凭据进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="7382b-149">To help ensure that only authorized users and processes access your Azure Account and resources, Azure uses several types of credentials for authentication.</span></span> <span data-ttu-id="7382b-150">这些凭据包括密码（用于访问 Azure 帐户）、加密密钥、数字签名和安全证书。</span><span class="sxs-lookup"><span data-stu-id="7382b-150">These include passwords (to access the Azure account), cryptographic keys, digital signatures, and certificates.</span></span> <span data-ttu-id="7382b-151">[*Azure 多重身份验证* (MFA)][MFA] 是访问 Azure 服务的附加安全层。</span><span class="sxs-lookup"><span data-stu-id="7382b-151">[*Azure Multi-Factor Authentication* (MFA)][MFA] is an additional layer of security for accessing Azure services.</span></span> <span data-ttu-id="7382b-152">Azure MFA 通过一系列简单的验证选项（电话、短信或移动应用通知）提供强身份验证，用户可根据自己的偏好选择所用的方法。</span><span class="sxs-lookup"><span data-stu-id="7382b-152">Azure MFA provides strong authentication with a range of easy verification options—phone call, text message, or mobile app notification—and allow customers to choose the method they prefer.</span></span>

<span data-ttu-id="7382b-153">任何大型企业都需要定义标识管理流程，说明如何在 VDC 内部或跨 vDC 管理各个标识、其身份验证、授权、角色和权限。</span><span class="sxs-lookup"><span data-stu-id="7382b-153">Any large enterprise needs to define an identity management process that describes the management of individual identities, their authentication, authorization, roles, and privileges within or across the VDC.</span></span> <span data-ttu-id="7382b-154">其目标是在减少成本、停机时间和重复人工作业的同时提高安全性和工作效率。</span><span class="sxs-lookup"><span data-stu-id="7382b-154">The goals of this process should be to increase security and productivity while decreasing cost, downtime, and repetitive manual tasks.</span></span>

<span data-ttu-id="7382b-155">企业/组织可以要求严格混合针对不同业务线 (LOB) 的服务，员工在参与不同的项目时通常会有不同的角色。</span><span class="sxs-lookup"><span data-stu-id="7382b-155">Enterprise/organizations can require a demanding mix of services for different Line-of-Businesses (LOBs), and employees often have different roles when involved with different projects.</span></span> <span data-ttu-id="7382b-156">VDC 要求不同的团队（每个团队拥有特定的角色定义）精诚合作，确保系统运行并很好地监管。</span><span class="sxs-lookup"><span data-stu-id="7382b-156">A VDC requires good cooperation between different teams, each with specific role definitions, to get systems running with good governance.</span></span> <span data-ttu-id="7382b-157">责任、访问和权限矩阵可能十分复杂。</span><span class="sxs-lookup"><span data-stu-id="7382b-157">The matrix of responsibilities, access, and rights can be extremely complex.</span></span> <span data-ttu-id="7382b-158">VDC 中的标识管理通过 [*Azure Active Directory* (AAD)][AAD] 和基于角色的访问控制 (RBAC) 实现。</span><span class="sxs-lookup"><span data-stu-id="7382b-158">Identity management in VDC is implemented through [*Azure Active Directory* (AAD)][AAD] and Role-Based Access Control (RBAC).</span></span>

<span data-ttu-id="7382b-159">目录服务是用于查找、控制、管理和组织日常项目和网络资源的共享信息基础结构。</span><span class="sxs-lookup"><span data-stu-id="7382b-159">A Directory Service is a shared information infrastructure for locating, managing, administering, and organizing everyday items and network resources.</span></span> <span data-ttu-id="7382b-160">这些资源包括卷、文件夹、文件、打印机、用户、组、设备和其他对象。</span><span class="sxs-lookup"><span data-stu-id="7382b-160">These resources can include volumes, folders, files, printers, users, groups, devices, and other objects.</span></span> <span data-ttu-id="7382b-161">目录服务器将网络上的每个资源视作一个对象。</span><span class="sxs-lookup"><span data-stu-id="7382b-161">Each resource on the network is considered an object by the directory server.</span></span> <span data-ttu-id="7382b-162">资源信息作为与该资源或对象相关的属性集合存储。</span><span class="sxs-lookup"><span data-stu-id="7382b-162">Information about a resource is stored as a collection of attributes associated with that resource or object.</span></span>

<span data-ttu-id="7382b-163">所有 Microsoft Online 业务服务都依赖于 Azure Active Directory (AAD) 进行登录并满足其他标识需求。</span><span class="sxs-lookup"><span data-stu-id="7382b-163">All Microsoft online business services rely on Azure Active Directory (AAD) for sign-in and other identity needs.</span></span> <span data-ttu-id="7382b-164">Azure Active Directory 是一个综合性的、高度可用的标识和访问管理云解决方案，它将核心目录服务、高级标识监管和应用程序访问管理结合起来。</span><span class="sxs-lookup"><span data-stu-id="7382b-164">Azure Active Directory is a comprehensive, highly available identity and access management cloud solution that combines core directory services, advanced identity governance, and application access management.</span></span> <span data-ttu-id="7382b-165">AAD 可与本地 Active Directory 集成，为基于云的和本地托管的（本地）所有应用程序启用单一登录。</span><span class="sxs-lookup"><span data-stu-id="7382b-165">AAD can be integrated with on-premises Active Directory to enable single sign-on for all cloud-based and locally hosted (on-premises) applications.</span></span> <span data-ttu-id="7382b-166">本地 Active Directory 的用户属性可以自动同步到 AAD。</span><span class="sxs-lookup"><span data-stu-id="7382b-166">The user attributes of on-premises Active Directory can be automatically synchronized to AAD.</span></span>

<span data-ttu-id="7382b-167">在 VDC 中分配所有权限不需要单个全局管理员。</span><span class="sxs-lookup"><span data-stu-id="7382b-167">A single global administrator is not required to assign all permissions in a VDC.</span></span> <span data-ttu-id="7382b-168">而是每个特定部门（或目录服务中的用户组或服务组）拥有在 VDC 内管理其资源所需的权限。</span><span class="sxs-lookup"><span data-stu-id="7382b-168">Instead each specific department (or group of users or services in the Directory Service) can have the permissions required to manage their own resources within a VDC.</span></span> <span data-ttu-id="7382b-169">权限的结构化需要均衡。</span><span class="sxs-lookup"><span data-stu-id="7382b-169">Structuring permissions requires balancing.</span></span> <span data-ttu-id="7382b-170">权限过多会妨碍性能效率，权限过少或过松则会增加安全风险。</span><span class="sxs-lookup"><span data-stu-id="7382b-170">Too many permissions can impede performance efficiency, and too few or loose permissions can increase security risks.</span></span> <span data-ttu-id="7382b-171">Azure 基于角色的访问控制 (RBAC) 通过对 VDC 资源提供细致的访问管理帮助解决此问题。</span><span class="sxs-lookup"><span data-stu-id="7382b-171">Azure Role-Based Access Control (RBAC) helps to address this problem, by offering fine-grained access management for VDC resources.</span></span>

#### <a name="security-infrastructure"></a><span data-ttu-id="7382b-172">安全基础结构</span><span class="sxs-lookup"><span data-stu-id="7382b-172">Security infrastructure</span></span>
<span data-ttu-id="7382b-173">在 VDC 环境中，安全基础结构主要与 VDC 特定虚拟网络段中的流量分离以及如何控制整个 VDC 的入口流量和出口流量相关。</span><span class="sxs-lookup"><span data-stu-id="7382b-173">Security infrastructure, in the context of a VDC, is mainly related to the segregation of traffic in the VDC's specific virtual network segment, and how to control ingress and egress flows throughout the VDC.</span></span> <span data-ttu-id="7382b-174">Azure 基于多租户的基础结构，该基础结构通过使用虚拟网络 (VNet) 隔离、访问控制列表 (ACL)、负载均衡器、IP 筛选器和流量流策略防止部署间的未经授权流量和意外流量。</span><span class="sxs-lookup"><span data-stu-id="7382b-174">Azure is based on multi-tenant architecture that prevents unauthorized and unintentional traffic between deployments, using Virtual Network (VNet) isolation, access control lists (ACLs), load balancers, and IP filters, along with traffic flow policies.</span></span> <span data-ttu-id="7382b-175">网络地址转换 (NAT) 将内部网络流量与外部流量分开。</span><span class="sxs-lookup"><span data-stu-id="7382b-175">Network address translation (NAT) separates internal network traffic from external traffic.</span></span>

<span data-ttu-id="7382b-176">Azure 结构将基础结构资源分配到租户工作负荷，并管理与虚拟机 (VM) 的通信。</span><span class="sxs-lookup"><span data-stu-id="7382b-176">The Azure fabric allocates infrastructure resources to tenant workloads and manages communications to and from virtual machines (VMs).</span></span> <span data-ttu-id="7382b-177">Azure 虚拟机监控程序会在 VM 之间强制实施内存和进程隔离，并将网络流量安全路由到来宾 OS 租户。</span><span class="sxs-lookup"><span data-stu-id="7382b-177">The Azure hypervisor enforces memory and process separation between VMs and securely routes network traffic to guest OS tenants.</span></span>

#### <a name="connectivity-to-the-cloud"></a><span data-ttu-id="7382b-178">与云的连接</span><span class="sxs-lookup"><span data-stu-id="7382b-178">Connectivity to the cloud</span></span>
<span data-ttu-id="7382b-179">VDC 需要与外部网络连接才能为客户、合作伙伴和/或内部用户提供服务。</span><span class="sxs-lookup"><span data-stu-id="7382b-179">The VDC needs connectivity with external networks to offer services to customers, partners and/or internal users.</span></span> <span data-ttu-id="7382b-180">这通常意味着不仅要连接到 Internet，还要连接到本地网络和数据中心。</span><span class="sxs-lookup"><span data-stu-id="7382b-180">This usually means connectivity not only to the Internet, but also to on-premises networks and data centers.</span></span>

<span data-ttu-id="7382b-181">客户可以生成安全策略，使用网络虚拟设备（提供筛选和流量检查）、自定义路由策略和网络筛选（用户定义的路由和网络安全组）控制特定的 VDC 托管服务与 Internet 的通信内容和方式。</span><span class="sxs-lookup"><span data-stu-id="7382b-181">Customers can build their security policies to control what and how specific VDC hosted services are accessible to/from the Internet using Network Virtual Appliances (with filtering and traffic inspection), and custom routing policies and network filtering (User Defined Routing and Network Security Groups).</span></span>

<span data-ttu-id="7382b-182">企业通常需要将 VDC 连接到本地数据中心或其他资源。</span><span class="sxs-lookup"><span data-stu-id="7382b-182">Enterprises often need to connect VDCs to on-premises data centers or other resources.</span></span> <span data-ttu-id="7382b-183">因此，Azure 与本地网络的连接是设计高效体系结构的关键方面。</span><span class="sxs-lookup"><span data-stu-id="7382b-183">The connectivity between Azure and on-premises networks is therefore a crucial aspect when designing an effective architecture.</span></span> <span data-ttu-id="7382b-184">企业可以通过两种不同方式在 Azure 内实现 VDC 与本地资源的互连：通过 Internet 和/或专用直接连接传输。</span><span class="sxs-lookup"><span data-stu-id="7382b-184">Enterprises have two different ways to create an interconnection between VDC and on-premises in Azure: transit over the Internet and/or by private direct connections.</span></span>

<span data-ttu-id="7382b-185">[**Azure 站点到站点 VPN**][VPN] 是通过 Internet 使本地网络与 VDC 实现互连的服务，该互连服务通过安全加密连接（IPsec/IKE 隧道）建立。</span><span class="sxs-lookup"><span data-stu-id="7382b-185">An [**Azure Site-to-Site VPN**][VPN] is an interconnection service over the Internet between on-premises networks and the VDC, established through secure encrypted connections (IPsec/IKE tunnels).</span></span> <span data-ttu-id="7382b-186">由于所有连接都通过 Internet 实现，因此 Azure 站点到站点的连接创建起来灵活而快速，不需要任何进一步的采购。</span><span class="sxs-lookup"><span data-stu-id="7382b-186">Azure Site-to-Site connection is flexible, quick to create, and does not require any further procurement, as all connections connect over the internet.</span></span>

<span data-ttu-id="7382b-187">[**ExpressRoute**][ExR] 是一种 Azure 连接性服务，允许在 VDC 和本地网络之间创建专用连接。</span><span class="sxs-lookup"><span data-stu-id="7382b-187">[**ExpressRoute**][ExR] is an Azure connectivity service that lets you create private connections between VDC and the on-premises networks.</span></span> <span data-ttu-id="7382b-188">ExpressRoute 连接不通过公共 Internet，从而提供更高的安全性、可靠性、更快的速度（最高可达 10 Gbps）和一致延迟。</span><span class="sxs-lookup"><span data-stu-id="7382b-188">ExpressRoute connections do not go over the public Internet, and offer higher security, reliability, and higher speeds (up to 10 Gbps) along with consistent latency.</span></span> <span data-ttu-id="7382b-189">由于 ExpressRoute 客户可以从与专用连接相关的符合性规则受益，因此 ExpressRoute 对 VDC 十分有用。</span><span class="sxs-lookup"><span data-stu-id="7382b-189">ExpressRoute is very useful for VDCs, as ExpressRoute customers can get the benefits of compliance rules associated with private connections.</span></span>

<span data-ttu-id="7382b-190">部署 ExpressRoute 连接涉及与 ExpressRoute 服务提供程序通信。</span><span class="sxs-lookup"><span data-stu-id="7382b-190">Deploying ExpressRoute connections involves engaging with an ExpressRoute service provider.</span></span> <span data-ttu-id="7382b-191">对于需要快速入门的客户，通常先使用站点到站点 VPN 在 VDC 与本地资源之间建立连接，然后再迁移到 ExpressRoute 连接。</span><span class="sxs-lookup"><span data-stu-id="7382b-191">For customers that need to start quickly, it is common to initially use Site-to-Site VPN to establish connectivity between the VDC and on-premises resources, and then migrate to ExpressRoute connection.</span></span>

#### <a name="connectivity-within-the-cloud"></a><span data-ttu-id="7382b-192">*云内的连接*</span><span class="sxs-lookup"><span data-stu-id="7382b-192">*Connectivity within the cloud*</span></span>
<span data-ttu-id="7382b-193">[VNet][VNet] 和 [VNet 对等互连][VNetPeering]是 VDC 中的基本网络连接服务。</span><span class="sxs-lookup"><span data-stu-id="7382b-193">[VNets][VNet] and [VNet Peering][VNetPeering] are the basic networking connectivity services inside a VDC.</span></span> <span data-ttu-id="7382b-194">VNet 保证 VDC 资源具有自然隔离边界，VNet 对等互连允许同一 Azure 区域或不同区域的不同 VNet 相互通信。</span><span class="sxs-lookup"><span data-stu-id="7382b-194">A VNet guarantees a natural boundary of isolation for VDC resources, and VNet peering allows intercommunication between different VNets within the same Azure region or even across regions.</span></span> <span data-ttu-id="7382b-195">VNet 内部以及 VNet 之间的流量控制需要与通过访问控制列表（[网络安全组][NSG]）、[网络虚拟设备][NVA]和自定义路由表 ([UDR][UDR]) 指定的一组安全规则匹配。</span><span class="sxs-lookup"><span data-stu-id="7382b-195">Traffic control inside a VNet and between VNets need to match a set of security rules specified through Access Control Lists ([Network Security Group][NSG]), [Network Virtual Appliances][NVA], and custom routing tables ([UDR][UDR]).</span></span>

## <a name="virtual-data-center-overview"></a><span data-ttu-id="7382b-196">虚拟数据中心概述</span><span class="sxs-lookup"><span data-stu-id="7382b-196">Virtual Data Center overview</span></span>

### <a name="topology"></a><span data-ttu-id="7382b-197">拓扑</span><span class="sxs-lookup"><span data-stu-id="7382b-197">Topology</span></span>
<span data-ttu-id="7382b-198">中心辐射模型在单个 Azure 区域内扩展虚拟数据中心。</span><span class="sxs-lookup"><span data-stu-id="7382b-198">_Hub and spokes_ is a model for extending a Virtual Data Center within a single Azure region.</span></span>

<span data-ttu-id="7382b-199">[![1]][1]</span><span class="sxs-lookup"><span data-stu-id="7382b-199">[![1]][1]</span></span>

<span data-ttu-id="7382b-200">中心是控制和检查不同区域（Internet、本地和辐射）之间入口和/或出口流量的中心区域。</span><span class="sxs-lookup"><span data-stu-id="7382b-200">The hub is the central zone that controls and inspects ingress and/or egress traffic between different zones: Internet, on-premises, and the spokes.</span></span> <span data-ttu-id="7382b-201">中心辐射型拓扑为 IT 部门提供了在中心位置强制实施安全策略的有效方式，同时降低了配置错误和曝光的可能性。</span><span class="sxs-lookup"><span data-stu-id="7382b-201">The hub and spoke topology gives the IT department an effective way to enforce security policies in a central location, while reducing the potential for misconfiguration and exposure.</span></span>

<span data-ttu-id="7382b-202">中心包含辐射使用的常见服务组件。</span><span class="sxs-lookup"><span data-stu-id="7382b-202">The hub contains the common service components consumed by the spokes.</span></span> <span data-ttu-id="7382b-203">以下是几个常见中心服务的典型示例：</span><span class="sxs-lookup"><span data-stu-id="7382b-203">Here are a few typical examples of common central services:</span></span>

-   <span data-ttu-id="7382b-204">第三方从不受信任网络访问时，Windows Active Directory 基础结构（具有相关 ADFS 服务）要求进行用户身份验证，验证通过后才可访问辐射中的工作负荷</span><span class="sxs-lookup"><span data-stu-id="7382b-204">The Windows Active Directory infrastructure (with the related ADFS service) required for user authentication of third parties accessing from untrusted networks before getting access to the workloads in the spoke</span></span>
-   <span data-ttu-id="7382b-205">DNS 服务用于解析辐射中工作负荷的命名，也用于访问本地和 Internet 上的资源</span><span class="sxs-lookup"><span data-stu-id="7382b-205">A DNS service to resolve naming for the workload in the spokes, to access resources on-premises and on the Internet</span></span>
-   <span data-ttu-id="7382b-206">PKI 基础结构用于实现工作负荷的单一登录</span><span class="sxs-lookup"><span data-stu-id="7382b-206">A PKI infrastructure, to implement single sign-on on workloads</span></span>
-   <span data-ttu-id="7382b-207">辐射与 Internet 之间的流控制 (TCP/UDP)</span><span class="sxs-lookup"><span data-stu-id="7382b-207">Flow control (TCP/UDP) between the spokes and Internet</span></span>
-   <span data-ttu-id="7382b-208">辐射与本地之间的流控制</span><span class="sxs-lookup"><span data-stu-id="7382b-208">Flow control between the spoke and on-premises</span></span>
-   <span data-ttu-id="7382b-209">一个辐射与另一个辐射之间的流控制（如果需要）</span><span class="sxs-lookup"><span data-stu-id="7382b-209">If desired, flow control between one spoke and another</span></span>

<span data-ttu-id="7382b-210">VDC 通过在多个分支之间使用共享中心基础结构来降低总体成本。</span><span class="sxs-lookup"><span data-stu-id="7382b-210">The VDC reduces overall cost by using the shared hub infrastructure between multiple spokes.</span></span>

<span data-ttu-id="7382b-211">每个辐射的角色可以是托管不同类型的工作负荷。</span><span class="sxs-lookup"><span data-stu-id="7382b-211">The role of each spoke can be to host different types of workloads.</span></span> <span data-ttu-id="7382b-212">辐射也可以为同一工作负荷的可重复部署（如开发和测试、用户验收测试、预生产和生产）提供模块化方法。</span><span class="sxs-lookup"><span data-stu-id="7382b-212">The spokes can also provide a modular approach for repeatable deployments (for example, dev and test, User Acceptance Testing, pre-production, and production) of the same workloads.</span></span> <span data-ttu-id="7382b-213">辐射也可以用于隔离和启用组织内部的不同组（如 DevOps 组）。</span><span class="sxs-lookup"><span data-stu-id="7382b-213">The spokes can also be used to segregate and enable different groups within your organization (for example, DevOps groups).</span></span> <span data-ttu-id="7382b-214">在辐射内，可以通过各层之间的流量控制部署基本工作负荷或复杂的多层工作负荷。</span><span class="sxs-lookup"><span data-stu-id="7382b-214">Inside a spoke, it is possible to deploy a basic workload or complex multi-tier workloads with traffic control between the tiers.</span></span>

#### <a name="subscription-limits-and-multiple-hubs"></a><span data-ttu-id="7382b-215">订阅限制和多个中心</span><span class="sxs-lookup"><span data-stu-id="7382b-215">Subscription limits and multiple hubs</span></span>
<span data-ttu-id="7382b-216">在 Azure 中，每个组件（无论何种类型）都通过 Azure 订阅进行部署。</span><span class="sxs-lookup"><span data-stu-id="7382b-216">In Azure, every component, whatever the type, is deployed in an Azure Subscription.</span></span> <span data-ttu-id="7382b-217">不同 Azure 订阅中的 Azure 组件的隔离可满足不同 LOB 的需求，如设置不同级别的访问和授权。</span><span class="sxs-lookup"><span data-stu-id="7382b-217">The isolation of Azure components in different Azure subscriptions can satisfy the requirements of different LOBs, such as setting up differentiated levels of access and authorization.</span></span>

<span data-ttu-id="7382b-218">尽管与每个 IT 系统一样具有平台限制，单个 VDC 仍能扩展到大量分支。</span><span class="sxs-lookup"><span data-stu-id="7382b-218">A single VDC can scale up to large number of spokes, although, as with every IT system, there are platforms limits.</span></span> <span data-ttu-id="7382b-219">中心部署与特定的 Azure 订阅绑定，该订阅具有相关的约束和限制（如 VNet 对等互连上限 - 请参阅 [Azure 订阅和服务限制、配额和约束条件][Limits]获取详细信息）。</span><span class="sxs-lookup"><span data-stu-id="7382b-219">The hub deployment is bound to a specific Azure subscription, which has restrictions and limits (for example, a max number of VNet peerings - see [Azure subscription and service limits, quotas, and constraints][Limits] for details).</span></span> <span data-ttu-id="7382b-220">如果出现限制问题，体系结构可以通过将模型从单个中心辐射型扩展为中心辐射群集实现进一步纵向扩展。</span><span class="sxs-lookup"><span data-stu-id="7382b-220">In cases where limits may be an issue, the architecture can scale up further by extending the model from a single hub-spokes to a cluster of hub and spokes.</span></span> <span data-ttu-id="7382b-221">位于一个或多个 Azure 区域的多个中心可以使用 VNet 对等互连、ExpressRoute 或站点到站点 VPN 实现互连。</span><span class="sxs-lookup"><span data-stu-id="7382b-221">Multiple hubs in one or more Azure regions can be interconnected using VNet Peering, ExpressRoute, or site-to-site VPN.</span></span>

<span data-ttu-id="7382b-222">[![2]][2]</span><span class="sxs-lookup"><span data-stu-id="7382b-222">[![2]][2]</span></span>

<span data-ttu-id="7382b-223">引入多个中心会增加系统的成本和管理工作量，引入的唯一原因在于可伸缩性（如系统限制或冗余）和区域复制（如最终用户性能或灾难恢复）。</span><span class="sxs-lookup"><span data-stu-id="7382b-223">The introduction of multiple hubs increases the cost and management effort of the system and would only be justified by scalability (examples: system limits or redundancy) and regional replication (examples: end-user performance or disaster recovery).</span></span> <span data-ttu-id="7382b-224">在要求多个中心的情形下，所有中心应力图提供相同的服务集以方便操作。</span><span class="sxs-lookup"><span data-stu-id="7382b-224">In scenarios requiring multiple hubs, all the hubs should strive to offer the same set of services for operational ease.</span></span>

#### <a name="interconnection-between-spokes"></a><span data-ttu-id="7382b-225">辐射之间的互连</span><span class="sxs-lookup"><span data-stu-id="7382b-225">Interconnection between spokes</span></span>
<span data-ttu-id="7382b-226">在单个辐射内，可以实现复杂的多层工作负荷。</span><span class="sxs-lookup"><span data-stu-id="7382b-226">Inside a single spoke, it is possible to implement complex multi-tiers workloads.</span></span> <span data-ttu-id="7382b-227">在同一 VNet 内使用子网（每层使用一个子网）并使用 NSG 对流进行筛选可以实现多层配置。</span><span class="sxs-lookup"><span data-stu-id="7382b-227">Multi-tier configurations can be implemented using subnets (one for every tier) in the same VNet and filtering the flows using NSGs.</span></span>

<span data-ttu-id="7382b-228">另一方面，架构师可能希望跨多个 VNet 部署多层工作负荷。</span><span class="sxs-lookup"><span data-stu-id="7382b-228">On the other hand, an architect may want to deploy a multi-tier workload across multiple VNets.</span></span> <span data-ttu-id="7382b-229">使用 VNet 对等互连，辐射可以连接到同一中心的其他辐射，也可连接到其他中心的其他辐射。</span><span class="sxs-lookup"><span data-stu-id="7382b-229">Using VNet peering, spokes can connect to other spokes in the same hub or different hubs.</span></span> <span data-ttu-id="7382b-230">此情形的典型示例是：应用程序处理服务器位于一个辐射 (VNet) 内，而数据库部署在另一个辐射 (VNet) 中。</span><span class="sxs-lookup"><span data-stu-id="7382b-230">A typical example of this scenario is the case where application processing servers are in one spoke (VNet), while the database is deployed in a different spoke (VNet).</span></span> <span data-ttu-id="7382b-231">在这种情况下，可以轻松实现辐射与 VNet 对等互连之间的互连，从而避免通过中心传输。</span><span class="sxs-lookup"><span data-stu-id="7382b-231">In this case, it is easy to interconnect the spokes with VNet peering and thereby avoid transiting through the hub.</span></span> <span data-ttu-id="7382b-232">应仔细审查体系结构和安全性，确保绕过中心并不会绕过可能只存在于中心的重要安全或审核点。</span><span class="sxs-lookup"><span data-stu-id="7382b-232">A careful architecture and security review should be performed to ensure that bypassing the hub doesn’t bypass important security or auditing points that may only exist in the hub.</span></span>

<span data-ttu-id="7382b-233">[![3]][3]</span><span class="sxs-lookup"><span data-stu-id="7382b-233">[![3]][3]</span></span>

<span data-ttu-id="7382b-234">辐射也可以与充当中心的辐射互连。</span><span class="sxs-lookup"><span data-stu-id="7382b-234">Spokes can also be interconnected to a spoke that acts as a hub.</span></span> <span data-ttu-id="7382b-235">此方法可以创建一个两层的层次结构：在该层次结构中，较高级别（第 0 层）的辐射成为较低级别（第 1 层）辐射的中心。</span><span class="sxs-lookup"><span data-stu-id="7382b-235">This approach creates a two-level hierarchy: the spoke in the higher level (level 0) become the hub of lower spokes (level 1) of the hierarchy.</span></span> <span data-ttu-id="7382b-236">VDC 的分支需要将流量转发到中心，以与本地网络或 Internet 连接。</span><span class="sxs-lookup"><span data-stu-id="7382b-236">The spokes of VDC need to forward the traffic to the central hub to reach out either to the on-premises network or internet.</span></span> <span data-ttu-id="7382b-237">具有两层中心的体系结构引入了复杂路由，该路由会消除简单中心辐射关系的优势。</span><span class="sxs-lookup"><span data-stu-id="7382b-237">An architecture with two levels of hub introduces complex routing that removes the benefits of a simple hub-spoke relationship.</span></span>

<span data-ttu-id="7382b-238">尽管 Azure 允许复杂拓扑，但 VDC 概念的核心原则之一是可重复性和简洁性。</span><span class="sxs-lookup"><span data-stu-id="7382b-238">Although Azure allows complex topologies, one of the core principles of the VDC concept is repeatability and simplicity.</span></span> <span data-ttu-id="7382b-239">为了尽量减少管理工作量，推荐使用简单的中心辐射设计作为 VDC 参考体系结构。</span><span class="sxs-lookup"><span data-stu-id="7382b-239">To minimize management effort, the simple hub-spoke design is the recommended VDC reference architecture.</span></span>

### <a name="components"></a><span data-ttu-id="7382b-240">组件</span><span class="sxs-lookup"><span data-stu-id="7382b-240">Components</span></span>
<span data-ttu-id="7382b-241">虚拟数据中心由四个基本组件类型构成：基础结构、外围网络、工作负荷和监视。</span><span class="sxs-lookup"><span data-stu-id="7382b-241">A Virtual Data Center is made up of four basic component types: **Infrastructure**, **Perimeter Networks**, **Workloads**, and **Monitoring**.</span></span>

<span data-ttu-id="7382b-242">每个组件类型由各种 Azure 功能和资源组成。</span><span class="sxs-lookup"><span data-stu-id="7382b-242">Each component type consists of various Azure features and resources.</span></span> <span data-ttu-id="7382b-243">VDC 由多个组件类型的实例和同一组件类型的多个变体构成。</span><span class="sxs-lookup"><span data-stu-id="7382b-243">Your VDC is made up of instances of multiple components types and multiple variations of the same component type.</span></span> <span data-ttu-id="7382b-244">例如，可能有许多逻辑上分离的不同工作负荷实例表示不同应用程序。</span><span class="sxs-lookup"><span data-stu-id="7382b-244">For instance, you may have many different, logically separated, workload instances that represent different applications.</span></span> <span data-ttu-id="7382b-245">使用这些不同的组件类型和实例最终生成 VDC。</span><span class="sxs-lookup"><span data-stu-id="7382b-245">You use these different component types and instances to ultimately build the VDC.</span></span>

<span data-ttu-id="7382b-246">[![4]][4]</span><span class="sxs-lookup"><span data-stu-id="7382b-246">[![4]][4]</span></span>

<span data-ttu-id="7382b-247">上图中的高级别 VDC 体系结构显示了中心辐射型拓扑的不同区域使用的不同组件类型。</span><span class="sxs-lookup"><span data-stu-id="7382b-247">The preceding high-level architecture of a VDC shows different component types used in different zones of the hub-spokes topology.</span></span> <span data-ttu-id="7382b-248">此关系图显示了该体系结构中各个部分的基础结构组件。</span><span class="sxs-lookup"><span data-stu-id="7382b-248">The diagram shows infrastructure components in various parts of the architecture.</span></span>

<span data-ttu-id="7382b-249">访问权限和特权应该基于组，这是针对本地 DC 或 VDC 的良好做法。</span><span class="sxs-lookup"><span data-stu-id="7382b-249">As a good practice (for an on-premises DC or VDC) access rights and privileges should be group-based.</span></span> <span data-ttu-id="7382b-250">处理组而非单个用户有助于跨团队一致地维护访问策略，尽可能减少配置错误。</span><span class="sxs-lookup"><span data-stu-id="7382b-250">Dealing with groups, instead of individual users helps maintaining access policies consistently across teams and aids in minimizing configuration errors.</span></span> <span data-ttu-id="7382b-251">在相应的组中分配或删除用户有助于使特定用户的权限保持最新。</span><span class="sxs-lookup"><span data-stu-id="7382b-251">Assigning and removing users to and from appropriate groups helps keeping the privileges of a specific user up-to-date.</span></span>

<span data-ttu-id="7382b-252">每个角色组的名称应具有唯一的前缀，以便轻松确定哪个组与哪个工作负荷关联。</span><span class="sxs-lookup"><span data-stu-id="7382b-252">Each role group should have a unique prefix on their names making it easy to identify which group is associated with which workload.</span></span> <span data-ttu-id="7382b-253">例如，托管身份验证服务的工作负荷应具有名为 AuthServiceNetOps、AuthServiceSecOps、AuthServiceDevOps 和 AuthServiceInfraOps 的组。</span><span class="sxs-lookup"><span data-stu-id="7382b-253">For instance, a workload hosting an authentication service might have groups named *AuthServiceNetOps, AuthServiceSecOps, AuthServiceDevOps, and AuthServiceInfraOps.*</span></span> <span data-ttu-id="7382b-254">同样，中心化角色或不与特定服务相关的角色的名称可以用“Corp”开头，如 CorpNetOps。</span><span class="sxs-lookup"><span data-stu-id="7382b-254">Likewise for centralized roles, or roles not related to a specific service, could be prefaced with “Corp”, *CorpNetOps* for example.</span></span>

<span data-ttu-id="7382b-255">许多组织都使用以下组的变体来提供主要角色细分：</span><span class="sxs-lookup"><span data-stu-id="7382b-255">Many organizations use a variation of the following groups to provide a major breakdown of roles:</span></span>

-   <span data-ttu-id="7382b-256">*中心 IT 组 (Corp)* 具有可控制基础结构（如网络和安全）组件的所有权权限，因此需要对订阅具有参与者角色（并可控制中心），对辐射具有网络参与者权限。</span><span class="sxs-lookup"><span data-stu-id="7382b-256">The *central IT group (Corp)* has the ownership rights to control infrastructure (such as networking and security) components, and therefore needs to have the role of contributor on the subscription (and have control of the hub) and network contributor rights in the spokes.</span></span> <span data-ttu-id="7382b-257">大型组织时常会在多个团队（如专门处理网络的网络操作 (CorpNetOps) 组和负责防火墙和安全策略的安全操作 (CorpSecOps) 组）之间划分这些管理责任。</span><span class="sxs-lookup"><span data-stu-id="7382b-257">Large organization frequently split up these management responsibilities between multiple teams such as; a Network Operations (CorpNetOps) group (with exclusive focus on networking) and a Security Operations (CorpSecOps) group (responsible for firewall and security policy).</span></span> <span data-ttu-id="7382b-258">在这种特定情况下，需要创建两个不同的组，用于分配这些自定义角色。</span><span class="sxs-lookup"><span data-stu-id="7382b-258">In this specific case, two different groups need to be created for assignment of these custom roles.</span></span>
-   <span data-ttu-id="7382b-259">*开发与测试 (AppDevOps) 组*负责部署工作负荷（应用或服务）。</span><span class="sxs-lookup"><span data-stu-id="7382b-259">The *dev & test (AppDevOps) group* has the responsibility to deploy workloads (Apps or Services).</span></span> <span data-ttu-id="7382b-260">此组担任用于 IaaS 部署的虚拟机参与者角色和/或一个或多个 PaaS 参与者角色（请参阅[用于 Azure 基于角色的访问控制的内置角色][Roles]）。</span><span class="sxs-lookup"><span data-stu-id="7382b-260">This group takes the role of Virtual Machine Contributor for IaaS deployments and/or one or more PaaS contributor’s roles (see [Built-in roles for Azure Role-Based Access Control][Roles]).</span></span> <span data-ttu-id="7382b-261">（可选）开发与测试团队可能需要对中心或特定辐射内的安全策略 (NSG) 和路由策略 (UDR) 拥有可见性。</span><span class="sxs-lookup"><span data-stu-id="7382b-261">Optionally the dev & test team may need to have visibility on security policies (NSGs) and routing policies (UDR) inside the hub or a specific spoke.</span></span> <span data-ttu-id="7382b-262">因此，除了担任工作负荷参与者角色，此组也需要担任网络读取者角色。</span><span class="sxs-lookup"><span data-stu-id="7382b-262">Therefore, in addition to the roles of contributor for workloads, this group would also need the role of Network Reader.</span></span>
-   <span data-ttu-id="7382b-263">*操作和维护组（CorpInfraOps 或 AppInfraOps）* 负责管理生产中的工作负荷。</span><span class="sxs-lookup"><span data-stu-id="7382b-263">The *operation and maintenance group (CorpInfraOps or AppInfraOps)* have the responsibility of managing workloads in production.</span></span> <span data-ttu-id="7382b-264">此组必须是任何生产订阅中工作负荷的订阅参与者。</span><span class="sxs-lookup"><span data-stu-id="7382b-264">This group needs to be a subscription contributor on workloads in any production subscriptions.</span></span> <span data-ttu-id="7382b-265">一些组织还可能评估他们是否需要在生产和中心订阅中担任订阅参与者角色的附加升级支持团队组，以便修复生产环境中的潜在配置问题。</span><span class="sxs-lookup"><span data-stu-id="7382b-265">Some organizations might also evaluate if they need an additional escalation support team group with the role of subscription contributor in production and in the central hub subscription, in order to fix potential configuration issues in the production environment.</span></span>

<span data-ttu-id="7382b-266">VDC 是结构化的，可确保为中心 IT 组创建的用于管理中心的组在工作负荷级别拥有相应的组。</span><span class="sxs-lookup"><span data-stu-id="7382b-266">A VDC is structured so that groups created for the central IT groups managing the hub have corresponding groups at the workload level.</span></span> <span data-ttu-id="7382b-267">除了管理中心资源之外，只有中心 IT 组能够在订阅中控制外部访问和最高权限。</span><span class="sxs-lookup"><span data-stu-id="7382b-267">In addition to managing hub resources only the central IT groups would be able to control external access and top-level permissions on the subscription.</span></span> <span data-ttu-id="7382b-268">但是，工作负荷组将能够在中心 IT 内独立地控制其 VNet 中的资源和权限。</span><span class="sxs-lookup"><span data-stu-id="7382b-268">However, workload groups would be able to control resources and permissions of their VNet independently on Central IT.</span></span>

<span data-ttu-id="7382b-269">需要对 VDC 进行分区处理，以便安全托管跨不同业务线 (LOB) 的多个项目。</span><span class="sxs-lookup"><span data-stu-id="7382b-269">The VDC needs to be partitioned to securely host multiple projects across different Line-of-Businesses (LOBs).</span></span> <span data-ttu-id="7382b-270">所有项目需要不同的独立环境（如开发、UAT 和生产）。</span><span class="sxs-lookup"><span data-stu-id="7382b-270">All projects require different isolated environments (Dev, UAT, production).</span></span> <span data-ttu-id="7382b-271">每个环境的各个 Azure 订阅自然隔离。</span><span class="sxs-lookup"><span data-stu-id="7382b-271">Separate Azure subscriptions for each of these environments provide natural isolation.</span></span>

<span data-ttu-id="7382b-272">[![5]][5]</span><span class="sxs-lookup"><span data-stu-id="7382b-272">[![5]][5]</span></span>

<span data-ttu-id="7382b-273">上方关系图显示组织中项目、用户、组以及部署 Azure 组件的环境之间的关系。</span><span class="sxs-lookup"><span data-stu-id="7382b-273">The preceding diagram shows the relationship between an organization's projects, users, groups, and the environments where the Azure components are deployed.</span></span>

<span data-ttu-id="7382b-274">在 IT 中，环境（或层）通常是部署和执行多个应用程序的系统。</span><span class="sxs-lookup"><span data-stu-id="7382b-274">Typically in IT, an environment (or tier) is a system in which multiple applications are deployed and executed.</span></span> <span data-ttu-id="7382b-275">大型企业使用开发环境（最初做出更改和测试的环境）和生产环境（最终用户使用的环境）。</span><span class="sxs-lookup"><span data-stu-id="7382b-275">Large enterprises use a development environment (where changes originally made and tested) and a production environment (what end-users use).</span></span> <span data-ttu-id="7382b-276">这些环境相互隔离，环境之间通常存在多个过渡环境，出现问题时可实现分阶段部署（推出）、测试和回退。</span><span class="sxs-lookup"><span data-stu-id="7382b-276">Those environments are separated, often with several staging environments in between them to allow phased deployment (rollout), testing, and rollback in case of problems.</span></span> <span data-ttu-id="7382b-277">部署体系结构之间存在巨大差异，但通常遵循以下基本流程：始于开发 (DEV)，终于生产 (PROD)。</span><span class="sxs-lookup"><span data-stu-id="7382b-277">Deployment architectures vary significantly, but usually the basic process of starting at development (DEV) and ending at production (PROD) is still followed.</span></span>

<span data-ttu-id="7382b-278">此类多层环境的常见体系结构包括 DevOps（发展与测试）、UAT（过渡）和生产环境。</span><span class="sxs-lookup"><span data-stu-id="7382b-278">A common architecture for these types of multi-tier environments consists of DevOps (development and testing), UAT (staging), and production environments.</span></span> <span data-ttu-id="7382b-279">组织可以利用单个或多个 Azure AD 租户定义对这些环境的访问和权限。</span><span class="sxs-lookup"><span data-stu-id="7382b-279">Organizations can leverage single or multiple Azure AD tenants to define access and rights to these environments.</span></span> <span data-ttu-id="7382b-280">上方关系图显示使用两个不同 Azure AD 租户的事例：一个用于 DevOps 和 UAT，另一个专门用于生产。</span><span class="sxs-lookup"><span data-stu-id="7382b-280">The previous diagram shows a case where two different Azure AD tenants are used: one for DevOps and UAT, and the other exclusively for production.</span></span>

<span data-ttu-id="7382b-281">不同的 Azure AD 租户可以强化环境之间的隔离。</span><span class="sxs-lookup"><span data-stu-id="7382b-281">The presence of different Azure AD tenants enforces the separation between environments.</span></span> <span data-ttu-id="7382b-282">同一组用户（如中心 IT）需要使用不同 URI 进行身份验证，从而访问不同的 AD 租户，该租户可修改项目的 DevOps 或生产环境的角色或权限。</span><span class="sxs-lookup"><span data-stu-id="7382b-282">The same group of users (as an example, Central IT) needs to authenticate using a different URI to access a different AD tenant modify the roles or permissions of either the DevOps or production environments of a project.</span></span> <span data-ttu-id="7382b-283">通过不同的用户身份验证访问不同的环境可以减少人为失误可能导致的中断和其他问题。</span><span class="sxs-lookup"><span data-stu-id="7382b-283">The presence of different user authentication to access different environments reduces possible outages and other issues caused by human errors.</span></span>

#### <a name="component-type-infrastructure"></a><span data-ttu-id="7382b-284">组件类型：基础结构</span><span class="sxs-lookup"><span data-stu-id="7382b-284">Component type: Infrastructure</span></span>
<span data-ttu-id="7382b-285">大多数支持基础结构都位于此组件类型中。</span><span class="sxs-lookup"><span data-stu-id="7382b-285">This component type is where most of the supporting infrastructure resides.</span></span> <span data-ttu-id="7382b-286">中心化 IT、安全团队和/或符合性团队的大部分时间花费在该类型上。</span><span class="sxs-lookup"><span data-stu-id="7382b-286">It's also where your centralized IT, Security, and/or Compliance teams spend most of their time.</span></span>

<span data-ttu-id="7382b-287">[![6]][6]</span><span class="sxs-lookup"><span data-stu-id="7382b-287">[![6]][6]</span></span>

<span data-ttu-id="7382b-288">基础结构组件为 VDC 的不同组件提供互连，并同时位于中心和分支中。</span><span class="sxs-lookup"><span data-stu-id="7382b-288">Infrastructure components provide an interconnection between the different components of a VDC, and are present in both the hub and the spokes.</span></span> <span data-ttu-id="7382b-289">管理和维护基础结构组件的责任通常分配给中心 IT 和/或安全团队。</span><span class="sxs-lookup"><span data-stu-id="7382b-289">The responsibility for managing and maintaining the infrastructure components is typically assigned to the central IT and/or security team.</span></span>

<span data-ttu-id="7382b-290">IT 基础结构团队的首要任务之一是保证整个企业 IP 地址架构的一致性。</span><span class="sxs-lookup"><span data-stu-id="7382b-290">One of the primary tasks of the IT infrastructure team is to guarantee the consistency of IP address schemas across the enterprise.</span></span> <span data-ttu-id="7382b-291">分配给 VDC 的专用 IP 地址空间需要一致，并且不能与本地网络上分配的专用 IP 地址重叠。</span><span class="sxs-lookup"><span data-stu-id="7382b-291">The private IP address space assigned to the VDC needs to be consistent and NOT overlapping with private IP addresses assigned on your on-premises networks.</span></span>

<span data-ttu-id="7382b-292">NAT 在本地边缘路由器或 Azure 环境中时可避免 IP 地址冲突，但会增加基础结构组件的复杂性。</span><span class="sxs-lookup"><span data-stu-id="7382b-292">While NAT on the on-premises edge routers or in Azure environments can avoid IP address conflicts, it adds complications to your infrastructure components.</span></span> <span data-ttu-id="7382b-293">简化管理是 VDC 的关键目标之一，因此不建议使用 NAT 处理 IP 问题。</span><span class="sxs-lookup"><span data-stu-id="7382b-293">Simplicity of management is one of the key goals of VDC, so using NAT to handle IP concerns is not a recommended solution.</span></span>

<span data-ttu-id="7382b-294">基础结构组件包含以下功能：</span><span class="sxs-lookup"><span data-stu-id="7382b-294">Infrastructure components contain the following functionality:</span></span>

-   <span data-ttu-id="7382b-295">[**标识和目录服务**][AAD]。</span><span class="sxs-lookup"><span data-stu-id="7382b-295">[**Identity and directory services**][AAD].</span></span> <span data-ttu-id="7382b-296">对 Azure 中的每种资源类型的访问都由目录服务中存储的标识控制。</span><span class="sxs-lookup"><span data-stu-id="7382b-296">Access to every resource type in Azure is controlled by an identity stored in a directory service.</span></span> <span data-ttu-id="7382b-297">目录服务不仅存储用户列表，也存储特定 Azure 订阅中资源的访问权限。</span><span class="sxs-lookup"><span data-stu-id="7382b-297">The directory service stores not only the list of users, but also the access rights to resources in a specific Azure subscription.</span></span> <span data-ttu-id="7382b-298">这些服务可只存在于云中，也可以与 Active Directory 中存储的本地标识同步。</span><span class="sxs-lookup"><span data-stu-id="7382b-298">These services can exist cloud-only, or they can be synchronized with on-premises identity stored in Active Directory.</span></span>
-   <span data-ttu-id="7382b-299">[**虚拟网络**][VPN]。</span><span class="sxs-lookup"><span data-stu-id="7382b-299">[**Virtual Network**][VPN].</span></span> <span data-ttu-id="7382b-300">虚拟网络是 VDC 的主要组件之一，通过虚拟网络可以在 Azure 平台创建流量隔离边界。</span><span class="sxs-lookup"><span data-stu-id="7382b-300">Virtual Networks are one of main components of a VDC, and enable you to create a traffic isolation boundary on the Azure platform.</span></span> <span data-ttu-id="7382b-301">虚拟网络由单个或多个虚拟网络段构成，每个虚拟网络段都有一个特定的 IP 网络前缀（子网）。</span><span class="sxs-lookup"><span data-stu-id="7382b-301">A Virtual Network is composed of a single or multiple virtual network segments, each with a specific IP network prefix (a subnet).</span></span> <span data-ttu-id="7382b-302">虚拟网络定义内部外围区域，在该区域中 IaaS 虚拟机和 PaaS 服务可以建立专用通信。</span><span class="sxs-lookup"><span data-stu-id="7382b-302">The Virtual Network defines an internal perimeter area where IaaS virtual machines and PaaS services can establish private communications.</span></span> <span data-ttu-id="7382b-303">一个虚拟网络中的 VM（和 PaaS 服务）不能与另一个虚拟网络中的 VM（和 PaaS 服务）直接通信，即使这两个虚拟网络是由同一个客户在同一订阅下创建的。</span><span class="sxs-lookup"><span data-stu-id="7382b-303">VMs (and PaaS services) in one virtual network cannot communicate directly to VMs (and PaaS services) in a different virtual network, even if both virtual networks are created by the same customer, under the same subscription.</span></span> <span data-ttu-id="7382b-304">隔离是一个非常关键的属性，可确保客户 VM 与通信在虚拟网络中保持私密性。</span><span class="sxs-lookup"><span data-stu-id="7382b-304">Isolation is a critical property that ensures customer VMs and communication remains private within a virtual network.</span></span>
-   <span data-ttu-id="7382b-305">[**UDR**][UDR]。</span><span class="sxs-lookup"><span data-stu-id="7382b-305">[**UDR**][UDR].</span></span> <span data-ttu-id="7382b-306">虚拟网络中的流量默认基于系统路由表路由。</span><span class="sxs-lookup"><span data-stu-id="7382b-306">Traffic in a Virtual Network is routed by default based on the system routing table.</span></span> <span data-ttu-id="7382b-307">用户定义的路由是自定义路由表，网络管理员可以将该路由表关联到一个或多个子网，覆盖系统路由表的行为并定义虚拟网络中的通信路径。</span><span class="sxs-lookup"><span data-stu-id="7382b-307">A User Define Route is a custom routing table that network administrators can associate to one or more subnets to overwrite the behavior of the system routing table and define a communication path within a virtual network.</span></span> <span data-ttu-id="7382b-308">UDR 保证辐射的出口流量通过中心和辐射中的特定自定义 VM 和/或虚拟网络设备以及负载均衡器传输。</span><span class="sxs-lookup"><span data-stu-id="7382b-308">The presence of UDRs guarantees that egress traffic from the spoke transit through specific custom VMs and/or Network Virtual Appliances and load balancers present in the hub and in the spokes.</span></span>
-   <span data-ttu-id="7382b-309">[**NSG**][NSG]。</span><span class="sxs-lookup"><span data-stu-id="7382b-309">[**NSG**][NSG].</span></span> <span data-ttu-id="7382b-310">网络安全组是一系列安全规则，充当 IP 源、IP 目标、协议、IP 源端口和 IP 目标端口的流量筛选器。</span><span class="sxs-lookup"><span data-stu-id="7382b-310">A Network Security Group is a list of security rules that act as traffic filtering on IP Sources, IP Destination, Protocols, IP Source Ports, and IP Destination ports.</span></span> <span data-ttu-id="7382b-311">NSG 可应用于子网和/或与 Azure VM 关联的虚拟 NIC 卡。</span><span class="sxs-lookup"><span data-stu-id="7382b-311">The NSG can be applied to a subnet, a Virtual NIC card associated with an Azure VM, or both.</span></span> <span data-ttu-id="7382b-312">NSG 对在中心和辐射中实现正确的流控制至关重要。</span><span class="sxs-lookup"><span data-stu-id="7382b-312">The NSGs are essential to implement a correct flow control in the hub and in the spokes.</span></span> <span data-ttu-id="7382b-313">NSG 提供的安全级别由出于何种原因打开哪个端口决定。</span><span class="sxs-lookup"><span data-stu-id="7382b-313">The level of security afforded by the NSG is a function of which ports you open, and for what purpose.</span></span> <span data-ttu-id="7382b-314">客户应通过基于主机的防火墙（如 IPtable 或 Windows 防火墙）对每个 VM 应用附加筛选器。</span><span class="sxs-lookup"><span data-stu-id="7382b-314">Customers should apply additional per-VM filters with host-based firewalls such as IPtables or the Windows Firewall.</span></span>
-   <span data-ttu-id="7382b-315">[**DNS**][DNS]。</span><span class="sxs-lookup"><span data-stu-id="7382b-315">[**DNS**][DNS].</span></span> <span data-ttu-id="7382b-316">VDC 中 VNet 资源的名称解析通过 DNS 提供。</span><span class="sxs-lookup"><span data-stu-id="7382b-316">The name resolution of resources in the VNets of a VDC is provided through DNS.</span></span> <span data-ttu-id="7382b-317">Azure 提供的 DNS 服务适用于[公用][DNS] 和[专用 DNS][PrivateDNS] 名称解析。</span><span class="sxs-lookup"><span data-stu-id="7382b-317">Azure provides DNS services for both [Public][DNS] and [Private][PrivateDNS] name resolution.</span></span> <span data-ttu-id="7382b-318">专用区域在虚拟网络内或虚拟网络之间提供名称解析功能。</span><span class="sxs-lookup"><span data-stu-id="7382b-318">Private zones provide name resolution both within a virtual network and across virtual networks.</span></span> <span data-ttu-id="7382b-319">可以让专用区域跨同一区域的虚拟网络，以及跨区域和跨订阅。</span><span class="sxs-lookup"><span data-stu-id="7382b-319">You can have private zones not only span across virtual networks in the same region, but also across regions and subscriptions.</span></span> <span data-ttu-id="7382b-320">对于公用解析，Azure DNS 提供 DNS 域的托管服务，它使用 Microsoft Azure 基础结构提供名称解析。</span><span class="sxs-lookup"><span data-stu-id="7382b-320">For public resolution, Azure DNS provides a hosting service for DNS domains, providing name resolution using Microsoft Azure infrastructure.</span></span> <span data-ttu-id="7382b-321">通过在 Azure 中托管域，可以使用与其他 Azure 服务相同的凭据、API、工具和计费来管理 DNS 记录。</span><span class="sxs-lookup"><span data-stu-id="7382b-321">By hosting your domains in Azure, you can manage your DNS records using the same credentials, APIs, tools, and billing as your other Azure services.</span></span>
-   <span data-ttu-id="7382b-322">[**订阅**][SubMgmt]和[**资源组管理**][RGMgmt]。</span><span class="sxs-lookup"><span data-stu-id="7382b-322">[**Subscription**][SubMgmt] and [**Resource Group Management**][RGMgmt].</span></span> <span data-ttu-id="7382b-323">订阅定义在 Azure 创建多个资源组的自然边界。</span><span class="sxs-lookup"><span data-stu-id="7382b-323">A subscription defines a natural boundary to create multiple groups of resources in Azure.</span></span> <span data-ttu-id="7382b-324">订阅中的资源聚集在名为资源组的逻辑容器中。</span><span class="sxs-lookup"><span data-stu-id="7382b-324">Resources in a subscription are assembled together in logical containers named Resource Groups.</span></span> <span data-ttu-id="7382b-325">资源组表示组织 VDC 资源的逻辑组。</span><span class="sxs-lookup"><span data-stu-id="7382b-325">The Resource Group represents a logical group to organize the resources of a VDC.</span></span>
-   <span data-ttu-id="7382b-326">[**RBAC**][RBAC]。</span><span class="sxs-lookup"><span data-stu-id="7382b-326">[**RBAC**][RBAC].</span></span> <span data-ttu-id="7382b-327">通过 RBAC，可以映射组织角色以及访问特定 Azure 资源的权限，允许限制用户只进行特定子网操作。</span><span class="sxs-lookup"><span data-stu-id="7382b-327">Through RBAC, it is possible to map organizational role along with rights to access specific Azure resources, allowing you to restrict users to only a certain subset of actions.</span></span> <span data-ttu-id="7382b-328">使用 RBAC，可以通过将相应的角色分配给相关范围内的用户、组和应用程序授予访问权限。</span><span class="sxs-lookup"><span data-stu-id="7382b-328">With RBAC, you can grant access by assigning the appropriate role to users, groups, and applications within the relevant scope.</span></span> <span data-ttu-id="7382b-329">角色分配的范围可以是 Azure 订阅、资源组或单个资源。</span><span class="sxs-lookup"><span data-stu-id="7382b-329">The scope of a role assignment can be an Azure subscription, a resource group, or a single resource.</span></span> <span data-ttu-id="7382b-330">RBAC 允许继承权限。</span><span class="sxs-lookup"><span data-stu-id="7382b-330">RBAC allows inheritance of permissions.</span></span> <span data-ttu-id="7382b-331">分配在父范围内的角色也会将访问权限授予给其中所含的子范围。</span><span class="sxs-lookup"><span data-stu-id="7382b-331">A role assigned at a parent scope also grants access to the children contained within it.</span></span> <span data-ttu-id="7382b-332">使用 RBAC，可以对职责进行分配，仅向用户授予执行作业所需的访问权限。</span><span class="sxs-lookup"><span data-stu-id="7382b-332">Using RBAC, you can segregate duties and grant only the amount of access to users that they need to perform their jobs.</span></span> <span data-ttu-id="7382b-333">例如，使用 RBAC 允许一个员工管理订阅中的虚拟机，而允许另一个员工管理同一订阅中的 SQL DB。</span><span class="sxs-lookup"><span data-stu-id="7382b-333">For example, use RBAC to let one employee manage virtual machines in a subscription, while another can manage SQL DBs within the same subscription.</span></span>
-   <span data-ttu-id="7382b-334">[**VNet 对等互连**][VNetPeering]。</span><span class="sxs-lookup"><span data-stu-id="7382b-334">[**VNet Peering**][VNetPeering].</span></span> <span data-ttu-id="7382b-335">用于创建 VDC 基础结构的基本功能是 VNet 对等互连，它是一种通过 Azure 数据中心网络或跨区域的 Azure 全球主干网络连接同一区域内两个虚拟网络 (VNet) 的机制。</span><span class="sxs-lookup"><span data-stu-id="7382b-335">The fundamental feature used to create the infrastructure of a VDC is VNet Peering, a mechanism that connects two virtual networks (VNets) in the same region through the Azure data center network, or using the Azure world-wide backbone across regions.</span></span>

#### <a name="component-type-perimeter-networks"></a><span data-ttu-id="7382b-336">组件类型：外围网络</span><span class="sxs-lookup"><span data-stu-id="7382b-336">Component Type: Perimeter Networks</span></span>
<span data-ttu-id="7382b-337">[外围网络][DMZ]组件（又称为 DMZ 网络）允许与本地或实际数据中心网络建立连接，并允许与 Internet 建立连接。</span><span class="sxs-lookup"><span data-stu-id="7382b-337">[Perimeter network][DMZ] components (also known as a DMZ network) allow you to provide network  connectivity with your on-premises or physical data center networks, along with any connectivity to and from the Internet.</span></span> <span data-ttu-id="7382b-338">它也是网络和安全团队花费大部分时间的地方。</span><span class="sxs-lookup"><span data-stu-id="7382b-338">It's also where your network and security teams likely spend most of their time.</span></span>

<span data-ttu-id="7382b-339">传入数据包应该在流经中心的安全设备（例如防火墙、IDS 和 IPS）之后才到达辐射中的后端服务器。</span><span class="sxs-lookup"><span data-stu-id="7382b-339">Incoming packets should flow through the security appliances in the hub, such as the firewall, IDS, and IPS, before reaching the back-end servers in the spokes.</span></span> <span data-ttu-id="7382b-340">来自工作负荷的 Internet 绑定数据包也应流经外围网络中的安全设备，经过策略实施、检查和审核之后，才离开网络。</span><span class="sxs-lookup"><span data-stu-id="7382b-340">Internet-bound packets from the workloads should also flow through the security appliances in the perimeter network for policy enforcement, inspection, and auditing purposes, before leaving the network.</span></span>

<span data-ttu-id="7382b-341">外围网络组件提供以下功能：</span><span class="sxs-lookup"><span data-stu-id="7382b-341">Perimeter network components provide the following features:</span></span>

-   <span data-ttu-id="7382b-342">[虚拟网络][VNet]、[UDR][UDR] 和 [NSG][NSG]</span><span class="sxs-lookup"><span data-stu-id="7382b-342">[Virtual Networks][VNet], [UDR][UDR], [NSG][NSG]</span></span>
-   <span data-ttu-id="7382b-343">[网络虚拟设备][NVA]</span><span class="sxs-lookup"><span data-stu-id="7382b-343">[Network Virtual Appliance][NVA]</span></span>
-   <span data-ttu-id="7382b-344">[负载均衡器][ALB]</span><span class="sxs-lookup"><span data-stu-id="7382b-344">[Load Balancer][ALB]</span></span>
-   <span data-ttu-id="7382b-345">[应用程序网关][AppGW] / [WAF][WAF]</span><span class="sxs-lookup"><span data-stu-id="7382b-345">[Application Gateway][AppGW] / [WAF][WAF]</span></span>
-   <span data-ttu-id="7382b-346">[公共 IP][PIP]</span><span class="sxs-lookup"><span data-stu-id="7382b-346">[Public IPs][PIP]</span></span>

<span data-ttu-id="7382b-347">通常情况下，中心 IT 和安全团队负责外围网络的需求定义和操作。</span><span class="sxs-lookup"><span data-stu-id="7382b-347">Usually, the central IT and security teams have responsibility for requirement definition and operations of the perimeter networks.</span></span>

<span data-ttu-id="7382b-348">[![7]][7]</span><span class="sxs-lookup"><span data-stu-id="7382b-348">[![7]][7]</span></span>

<span data-ttu-id="7382b-349">上方关系图显示通过访问 Internet 和本地网络加强两个外围，这两个外围都位于中心。</span><span class="sxs-lookup"><span data-stu-id="7382b-349">The preceding diagram shows the enforcement of two perimeters with access to the internet and an on-premises network, both resident in the hub.</span></span> <span data-ttu-id="7382b-350">在单个中心内，可以扩展连接到 Internet 的外围网络，通过使用多个 Web 应用程序防火墙 (WAF) 和/或防火墙场支持大量的 LOB。</span><span class="sxs-lookup"><span data-stu-id="7382b-350">In a single hub, the perimeter network to internet can scale up to support large numbers of LOBs, using multiple farms of Web Application Firewalls (WAFs) and/or firewalls.</span></span>

<span data-ttu-id="7382b-351">[**虚拟网络**][VNet] 通常在 VNet 上生成中心，提供多个子网托管不同类型的服务，并通过 NVA、WAF 和 Azure 应用程序网关筛选和检查流入或流出 Internet 的流量。</span><span class="sxs-lookup"><span data-stu-id="7382b-351">[**Virtual Networks**][VNet] The hub is typically built on a VNet with multiple subnets to host the different type of services filtering and inspecting traffic to or from the internet via NVAs, WAFs, and Azure Application Gateways.</span></span>

<span data-ttu-id="7382b-352">[**UDR**][UDR] 客户可以使用 UDR 部署防火墙、IDS/IPS 和其他虚拟设备，并通过这些安全设备路由网络流量，以实施、审核和检查安全边界策略。</span><span class="sxs-lookup"><span data-stu-id="7382b-352">[**UDR**][UDR] Using UDR, customers can deploy firewalls, IDS/IPS, and other virtual appliances, and route network traffic through these security appliances for security boundary policy enforcement, auditing, and inspection.</span></span> <span data-ttu-id="7382b-353">可以同时在中心和分支中创建 UDR，保证流量通过 VDC 使用的特定自定义 VM、网络虚拟设备和负载均衡器传输。</span><span class="sxs-lookup"><span data-stu-id="7382b-353">UDRs can be created in both the hub and the spokes to guarantee that traffic transits through the specific custom VMs, Network Virtual Appliances and load balancers used by the VDC.</span></span> <span data-ttu-id="7382b-354">若要保证由辐射中的 VM 生成的流量传输到正确的虚拟设备，需要通过将内部负载均衡器的前端 IP 地址设置为下一个跃点在辐射的子网中设置 UDR。</span><span class="sxs-lookup"><span data-stu-id="7382b-354">To guarantee that traffic generated from VMs resident in the spoke transit to the correct virtual appliances, a UDR needs to be set in the subnets of the spoke by setting the front-end IP address of the internal load balancer as the next-hop.</span></span> <span data-ttu-id="7382b-355">内部负载均衡器将内部流量分配到虚拟设备（负载均衡器后端池）。</span><span class="sxs-lookup"><span data-stu-id="7382b-355">The internal load balancer distributes the internal traffic to the virtual appliances (load balancer back-end pool).</span></span>

<span data-ttu-id="7382b-356">[![8]][8]</span><span class="sxs-lookup"><span data-stu-id="7382b-356">[![8]][8]</span></span>

<span data-ttu-id="7382b-357">[**网络虚拟设备**][NVA] 在中心内，能访问 Internet 的外围网络通常通过防火墙场和/或 Web 应用程序防火墙 (WAF) 进行管理。</span><span class="sxs-lookup"><span data-stu-id="7382b-357">[**Network Virtual Appliances**][NVA] In the hub, the perimeter network with access to the internet is normally managed through a farm of firewalls and/or Web Application Firewalls (WAFs).</span></span>

<span data-ttu-id="7382b-358">不同的 LOB 通常使用许多 Web 应用程序，这些应用程序易遭受各种漏洞和潜在攻击。</span><span class="sxs-lookup"><span data-stu-id="7382b-358">Different LOBs commonly use many web applications, and these applications tend to suffer from various vulnerabilities and potential exploits.</span></span> <span data-ttu-id="7382b-359">Web 应用程序防火墙是一款特殊产品，相较通用防火墙而言，它能够更深入的检测对 Web 应用程序 (HTTP/HTTPS) 的攻击。</span><span class="sxs-lookup"><span data-stu-id="7382b-359">Web Applications Firewalls are a special breed of product used to detect attacks against web applications (HTTP/HTTPS) in more depth than a generic firewall.</span></span> <span data-ttu-id="7382b-360">与传统防火墙技术相比，WAF 拥有一组用于保护内部 Web 服务器免受威胁的特定功能。</span><span class="sxs-lookup"><span data-stu-id="7382b-360">Compared with tradition firewall technology, WAFs have a set of specific features to protect internal web servers from threats.</span></span>

<span data-ttu-id="7382b-361">防火墙场是一组在同一公共管理下串联工作的防火墙，拥有一组安全规则，用于保护辐射中托管的工作负荷并控制对本地网络的访问权限。</span><span class="sxs-lookup"><span data-stu-id="7382b-361">A firewall farm is group of firewalls working in tandem under the same common administration, with a set of security rules to protect the workloads hosted in the spokes, and control access to on-premises networks.</span></span> <span data-ttu-id="7382b-362">与 WAF 相比，防火墙场的专用软件更少，但应用范围广泛，可以筛选和检查出口和入口的任何流量类型。</span><span class="sxs-lookup"><span data-stu-id="7382b-362">A firewall farm has less specialized software compared with a WAF, but has a broad application scope to filter and inspect any type of traffic in egress and ingress.</span></span> <span data-ttu-id="7382b-363">防火墙场通常通过网络虚拟设备 (NVA) 在 Azure 中实现，Azure 市场提供了这些设备。</span><span class="sxs-lookup"><span data-stu-id="7382b-363">Firewall farms are normally implemented in Azure through Network Virtual Appliances (NVAs), which are available in the Azure marketplace.</span></span>

<span data-ttu-id="7382b-364">建议对源自 Internet 的流量使用一组 NVA，对源自本地的流量使用另一组 NVA。</span><span class="sxs-lookup"><span data-stu-id="7382b-364">It is recommended to use one set of NVAs for traffic originating on the Internet, and another for traffic originating on-premises.</span></span> <span data-ttu-id="7382b-365">若仅对两组网络流量使用一组 NVA，则存在安全风险，因为它不会在两组网络流量之间提供安全外围。</span><span class="sxs-lookup"><span data-stu-id="7382b-365">Using only one set of NVAs for both is a security risk, as it provides no security perimeter between the two sets of network traffic.</span></span> <span data-ttu-id="7382b-366">使用不同 NVA 可以降低检查安全规则的复杂性，并指明哪项规则与哪项传入网络请求对应。</span><span class="sxs-lookup"><span data-stu-id="7382b-366">Using separate NVAs reduces the complexity of checking security rules, and makes it clear which rules correspond to which incoming network request.</span></span>

<span data-ttu-id="7382b-367">大多数大型企业都管理多个域。</span><span class="sxs-lookup"><span data-stu-id="7382b-367">Most large enterprises manage multiple domains.</span></span> <span data-ttu-id="7382b-368">Azure DNS 可以用来托管某个特定域的 DNS 记录。</span><span class="sxs-lookup"><span data-stu-id="7382b-368">Azure DNS can be used to host the DNS records for a particular domain.</span></span> <span data-ttu-id="7382b-369">例如，可以在 Azure DNS 记录的 A 记录中登记 Azure 外部负载均衡器（或 WAF）的虚拟 IP 地址 (VIP)。</span><span class="sxs-lookup"><span data-stu-id="7382b-369">As example, the Virtual IP Address (VIP) of the Azure external load balancer (or the WAFs) can be registered in the A record of an Azure DNS record.</span></span>

<span data-ttu-id="7382b-370">[**Azure 负载均衡器**][ALB] Azure 负载均衡器提供高度可用的第 4 层（TCP 和 UDP）服务，该服务可以在负载均衡集定义的服务实例间分配传入流量。</span><span class="sxs-lookup"><span data-stu-id="7382b-370">[**Azure Load Balancer**][ALB] Azure load balancer offers a high availability Layer 4 (TCP, UDP) service, which can distribute incoming traffic among service instances defined in a load-balanced set.</span></span> <span data-ttu-id="7382b-371">可以将由前端终结点（公共 IP 终结点或专用 IP 终结点）发送到负载均衡器的流量重新分配（通过/不通过地址转换）到一组后端 IP 地址池（如网络虚拟设备或 VM）。</span><span class="sxs-lookup"><span data-stu-id="7382b-371">Traffic sent to the load balancer from front-end endpoints (public IP endpoints or private IP endpoints) can be redistributed with or without address translation to a set of back-end IP address pool (examples being; Network Virtual Appliances or VMs).</span></span>

<span data-ttu-id="7382b-372">Azure 负载均衡器也可以探测各种服务器实例的运行状态，当探测无法响应时，负载均衡器会停止向不正常的实例发送流量。</span><span class="sxs-lookup"><span data-stu-id="7382b-372">Azure Load Balancer can probe the health of the various server instances as well, and when a probe fails to respond the load balancer stops sending traffic to the unhealthy instance.</span></span> <span data-ttu-id="7382b-373">在 VDC 中，中心的外部负载均衡器可以均衡发送到 NVA 的流量，分支中的外部负载均衡器可以执行均衡多层应用程序的不同 VM 之间的流量等任务。</span><span class="sxs-lookup"><span data-stu-id="7382b-373">In a VDC, we have the presence of an external load balancer in the hub (for instance, balance the traffic to NVAs), and in the spokes (to perform tasks like balancing traffic between different VMs of a multitier application).</span></span>

<span data-ttu-id="7382b-374">[**应用程序网关**][AppGW] Microsoft Azure 应用程序网关是一个专用的虚拟设备，以服务形式提供应用程序传送控制器 (ADC)，并为应用程序提供各种第 7 层负载均衡功能。</span><span class="sxs-lookup"><span data-stu-id="7382b-374">[**Application Gateway**][AppGW] Microsoft Azure Application Gateway is a dedicated virtual appliance providing application delivery controller (ADC) as a service, offering various layer 7 load balancing capabilities for your application.</span></span> <span data-ttu-id="7382b-375">可以用它将 CPU 密集型 SSL 终点卸载到应用程序网关，优化 Web 场工作效率。</span><span class="sxs-lookup"><span data-stu-id="7382b-375">It allows you to optimize web farm productivity by offloading CPU intensive SSL termination to the application gateway.</span></span> <span data-ttu-id="7382b-376">它还提供其他第 7 层路由功能，包括传入流量的轮循机制分配、基于 Cookie 的会话相关性、基于 URL 路径的路由，以及在单个应用程序网关后面托管多个网站的能力。</span><span class="sxs-lookup"><span data-stu-id="7382b-376">It also provides other layer 7 routing capabilities including round robin distribution of incoming traffic, cookie-based session affinity, URL path-based routing, and the ability to host multiple websites behind a single Application Gateway.</span></span> <span data-ttu-id="7382b-377">Web 应用程序防火墙 (WAF) 也作为 WAF SKU 应用程序网关的一部分提供。</span><span class="sxs-lookup"><span data-stu-id="7382b-377">A web application firewall (WAF) is also provided as part of the application gateway WAF SKU.</span></span> <span data-ttu-id="7382b-378">此 SKU 可保护 Web 应用程序免受 Web 常见漏洞和攻击的影响。</span><span class="sxs-lookup"><span data-stu-id="7382b-378">This SKU provides protection to web applications from common web vulnerabilities and exploits.</span></span> <span data-ttu-id="7382b-379">可以将应用程序网关配置为面向 Internet 的网关、仅内部网关或这两者的组合。</span><span class="sxs-lookup"><span data-stu-id="7382b-379">Application Gateway can be configured as internet facing gateway, internal only gateway, or a combination of both.</span></span> 

<span data-ttu-id="7382b-380">[**公共 IP**][PIP] 可以通过一些 Azure 功能将服务终结点关联到允许从 Internet 访问资源的公共 IP 地址。</span><span class="sxs-lookup"><span data-stu-id="7382b-380">[**Public IPs**][PIP] Some Azure features enable you to associate service endpoints to a public IP address that allows to your resource to be accessed from the internet.</span></span> <span data-ttu-id="7382b-381">该终结点使用网络地址转换 (NAT) 将流量路由到 Azure 虚拟网络上的内部地址和端口。</span><span class="sxs-lookup"><span data-stu-id="7382b-381">This endpoint uses Network Address Translation (NAT) to route traffic to the internal address and port on the Azure virtual network.</span></span> <span data-ttu-id="7382b-382">此路径是外部流量进入虚拟网络的主要方式。</span><span class="sxs-lookup"><span data-stu-id="7382b-382">This path is the primary way for external traffic to pass into the virtual network.</span></span> <span data-ttu-id="7382b-383">可以对公共 IP 地址进行配置，确定可以传入哪种流量、如何在虚拟网络上转换该流量以及要将它路由到何处。</span><span class="sxs-lookup"><span data-stu-id="7382b-383">The Public IP addresses can be configured to determine which traffic is passed in, and how and where it's translated on to the virtual network.</span></span>

#### <a name="component-type-monitoring"></a><span data-ttu-id="7382b-384">组件类型：监视</span><span class="sxs-lookup"><span data-stu-id="7382b-384">Component type: Monitoring</span></span>
<span data-ttu-id="7382b-385">监视组件可以监视所有其他组件类型并报警。</span><span class="sxs-lookup"><span data-stu-id="7382b-385">Monitoring components provide visibility and alerting from all the other components types.</span></span> <span data-ttu-id="7382b-386">所有团队都应有权监视他们有权访问的组件和服务。</span><span class="sxs-lookup"><span data-stu-id="7382b-386">All teams should have access to monitoring for the components and services they have access to.</span></span> <span data-ttu-id="7382b-387">如果拥有中心化支持人员或操作团队，他们需要对这些组件提供的数据拥有集成访问权限。</span><span class="sxs-lookup"><span data-stu-id="7382b-387">If you have a centralized help desk or operations teams, they would need to have integrated access to the data provided by these components.</span></span>

<span data-ttu-id="7382b-388">Azure 提供不同类型的记录和监视服务，跟踪 Azure 托管资源的行为。</span><span class="sxs-lookup"><span data-stu-id="7382b-388">Azure offers different types of logging and monitoring services to track the behavior of Azure hosted resources.</span></span> <span data-ttu-id="7382b-389">对 Azure 中工作负荷的管理和控制不仅只基于收集日志数据，也基于根据特定报告事件触发操作的能力。</span><span class="sxs-lookup"><span data-stu-id="7382b-389">Governance and control of workloads in Azure is based not just on collecting log data, but also the ability to trigger actions based on specific reported events.</span></span>

<span data-ttu-id="7382b-390">[**Azure Monitor**][Monitor] - Azure 包括多项可以在监视空间单独执行特定角色或任务的服务。</span><span class="sxs-lookup"><span data-stu-id="7382b-390">[**Azure Monitor**][Monitor] - Azure includes multiple services that individually perform a specific role or task in the monitoring space.</span></span> <span data-ttu-id="7382b-391">这些服务组合在一起就可以提供一个全面的解决方案，用于从应用程序以及支持应用程序的 Azure 资源收集遥测数据，对这些数据进行分析并执行操作。</span><span class="sxs-lookup"><span data-stu-id="7382b-391">Together, these services deliver a comprehensive solution for collecting, analyzing, and acting on telemetry from your application and the Azure resources that support them.</span></span> <span data-ttu-id="7382b-392">这些服务还监视关键的本地资源，以提供混合监视环境。</span><span class="sxs-lookup"><span data-stu-id="7382b-392">They can also work to monitor critical on-premises resources in order to provide a hybrid monitoring environment.</span></span> <span data-ttu-id="7382b-393">为应用程序开发完整监视策略的第一步是了解可用的工具和数据。</span><span class="sxs-lookup"><span data-stu-id="7382b-393">Understanding the tools and data that are available is the first step in developing a complete monitoring strategy for your application.</span></span>

<span data-ttu-id="7382b-394">Azure 中主要有两种日志类型：</span><span class="sxs-lookup"><span data-stu-id="7382b-394">There are two major types of logs in Azure:</span></span>

-   <span data-ttu-id="7382b-395">[**活动日志**][ActLog]（也称为“运行日志”）提供相关信息，方便用户了解对 Azure 订阅中的资源执行的操作。</span><span class="sxs-lookup"><span data-stu-id="7382b-395">[**Activity Logs**][ActLog] (referred also as "Operational Log") provide insight into the operations that were performed on resources in the Azure subscription.</span></span> <span data-ttu-id="7382b-396">这些日志报告订阅的控制平面事件。</span><span class="sxs-lookup"><span data-stu-id="7382b-396">These logs report the control-plane events for your subscriptions.</span></span> <span data-ttu-id="7382b-397">每个 Azure 资源都会生成审核日志。</span><span class="sxs-lookup"><span data-stu-id="7382b-397">Every Azure resource produces audit logs.</span></span>

-   <span data-ttu-id="7382b-398">[**Azure 诊断日志**][DiagLog]是资源生成的日志，记录与该资源的操作相关的各种频繁生成的数据。</span><span class="sxs-lookup"><span data-stu-id="7382b-398">[**Azure Diagnostic Logs**][DiagLog] are logs generated by a resource that provide rich, frequent data about the operation of that resource.</span></span> <span data-ttu-id="7382b-399">这些日志的内容因资源类型而异。</span><span class="sxs-lookup"><span data-stu-id="7382b-399">The content of these logs varies by resource type.</span></span>

<span data-ttu-id="7382b-400">[![9]][9]</span><span class="sxs-lookup"><span data-stu-id="7382b-400">[![9]][9]</span></span>

<span data-ttu-id="7382b-401">在 VDC 中，跟踪 NSG 日志极其重要，尤其是以下信息：</span><span class="sxs-lookup"><span data-stu-id="7382b-401">In a VDC, it is extremely important to track the NSGs logs, particularly this information:</span></span>

-   <span data-ttu-id="7382b-402">[**事件日志**][NSGLog]：提供根据 MAC 地址向 VM 和实例角色应用的 NSG 规则的相关信息。</span><span class="sxs-lookup"><span data-stu-id="7382b-402">[**Event logs**][NSGLog]: provides information on what NSG rules are applied to VMs and instance roles based on MAC address.</span></span>
-   <span data-ttu-id="7382b-403">[**计数器日志**][NSGLog]：跟踪每个 NSG 规则拒绝或允许流量的执行次数。</span><span class="sxs-lookup"><span data-stu-id="7382b-403">[**Counter logs**][NSGLog]: tracks how many times each NSG rule was executed to deny or allow traffic.</span></span>

<span data-ttu-id="7382b-404">所有日志都可以存储在 Azure 存储帐户中，以便进行审核、静态分析或备份。</span><span class="sxs-lookup"><span data-stu-id="7382b-404">All logs can be stored in Azure Storage Accounts for audit, static analysis, or backup purposes.</span></span> <span data-ttu-id="7382b-405">日志存储在 Azure 存储帐户时，客户可以对该数据使用不同类型的框架进行检索、准备、分析和可视化操作，以报告云资源的状态和运行状况。</span><span class="sxs-lookup"><span data-stu-id="7382b-405">When the logs are stored in an Azure storage account, customers can use different types of frameworks to retrieve, prep, analyze, and visualize this data to report the status and health of cloud resources.</span></span>

<span data-ttu-id="7382b-406">大型企业应该已经获取到用于监视本地系统的标准框架，并可以扩展该框架以集成云部署生成的日志。</span><span class="sxs-lookup"><span data-stu-id="7382b-406">Large enterprises should already have acquired a standard framework for monitoring on-premises systems and can extend that framework to integrate logs generated by cloud deployments.</span></span> <span data-ttu-id="7382b-407">对于希望将所有日志记录保留在云中的组织，[Log Analytics][../log-analytics/log-analytics-overview .md] 是一个不错的选择。</span><span class="sxs-lookup"><span data-stu-id="7382b-407">For organizations that wish to keep all the logging in the cloud, [Log Analytics][../log-analytics/log-analytics-overview .md] is a great choice.</span></span> <span data-ttu-id="7382b-408">由于 Log Analytics 作为基于云的服务实现，因此在基础结构服务上进行极低的投资即可快速使其启动并运行。</span><span class="sxs-lookup"><span data-stu-id="7382b-408">Since Log Analytics is implemented as a cloud-based service, you can have it up and running quickly with minimal investment in infrastructure services.</span></span> <span data-ttu-id="7382b-409">Log Analytics 还可与 System Center Operations Manager 等 System Center 组件集成，将现有管理投资扩展到云。</span><span class="sxs-lookup"><span data-stu-id="7382b-409">Log Analytics can also integrate with System Center components such as System Center Operations Manager to extend your existing management investments into the cloud.</span></span>

<span data-ttu-id="7382b-410">Log Analytics 是 Azure 中的一个服务，可帮助收集、关联、搜索以及处理由操作系统、应用程序和基础结构云组件生成的日志和性能数据。</span><span class="sxs-lookup"><span data-stu-id="7382b-410">Log Analytics is a service in Azure that helps collect, correlate, search, and act on log and performance data generated by operating systems, applications, and infrastructure cloud components.</span></span> <span data-ttu-id="7382b-411">使用集成搜索和自定义仪表板为客户提供实时操作见解，分析 VDC 中所有工作负荷的所有记录。</span><span class="sxs-lookup"><span data-stu-id="7382b-411">It gives customers real-time operational insights using integrated search and custom dashboards to analyze all the records across all your workloads in a VDC.</span></span>

<span data-ttu-id="7382b-412">OMS 中的[网络性能监视器 (NPM)][NPM] 解决方案提供详细的端到端网络信息，包括以单个视图的方式来显示 Azure 网络和本地网络。</span><span class="sxs-lookup"><span data-stu-id="7382b-412">The [Network Performance Monitor (NPM)][NPM] solution inside OMS can provide detailed network information end-to-end, including a single view of your Azure networks and on-premises networks.</span></span> <span data-ttu-id="7382b-413">使用特定的适用于 ExpressRoute 和公共服务的监视器。</span><span class="sxs-lookup"><span data-stu-id="7382b-413">With specific monitors for ExpressRoute and public services.</span></span>

#### <a name="component-type-workloads"></a><span data-ttu-id="7382b-414">组件类型：工作负荷</span><span class="sxs-lookup"><span data-stu-id="7382b-414">Component type: Workloads</span></span>
<span data-ttu-id="7382b-415">工作负荷组件是实际应用程序和服务所在的位置。</span><span class="sxs-lookup"><span data-stu-id="7382b-415">Workload components are where your actual applications and services reside.</span></span> <span data-ttu-id="7382b-416">它也是应用程序开发团队花费大部分时间的地方。</span><span class="sxs-lookup"><span data-stu-id="7382b-416">It's also where your application development teams spend most of their time.</span></span>

<span data-ttu-id="7382b-417">工作负荷的可能性是无限的。</span><span class="sxs-lookup"><span data-stu-id="7382b-417">The workload possibilities are truly endless.</span></span> <span data-ttu-id="7382b-418">以下是几种可能的工作负荷类型：</span><span class="sxs-lookup"><span data-stu-id="7382b-418">The following are just a few of the possible workload types:</span></span>

<span data-ttu-id="7382b-419">**内部 LOB 应用程序**</span><span class="sxs-lookup"><span data-stu-id="7382b-419">**Internal LOB Applications**.</span></span> <span data-ttu-id="7382b-420">业务线应用程序是对企业的日常运营十分重要的计算机应用程序。</span><span class="sxs-lookup"><span data-stu-id="7382b-420">Line-of-business applications are computer applications critical to the ongoing operation of an enterprise.</span></span> <span data-ttu-id="7382b-421">LOB 应用程序具有以下常见特征：</span><span class="sxs-lookup"><span data-stu-id="7382b-421">LOB applications have some common characteristics:</span></span>

-   <span data-ttu-id="7382b-422">**交互性**。</span><span class="sxs-lookup"><span data-stu-id="7382b-422">**Interactive**.</span></span> <span data-ttu-id="7382b-423">LOB 应用程序本身具有交互性：输入数据，然后返回结果/报告。</span><span class="sxs-lookup"><span data-stu-id="7382b-423">LOB applications are interactive by nature: data is entered, and result/reports are returned.</span></span>
-   <span data-ttu-id="7382b-424">**数据驱动**。</span><span class="sxs-lookup"><span data-stu-id="7382b-424">**Data driven**.</span></span> <span data-ttu-id="7382b-425">LOB 应用程序是数据密集型应用程序，频繁访问数据库或其他存储。</span><span class="sxs-lookup"><span data-stu-id="7382b-425">LOB applications are data intensive with frequent access to the databases or other storage.</span></span>
-   <span data-ttu-id="7382b-426">**集成性**。</span><span class="sxs-lookup"><span data-stu-id="7382b-426">**Integrated**.</span></span> <span data-ttu-id="7382b-427">LOB 应用程序可与组织内外的其他系统集成。</span><span class="sxs-lookup"><span data-stu-id="7382b-427">LOB applications offer integration with other systems within or outside the organization.</span></span>

<span data-ttu-id="7382b-428">**面向客户的网站（面向 Internet 或内部）**。</span><span class="sxs-lookup"><span data-stu-id="7382b-428">**Customer facing web sites (Internet or Internal facing)**.</span></span> <span data-ttu-id="7382b-429">与 Internet 交互的大多数应用程序是网站。</span><span class="sxs-lookup"><span data-stu-id="7382b-429">Most applications that interact with the Internet are web sites.</span></span> <span data-ttu-id="7382b-430">Azure 提供在 IaaS VM 上或从 [Azure Web 应用][WebApps]站点 (PaaS) 运行网站的功能。</span><span class="sxs-lookup"><span data-stu-id="7382b-430">Azure offers the capability to run a web site on an IaaS VM or from an [Azure Web Apps][WebApps] site (PaaS).</span></span> <span data-ttu-id="7382b-431">Azure Web 应用支持与允许在 VDC 的分支中部署 Web 应用的 VNet 集成。</span><span class="sxs-lookup"><span data-stu-id="7382b-431">Azure Web Apps support integration with VNets that allow the deployment of the Web Apps in the spoke of a VDC.</span></span> <span data-ttu-id="7382b-432">以面向内部的网站为例，通过 VNet 集成，便不需要向应用程序公开 Internet 终结点，但可以改为从专用 VNet 通过专用非 Internet 可路由地址来使用资源。</span><span class="sxs-lookup"><span data-stu-id="7382b-432">When looking at internal facing web sites, with the VNET integration, you don't need to expose an Internet endpoint for your applications but can use the resources via private non-internet routable addresses from your private VNet instead.</span></span>

<span data-ttu-id="7382b-433">**大数据/分析** 当数据需要增加到极大的量时，数据库可能无法正常增加。</span><span class="sxs-lookup"><span data-stu-id="7382b-433">**Big Data/Analytics** When data needs to scale up to a very large volume, databases may not scale up properly.</span></span> <span data-ttu-id="7382b-434">Hadoop 技术提供可在大量节点上并行运行所分配查询的系统。</span><span class="sxs-lookup"><span data-stu-id="7382b-434">Hadoop technology offers a system to run distributed queries in parallel on large number of nodes.</span></span> <span data-ttu-id="7382b-435">客户可以选择在 IaaS VM 或 PaaS ([HDInsight][HDI]) 中运行数据工作负荷。</span><span class="sxs-lookup"><span data-stu-id="7382b-435">Customers have the option to run data workloads in IaaS VMs or PaaS ([HDInsight][HDI]).</span></span> <span data-ttu-id="7382b-436">HDInsight 支持部署到基于位置的 VNet，可以部署到 VDC 分支中的群集。</span><span class="sxs-lookup"><span data-stu-id="7382b-436">HDInsight supports deploying into a location-based VNet, can be deployed to a cluster in a spoke of the VDC.</span></span>

<span data-ttu-id="7382b-437">**事件和消息传送**。</span><span class="sxs-lookup"><span data-stu-id="7382b-437">**Events and Messaging**.</span></span> <span data-ttu-id="7382b-438">[Azure 事件中心][EventHubs]是超大规模的遥测引入服务，可收集、传输和存储数百万的事件。</span><span class="sxs-lookup"><span data-stu-id="7382b-438">[Azure Event Hubs][EventHubs] is a hyper-scale telemetry ingestion service that collects, transforms, and stores millions of events.</span></span> <span data-ttu-id="7382b-439">作为分布式流式处理平台，它提供低延迟和可配置的保留时间，使用户可以将大量遥测数据引入到 Azure 中，并从多个应用程序中读取数据。</span><span class="sxs-lookup"><span data-stu-id="7382b-439">As a distributed streaming platform, it offers low latency and configurable time retention, enabling you to ingest massive amounts of telemetry into Azure and read that data from multiple applications.</span></span> <span data-ttu-id="7382b-440">通过事件中心，单个流可以同时支持实时管道和基于批处理的管道。</span><span class="sxs-lookup"><span data-stu-id="7382b-440">With Event Hubs, a single stream can support both real-time and batch-based pipelines.</span></span>

<span data-ttu-id="7382b-441">应用程序与服务之间的高度可靠云消息传递服务可以通过 [Azure 服务总线][ServiceBus]实现，该服务总线提供客户端和服务器之间的异步中转消息传送、结构化先进先出 (FIFO) 消息传送和发布/订阅能力。</span><span class="sxs-lookup"><span data-stu-id="7382b-441">A highly reliable cloud messaging service between applications and services, can be implemented through [Azure Service Bus][ServiceBus] that offers asynchronous brokered messaging between client and server, along with structured first-in-first-out (FIFO) messaging and publish/subscribe capabilities.</span></span>

<span data-ttu-id="7382b-442">[![10]][10]</span><span class="sxs-lookup"><span data-stu-id="7382b-442">[![10]][10]</span></span>

### <a name="multiple-vdc"></a><span data-ttu-id="7382b-443">多个 VDC</span><span class="sxs-lookup"><span data-stu-id="7382b-443">Multiple VDC</span></span>
<span data-ttu-id="7382b-444">到目前为止，本文围绕单个 VDC 介绍了构成可复原 VDC 的基本组件和体系结构。</span><span class="sxs-lookup"><span data-stu-id="7382b-444">So far, this article has focused on a single VDC, describing the basic components and architecture that contribute to a resilient VDC.</span></span> <span data-ttu-id="7382b-445">Azure 功能（如 Azure 负载均衡器、NVA、可用性集、规模集和其他机制）构成一个允许在生产服务中生成稳定 SLA 级别的系统。</span><span class="sxs-lookup"><span data-stu-id="7382b-445">Azure features such as Azure load balancer, NVAs, availability sets, scale sets, along with other mechanisms contribute to a system that allow you to build solid SLA levels into your production services.</span></span>

<span data-ttu-id="7382b-446">然而，单个 VDC 托管在单个区域中，易受到可能影响整个区域的重大故障的影响。</span><span class="sxs-lookup"><span data-stu-id="7382b-446">However, a single VDC is hosted within a single region, and is vulnerable to major outage that might affect that entire region.</span></span> <span data-ttu-id="7382b-447">希望实现高 SLA 级别的客户需要通过在位于不同区域的两个（或更多）VDC 中部署相同的项目来保护服务。</span><span class="sxs-lookup"><span data-stu-id="7382b-447">Customers that want to achieve high SLAs need to protect the services through deployments of the same project in two (or more) VDCs, placed in different regions.</span></span>

<span data-ttu-id="7382b-448">除了 SLA 问题之外，以下几种常见情形也可以部署多个 VDC：</span><span class="sxs-lookup"><span data-stu-id="7382b-448">In addition to SLA concerns, there are several common scenarios where deploying multiple VDCs makes sense:</span></span>

-   <span data-ttu-id="7382b-449">区域/全球影响力</span><span class="sxs-lookup"><span data-stu-id="7382b-449">Regional/Global presence</span></span>
-   <span data-ttu-id="7382b-450">灾难恢复</span><span class="sxs-lookup"><span data-stu-id="7382b-450">Disaster Recovery</span></span>
-   <span data-ttu-id="7382b-451">在 DC 之间转移流量的机制</span><span class="sxs-lookup"><span data-stu-id="7382b-451">Mechanism to divert traffic between DC</span></span>

#### <a name="regionalglobal-presence"></a><span data-ttu-id="7382b-452">区域/全球影响力</span><span class="sxs-lookup"><span data-stu-id="7382b-452">Regional/global presence</span></span>
<span data-ttu-id="7382b-453">Azure 数据中心遍布世界各地。</span><span class="sxs-lookup"><span data-stu-id="7382b-453">Azure data centers are present in numerous regions worldwide.</span></span> <span data-ttu-id="7382b-454">选择多个 Azure 数据中心时，客户需要考虑两个相关因素：地理距离和延迟。</span><span class="sxs-lookup"><span data-stu-id="7382b-454">When selecting multiple Azure data centers, customers need to consider two related factors: geographical distances and latency.</span></span> <span data-ttu-id="7382b-455">客户需要评估 VDC 之间的地理距离以及 VDC 和最终用户之间的距离，从而获得最佳用户体验。</span><span class="sxs-lookup"><span data-stu-id="7382b-455">Customers need to evaluate the geographical distance between the VDCs and  the distance between the VDC and the end users, to offer the best user experience.</span></span>

<span data-ttu-id="7382b-456">托管 VDC 的 Azure 区域也需要符合由所在组织所属的任何法律管辖区域制定的法规要求。</span><span class="sxs-lookup"><span data-stu-id="7382b-456">The Azure Region where VDCs are hosted also need to conform with regulatory requirements established by any legal jurisdiction under which your organization operates.</span></span>

#### <a name="disaster-recovery"></a><span data-ttu-id="7382b-457">灾难恢复</span><span class="sxs-lookup"><span data-stu-id="7382b-457">Disaster recovery</span></span>
<span data-ttu-id="7382b-458">灾难恢复计划的实现与所涉及的工作负荷类型以及同步不同 VDC 之间工作负荷状态的能力紧密相关。</span><span class="sxs-lookup"><span data-stu-id="7382b-458">The implementation of a disaster recovery plan is strongly related to the type of workload concerned, and the ability to synchronize the workload state between different VDCs.</span></span> <span data-ttu-id="7382b-459">理想情况下，大多数客户希望同步在两个不同 VDC 中运行的部署之间的应用程序数据，从而快速实现故障转移机制。</span><span class="sxs-lookup"><span data-stu-id="7382b-459">Ideally, most customers want to synchronize application data between deployments running in two different VDCs to implement a fast fail-over mechanism.</span></span> <span data-ttu-id="7382b-460">大多数应用程序易受延迟影响，这可能在数据同步时导致潜在超时和延迟。</span><span class="sxs-lookup"><span data-stu-id="7382b-460">Most applications are sensitive to latency, and that can cause potential timeout and delay in data synchronization.</span></span>

<span data-ttu-id="7382b-461">对不同 VDC 中应用程序的同步性和检测信号的监视需要在不同 VDC 之间建立通信。</span><span class="sxs-lookup"><span data-stu-id="7382b-461">Synchronization or heartbeat monitoring of applications in different VDCs requires communication between them.</span></span> <span data-ttu-id="7382b-462">可以通过以下方式连接不同区域中的两个 VDC：</span><span class="sxs-lookup"><span data-stu-id="7382b-462">Two VDCs in different regions can be connected through:</span></span>

-   <span data-ttu-id="7382b-463">VNet 对等互连 - VNet 对等互连可以跨区域连接多个中心</span><span class="sxs-lookup"><span data-stu-id="7382b-463">VNet Peering - VNet Peering can connect hubs across regions</span></span>
-   <span data-ttu-id="7382b-464">当 VDC 中心连接到同一 ExpressRoute 线路时使用 ExpressRoute 专用对等互连</span><span class="sxs-lookup"><span data-stu-id="7382b-464">ExpressRoute private peering when the VDC hubs are connected to the same ExpressRoute circuit</span></span>
-   <span data-ttu-id="7382b-465">通过企业主干和连接到 ExpressRoute 线路的 VDC 对等网格连接多个 ExpressRoute 线路</span><span class="sxs-lookup"><span data-stu-id="7382b-465">multiple ExpressRoute circuits connected via your corporate backbone and your VDC mesh connected to the ExpressRoute circuits</span></span>
-   <span data-ttu-id="7382b-466">在每个 Azure 区域中的 VDC 中心建立站点到站点 VPN 连接</span><span class="sxs-lookup"><span data-stu-id="7382b-466">Site-to-Site VPN connections between your VDC hubs in each Azure Region</span></span>

<span data-ttu-id="7382b-467">通常情况下，VNet 对等互连或 ExpressRoute 连接是首选机制，因为通过 Microsoft 主干传输时具有更高的带宽和一致性延迟。</span><span class="sxs-lookup"><span data-stu-id="7382b-467">Usually VNet Peering or ExpressRoute connections are the preferred mechanism due higher bandwidth and consistent latency when transiting through the Microsoft backbone.</span></span>

<span data-ttu-id="7382b-468">没有魔法秘诀来验证在不同区域中的两个（或多个）不同 VDC 之间分配的应用程序。</span><span class="sxs-lookup"><span data-stu-id="7382b-468">There is no magic recipe to validate an application distributed between two (or more) different VDCs located in different regions.</span></span> <span data-ttu-id="7382b-469">客户应通过运行网络资格测试来验证连接的延迟和带宽，检查同步或异步数据复制是否合适，以及确定工作负荷的最佳恢复时间目标 (RTO)。</span><span class="sxs-lookup"><span data-stu-id="7382b-469">Customers should run network qualification tests to verify the latency and bandwidth of the connections and target whether synchronous or asynchronous data replication is appropriate and what the optimal recovery time objective (RTO) can be for your workloads.</span></span>

#### <a name="mechanism-to-divert-traffic-between-dc"></a><span data-ttu-id="7382b-470">在 DC 之间转移流量的机制</span><span class="sxs-lookup"><span data-stu-id="7382b-470">Mechanism to divert traffic between DC</span></span>
<span data-ttu-id="7382b-471">将传入一个 DC 的流量转移到另一个 DC 的有效方法是基于 DNS。</span><span class="sxs-lookup"><span data-stu-id="7382b-471">One effective technique to divert the traffic incoming in one DC to another is based on DNS.</span></span> <span data-ttu-id="7382b-472">[Azure 流量管理器][TM]使用域名系统 (DNS) 机制将最终用户的流量转移到特定 VDC 中最合适的公共终结点。</span><span class="sxs-lookup"><span data-stu-id="7382b-472">[Azure Traffic Manager][TM] uses the Domain Name System (DNS) mechanism to direct the end-user traffic to the most appropriate public endpoint in a specific VDC.</span></span> <span data-ttu-id="7382b-473">通过探测，流量管理器可以定期检查不同 VDC 中公共终结点的服务运行状况，如果这些终结点出现故障，流量管理器将自动路由到辅助 VDC。</span><span class="sxs-lookup"><span data-stu-id="7382b-473">Through probes, Traffic Manager periodically checks the service health of public endpoints in different VDCs and, in case of failure of those endpoints, it routes automatically to the secondary VDC.</span></span>

<span data-ttu-id="7382b-474">流量管理器适用于 Azure 公共终结点，可以使用它将流量控制/转移到合适的 VDC 中的 Azure VM 和 Web 应用。</span><span class="sxs-lookup"><span data-stu-id="7382b-474">Traffic Manager works on Azure public endpoints and can be used, for example, to control/divert traffic to Azure VMs and Web Apps in the appropriate VDC.</span></span> <span data-ttu-id="7382b-475">流量管理器具有复原能力，即使整个 Azure 区域出现故障，它仍可以基于多个标准（例如，特定 VDC 中出现服务故障，或选择对客户端拥有最低网络延迟的 VDC）控制不同 VDC 中服务终结点的用户流量分配。</span><span class="sxs-lookup"><span data-stu-id="7382b-475">Traffic Manager is resilient even in the face of an entire Azure region failing and can control the distribution of user traffic for service endpoints in different VDCs based on several criteria (for instance, failure of a service in a specific VDC, or selecting the VDC with the lowest network latency for the client).</span></span>

### <a name="conclusion"></a><span data-ttu-id="7382b-476">结束语</span><span class="sxs-lookup"><span data-stu-id="7382b-476">Conclusion</span></span>
<span data-ttu-id="7382b-477">虚拟数据中心是使用一系列功能和能力将数据中心迁移到云的方法，在 Azure 中创建可缩放的体系结构，最大程度地使用云资源、降低成本和简化系统管理。</span><span class="sxs-lookup"><span data-stu-id="7382b-477">The Virtual Data Center is an approach to data center migration into the cloud that uses a combination of features and capabilities to create a scalable architecture in Azure that maximizes cloud resource use, reducing costs, and simplifying system governance.</span></span> <span data-ttu-id="7382b-478">VDC 概念基于中心辐射型拓扑，在中心提供常见的共享服务并允许分支中存在特定的应用程序/工作负荷。</span><span class="sxs-lookup"><span data-stu-id="7382b-478">The VDC concept is based on a hub-spokes topology, providing common shared services in the hub and allowing specific applications/workloads in the spokes.</span></span> <span data-ttu-id="7382b-479">VDC 与企业角色的结构匹配，在该结构中，不同部门（中心 IT、DevOps、操作和维护部门）共同合作，每个部门拥有特定的角色和责任。</span><span class="sxs-lookup"><span data-stu-id="7382b-479">A VDC matches the structure of company roles, where different departments (Central IT, DevOps, operation and maintenance) work together, each with a specific list of roles and duties.</span></span> <span data-ttu-id="7382b-480">VDC 满足“直接迁移”的需求，也为本机云部署带来众多优势。</span><span class="sxs-lookup"><span data-stu-id="7382b-480">A VDC satisfies the requirements for a "Lift and Shift" migration, but also provides many advantages to native cloud deployments.</span></span>

## <a name="references"></a><span data-ttu-id="7382b-481">参考</span><span class="sxs-lookup"><span data-stu-id="7382b-481">References</span></span>
<span data-ttu-id="7382b-482">本文档中讨论了以下功能。</span><span class="sxs-lookup"><span data-stu-id="7382b-482">The following features were discussed in this document.</span></span> <span data-ttu-id="7382b-483">单击链接以了解更多信息。</span><span class="sxs-lookup"><span data-stu-id="7382b-483">Click the links to learn more.</span></span>

| | | |
|-|-|-|
|<span data-ttu-id="7382b-484">网络功能</span><span class="sxs-lookup"><span data-stu-id="7382b-484">Network Features</span></span>|<span data-ttu-id="7382b-485">负载均衡</span><span class="sxs-lookup"><span data-stu-id="7382b-485">Load Balancing</span></span>|<span data-ttu-id="7382b-486">连接</span><span class="sxs-lookup"><span data-stu-id="7382b-486">Connectivity</span></span>|
|<span data-ttu-id="7382b-487">[Azure 虚拟网络][VNet]</span><span class="sxs-lookup"><span data-stu-id="7382b-487">[Azure Virtual Networks][VNet]</span></span></br><span data-ttu-id="7382b-488">[网络安全组][NSG]</span><span class="sxs-lookup"><span data-stu-id="7382b-488">[Network Security Groups][NSG]</span></span></br><span data-ttu-id="7382b-489">[NSG 日志][NSGLog]</span><span class="sxs-lookup"><span data-stu-id="7382b-489">[NSG Logs][NSGLog]</span></span></br><span data-ttu-id="7382b-490">[用户定义的路由][UDR]</span><span class="sxs-lookup"><span data-stu-id="7382b-490">[User Defined Routing][UDR]</span></span></br><span data-ttu-id="7382b-491">[网络虚拟设备][NVA]</span><span class="sxs-lookup"><span data-stu-id="7382b-491">[Network Virtual Appliances][NVA]</span></span></br><span data-ttu-id="7382b-492">[公共 IP 地址][PIP]</span><span class="sxs-lookup"><span data-stu-id="7382b-492">[Public IP Addresses][PIP]</span></span></br><span data-ttu-id="7382b-493">[DNS]</span><span class="sxs-lookup"><span data-stu-id="7382b-493">[DNS]</span></span>|<span data-ttu-id="7382b-494">[Azure 负载均衡器 (L3)][ALB]</span><span class="sxs-lookup"><span data-stu-id="7382b-494">[Azure Load Balancer (L3) ][ALB]</span></span></br><span data-ttu-id="7382b-495">[应用程序网关 (L7)][AppGW]</span><span class="sxs-lookup"><span data-stu-id="7382b-495">[Application Gateway (L7) ][AppGW]</span></span></br><span data-ttu-id="7382b-496">[Web 应用程序防火墙][WAF]</span><span class="sxs-lookup"><span data-stu-id="7382b-496">[Web Application Firewall][WAF]</span></span></br><span data-ttu-id="7382b-497">[Azure 流量管理器][TM]</span><span class="sxs-lookup"><span data-stu-id="7382b-497">[Azure Traffic Manager][TM]</span></span> |<span data-ttu-id="7382b-498">[VNet 对等互连][VNetPeering]</span><span class="sxs-lookup"><span data-stu-id="7382b-498">[VNet Peering][VNetPeering]</span></span></br><span data-ttu-id="7382b-499">[虚拟专用网络][VPN]</span><span class="sxs-lookup"><span data-stu-id="7382b-499">[Virtual Private Network][VPN]</span></span></br><span data-ttu-id="7382b-500">[ExpressRoute][ExR]</span><span class="sxs-lookup"><span data-stu-id="7382b-500">[ExpressRoute][ExR]</span></span>
|<span data-ttu-id="7382b-501">标识</span><span class="sxs-lookup"><span data-stu-id="7382b-501">Identity</span></span></br>|<span data-ttu-id="7382b-502">监视</span><span class="sxs-lookup"><span data-stu-id="7382b-502">Monitoring</span></span></br>|<span data-ttu-id="7382b-503">最佳实践</span><span class="sxs-lookup"><span data-stu-id="7382b-503">Best Practices</span></span></br>|
|<span data-ttu-id="7382b-504">[Azure Active Directory][AAD]</span><span class="sxs-lookup"><span data-stu-id="7382b-504">[Azure Active Directory][AAD]</span></span></br><span data-ttu-id="7382b-505">[多重身份验证][MFA]</span><span class="sxs-lookup"><span data-stu-id="7382b-505">[Multi-Factor Authentication][MFA]</span></span></br><span data-ttu-id="7382b-506">[基于角色的访问控制][RBAC]</span><span class="sxs-lookup"><span data-stu-id="7382b-506">[Role Base Access Controls][RBAC]</span></span></br><span data-ttu-id="7382b-507">[默认 AAD 角色][Roles]</span><span class="sxs-lookup"><span data-stu-id="7382b-507">[Default AAD Roles][Roles]</span></span> |<span data-ttu-id="7382b-508">[Azure Monitor][Monitor]</span><span class="sxs-lookup"><span data-stu-id="7382b-508">[Azure Monitor][Monitor]</span></span></br><span data-ttu-id="7382b-509">[活动日志][ActLog]</span><span class="sxs-lookup"><span data-stu-id="7382b-509">[Activity Logs][ActLog]</span></span></br><span data-ttu-id="7382b-510">[诊断日志][DiagLog]</span><span class="sxs-lookup"><span data-stu-id="7382b-510">[Diagnostic Logs][DiagLog]</span></span></br><span data-ttu-id="7382b-511">[Microsoft Operations Management Suite][OMS]</span><span class="sxs-lookup"><span data-stu-id="7382b-511">[Microsoft Operations Management Suite][OMS]</span></span></br><span data-ttu-id="7382b-512">[网络性能监视器][NPM]</span><span class="sxs-lookup"><span data-stu-id="7382b-512">[Network Performance Monitor][NPM]</span></span>|<span data-ttu-id="7382b-513">[外围网络最佳实践][DMZ]</span><span class="sxs-lookup"><span data-stu-id="7382b-513">[Perimeter Networks Best Practices][DMZ]</span></span></br><span data-ttu-id="7382b-514">[订阅管理][SubMgmt]</span><span class="sxs-lookup"><span data-stu-id="7382b-514">[Subscription Management][SubMgmt]</span></span></br><span data-ttu-id="7382b-515">[资源组管理][RGMgmt]</span><span class="sxs-lookup"><span data-stu-id="7382b-515">[Resource Group Management][RGMgmt]</span></span></br><span data-ttu-id="7382b-516">[Azure 订阅限制][Limits]</span><span class="sxs-lookup"><span data-stu-id="7382b-516">[Azure Subscription Limits][Limits]</span></span> |
|<span data-ttu-id="7382b-517">其他 Azure 服务</span><span class="sxs-lookup"><span data-stu-id="7382b-517">Other Azure Services</span></span>|
|<span data-ttu-id="7382b-518">[Azure Web 应用][WebApps]</span><span class="sxs-lookup"><span data-stu-id="7382b-518">[Azure Web Apps][WebApps]</span></span></br><span data-ttu-id="7382b-519">[HDInsights (Hadoop)][HDI]</span><span class="sxs-lookup"><span data-stu-id="7382b-519">[HDInsights (Hadoop) ][HDI]</span></span></br><span data-ttu-id="7382b-520">[事件中心][EventHubs]</span><span class="sxs-lookup"><span data-stu-id="7382b-520">[Event Hubs][EventHubs]</span></span></br><span data-ttu-id="7382b-521">[服务总线][ServiceBus]</span><span class="sxs-lookup"><span data-stu-id="7382b-521">[Service Bus][ServiceBus]</span></span>|



## <a name="next-steps"></a><span data-ttu-id="7382b-522">后续步骤</span><span class="sxs-lookup"><span data-stu-id="7382b-522">Next Steps</span></span>
 - <span data-ttu-id="7382b-523">探索 [VNet 对等互连][VNetPeering]，这是 VDC 中心辐射型设计的基础技术</span><span class="sxs-lookup"><span data-stu-id="7382b-523">Explore [VNet Peering][VNetPeering], the underpinning technology for VDC hub and spoke designs</span></span>
 - <span data-ttu-id="7382b-524">实现 [AAD][AAD]，开始探索 [RBAC][RBAC]</span><span class="sxs-lookup"><span data-stu-id="7382b-524">Implement [AAD][AAD] to get started with [RBAC][RBAC] exploration</span></span>
 - <span data-ttu-id="7382b-525">开发符合所在组织的结构、需求和策略的订阅和资源管理模型和 RBAC 模型。</span><span class="sxs-lookup"><span data-stu-id="7382b-525">Develop a Subscription and Resource management model and RBAC model to meet the structure, requirements, and polices of your organization.</span></span> <span data-ttu-id="7382b-526">最重要的活动是计划。</span><span class="sxs-lookup"><span data-stu-id="7382b-526">The most important activity is planning.</span></span> <span data-ttu-id="7382b-527">针对重组、合并和新产品线等，计划应尽可能实用。</span><span class="sxs-lookup"><span data-stu-id="7382b-527">As much as practical, plan for reorganizations, mergers, new product lines, etc.</span></span>

<!--Image References-->
[0]: ./images/networking-redundant-equipment.png "组件重叠示例" 
[1]: ./images/networking-vdc-high-level.png "中心辐射型 VDC 的概要示例"
[2]: ./images/networking-hub-spokes-cluster.png "中心辐射型群集"
[3]: ./images/networking-spoke-to-spoke.png "辐射到辐射"
[4]: ./images/networking-vdc-block-level-diagram.png "VDC 的块级关系图"
[5]: ./images/networking-users-groups-subsciptions.png "用户、组、订阅和项目"
[6]: ./images/networking-infrastructure-high-level.png "高级别基础结构关系图"
[7]: ./images/networking-highlevel-perimeter-networks.png "高级别基础结构关系图"
[8]: ./images/networking-vnet-peering-perimeter-neworks.png "VNet 对等互连和外围网络"
[9]: ./images/networking-high-level-diagram-monitoring.png "用于监视的高级别关系图"
[10]: ./images/networking-high-level-workloads.png "用于工作负荷的高级别关系图"

<!--Link References-->
[Limits]: /azure/azure-subscription-service-limits
[Roles]: /azure/role-based-access-control/built-in-roles
[VNet]: /azure/virtual-network/virtual-networks-overview
[NSG]: /azure/virtual-network/virtual-networks-nsg
[DNS]: /azure/dns/dns-overview
[PrivateDNS]: /azure/dns/private-dns-overview
[VNetPeering]: /azure/virtual-network/virtual-network-peering-overview 
[UDR]: /azure/virtual-network/virtual-networks-udr-overview 
[RBAC]: /azure/role-based-access-control/overview
[MFA]: /azure/multi-factor-authentication/multi-factor-authentication
[AAD]: /azure/active-directory/active-directory-whatis
[VPN]: /azure/vpn-gateway/vpn-gateway-about-vpngateways 
[ExR]: /azure/expressroute/expressroute-introduction 
[NVA]: /azure/architecture/reference-architectures/dmz/nva-ha
[SubMgmt]: /azure/azure-resource-manager/resource-manager-azure-scaffold 
[RGMgmt]: /azure/azure-resource-manager/resource-group-overview
[DMZ]: /azure/best-practices-network-security
[ALB]: /azure/load-balancer/load-balancer-overview
[PIP]: /azure/virtual-network/resource-groups-networking#public-ip-address
[AppGW]: /azure/application-gateway/application-gateway-introduction
[WAF]: /azure/application-gateway/application-gateway-web-application-firewall-overview
[Monitor]: /azure/monitoring-and-diagnostics/
[ActLog]: /azure/monitoring-and-diagnostics/monitoring-overview-activity-logs 
[DiagLog]: /azure/monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs
[NSGLog]: /azure/virtual-network/virtual-network-nsg-manage-log
[OMS]: /azure/operations-management-suite/operations-management-suite-overview
[NPM]: /azure/log-analytics/log-analytics-network-performance-monitor
[WebApps]: /azure/app-service/
[HDI]: /azure/hdinsight/hdinsight-hadoop-introduction
[EventHubs]: /azure/event-hubs/event-hubs-what-is-event-hubs 
[ServiceBus]: /azure/service-bus-messaging/service-bus-messaging-overview
[TM]: /azure/traffic-manager/traffic-manager-overview
