---
title: 数据仓库和数据市场
description: ''
author: zoinerTejada
ms:date: 02/12/2018
ms.openlocfilehash: eec883c68cf94637c3061814d0841c73b58d7e52
ms.sourcegitcommit: c441fd165e6bebbbbbc19854ec6f3676be9c3b25
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/31/2018
---
# <a name="data-warehousing-and-data-marts"></a><span data-ttu-id="8d33e-102">数据仓库和数据市场</span><span class="sxs-lookup"><span data-stu-id="8d33e-102">Data warehousing and data marts</span></span>

<span data-ttu-id="8d33e-103">数据仓库是一个集中式、组织有序的关系存储库，其中保存了许多或所有业务领域的一个或多个不同源的集成数据。</span><span class="sxs-lookup"><span data-stu-id="8d33e-103">A data warehouse is a central, organizational, relational repository of integrated data from one or more disparate sources, across many or all subject areas.</span></span> <span data-ttu-id="8d33e-104">数据仓库存储当前数据和历史数据，可用于通过不同的方式报告和分析数据。</span><span class="sxs-lookup"><span data-stu-id="8d33e-104">Data warehouses store current and historical data and are used for reporting and analysis of the data in different ways.</span></span>

![Azure 中的数据仓库](./images/data-warehousing.png)

<span data-ttu-id="8d33e-106">若要将数据移到数据仓库，需定期从包含重要业务信息的各种源提取数据。</span><span class="sxs-lookup"><span data-stu-id="8d33e-106">To move data into a data warehouse, it is extracted on a periodic basis from various sources that contain important business information.</span></span> <span data-ttu-id="8d33e-107">移动数据时，可以格式化、清理、验证、汇总和重新组织数据。</span><span class="sxs-lookup"><span data-stu-id="8d33e-107">As the data is moved, it can be formatted, cleaned, validated, summarized, and reorganized.</span></span> <span data-ttu-id="8d33e-108">或者，可以使用仓库中提供的聚合视图存储最低详细程度的数据用于报告。</span><span class="sxs-lookup"><span data-stu-id="8d33e-108">Alternately, the data can be stored in the lowest level of detail, with aggregated views provided in the warehouse for reporting.</span></span> <span data-ttu-id="8d33e-109">在任一情况下，数据仓库都是通过商业智能 (BI) 工具进行报告、分析和做出重要业务决策所用的数据的永久存储空间。</span><span class="sxs-lookup"><span data-stu-id="8d33e-109">In either case, the data warehouse becomes a permanent storage space for data used for reporting, analysis, and forming important business decisions using business intelligence (BI) tools.</span></span>

## <a name="data-marts-and-operational-data-stores"></a><span data-ttu-id="8d33e-110">数据市场和操作数据存储</span><span class="sxs-lookup"><span data-stu-id="8d33e-110">Data marts and operational data stores</span></span>

<span data-ttu-id="8d33e-111">大规模管理数据会很复杂，使用单个数据仓库呈现整个企业的所有数据的做法越来越不常见。</span><span class="sxs-lookup"><span data-stu-id="8d33e-111">Managing data at scale is complex, and it is becoming less common to have a single data warehouse that represents all data across the entire enterprise.</span></span> <span data-ttu-id="8d33e-112">相反，组织往往会创建称作“数据市场”的更有针对性的小型数据仓库来公开所需的数据，以进行分析。</span><span class="sxs-lookup"><span data-stu-id="8d33e-112">Instead, organizations create smaller, more focused data warehouses, called *data marts*, that expose the desired data for analytics purposes.</span></span> <span data-ttu-id="8d33e-113">业务流程会将操作数据存储中维护的数据填充到数据市场。</span><span class="sxs-lookup"><span data-stu-id="8d33e-113">An orchestration process populates the data marts from data maintained in an operational data store.</span></span> <span data-ttu-id="8d33e-114">操作数据存储充当源事务系统与数据市场之间的中介。</span><span class="sxs-lookup"><span data-stu-id="8d33e-114">The operational data store acts as an intermediary between the source transactional system and the data mart.</span></span> <span data-ttu-id="8d33e-115">操作数据存储管理的数据是源事务系统中数据的清理版本，通常是数据仓库或数据市场维护的历史数据子集。</span><span class="sxs-lookup"><span data-stu-id="8d33e-115">Data managed by the operational data store is a cleaned version of the data present in the source transactional system, and is typically a subset of the historical data that is maintained by the data warehouse or data mart.</span></span> 

## <a name="when-to-use-this-solution"></a><span data-ttu-id="8d33e-116">何时使用此解决方案</span><span class="sxs-lookup"><span data-stu-id="8d33e-116">When to use this solution</span></span>

<span data-ttu-id="8d33e-117">需要将大量数据从操作型系统转换为易于理解、最新且精确的格式时，请选择数据仓库。</span><span class="sxs-lookup"><span data-stu-id="8d33e-117">Choose a data warehouse when you need to turn massive amounts of data from operational systems into a format that is easy to understand, current, and accurate.</span></span> <span data-ttu-id="8d33e-118">数据仓库不需要遵循可在操作/OLTP 数据库中使用的相同简洁数据结构。</span><span class="sxs-lookup"><span data-stu-id="8d33e-118">Data warehouses do not need to follow the same terse data structure you may be using in your operational/OLTP databases.</span></span> <span data-ttu-id="8d33e-119">可以使用企业用户和分析师能够理解的列名，重构架构来简化数据关系，并将多个表合并成一个表。</span><span class="sxs-lookup"><span data-stu-id="8d33e-119">You can use column names that make sense to business users and analysts, restructure the schema to simplify data relationships, and consolidate several tables into one.</span></span> <span data-ttu-id="8d33e-120">这些步骤有助于引导用户创建即席报表，或者在 BI 系统中创建报表和分析数据，而无需求助于数据库管理员 (DBA) 或数据开发人员。</span><span class="sxs-lookup"><span data-stu-id="8d33e-120">These steps help guide users who need to create ad hoc reports, or create reports and analyze the data in BI systems, without the help of a database administrator (DBA) or data developer.</span></span>

<span data-ttu-id="8d33e-121">出于性能原因需要将历史数据与源事务系统分开时，请考虑使用数据仓库。</span><span class="sxs-lookup"><span data-stu-id="8d33e-121">Consider using a data warehouse when you need to keep historical data separate from the source transaction systems for performance reasons.</span></span> <span data-ttu-id="8d33e-122">数据仓库提供通用格式、通用键、通用数据模型和通用访问方法的集成使用位置，使用它可以从多个位置轻松访问历史数据。</span><span class="sxs-lookup"><span data-stu-id="8d33e-122">Data warehouses make it easy to access historical data from multiple locations, by providing a centralized location using common formats, common keys, common data models, and common access methods.</span></span>

<span data-ttu-id="8d33e-123">数据仓库已针对读取访问进行优化，与针对源事务系统运行报告相比，数据仓库可以更快地生成报告。</span><span class="sxs-lookup"><span data-stu-id="8d33e-123">Data warehouses are optimized for read access, resulting in faster report generation compared to running reports against the source transaction system.</span></span> <span data-ttu-id="8d33e-124">此外，数据仓库提供以下优势：</span><span class="sxs-lookup"><span data-stu-id="8d33e-124">In addition, data warehouses provide the following benefits:</span></span>

* <span data-ttu-id="8d33e-125">可以从用作单一事实源的数据仓库存储和访问多个源的所有历史数据。</span><span class="sxs-lookup"><span data-stu-id="8d33e-125">All historical data from multiple sources can be stored and accessed from a data warehouse as the single source of truth.</span></span>
* <span data-ttu-id="8d33e-126">将数据导入数据仓库时，可以通过清理数据，提供更准确的数据以及一致的代码和说明来改善数据质量。</span><span class="sxs-lookup"><span data-stu-id="8d33e-126">You can improve data quality by cleaning up data as it is imported into the data warehouse, providing more accurate data as well as providing consistent codes and descriptions.</span></span>
* <span data-ttu-id="8d33e-127">在查询处理周期，报告工具不会与事务源系统争用资源。</span><span class="sxs-lookup"><span data-stu-id="8d33e-127">Reporting tools do not compete with the transactional source systems for query processing cycles.</span></span> <span data-ttu-id="8d33e-128">数据仓库可让事务系统专注于处理写入操作，同时，数据仓库可满足大多数读取请求。</span><span class="sxs-lookup"><span data-stu-id="8d33e-128">A data warehouse allows the transactional system to focus predominantly on handling writes, while the data warehouse satisfies the majority of read requests.</span></span>
* <span data-ttu-id="8d33e-129">数据仓库可以帮助整合不同软件中的数据。</span><span class="sxs-lookup"><span data-stu-id="8d33e-129">A data warehouse can help consolidate data from different software.</span></span>
* <span data-ttu-id="8d33e-130">借助数据挖掘工具，可以针对仓库中存储的数据，使用自动化方法发现隐藏的模式。</span><span class="sxs-lookup"><span data-stu-id="8d33e-130">Data mining tools can help you find hidden patterns using automatic methodologies against data stored in your warehouse.</span></span>
* <span data-ttu-id="8d33e-131">使用数据仓库可以更轻松地为授权用户提供安全访问，同时限制其他人的访问。</span><span class="sxs-lookup"><span data-stu-id="8d33e-131">Data warehouses make it easier to provide secure access to authorized users, while restricting access to others.</span></span> <span data-ttu-id="8d33e-132">无需授予业务用户对源数据的访问权限，从而消除了一个或多个生产事务系统中潜在的攻击途径。</span><span class="sxs-lookup"><span data-stu-id="8d33e-132">There is no need to grant business users access to the source data, thereby removing a potential attack vector against one or more production transaction systems.</span></span>
* <span data-ttu-id="8d33e-133">使用数据仓库可以更轻松地基于数据创建商业智能解决方案，例如 [OLAP 多维数据集](online-analytical-processing.md)。</span><span class="sxs-lookup"><span data-stu-id="8d33e-133">Data warehouses make it easier to create business intelligence solutions on top of the data, such as [OLAP cubes](online-analytical-processing.md).</span></span>

## <a name="challenges"></a><span data-ttu-id="8d33e-134">挑战</span><span class="sxs-lookup"><span data-stu-id="8d33e-134">Challenges</span></span>

<span data-ttu-id="8d33e-135">根据业务需求正确配置数据仓库时可能存在以下一些难题：</span><span class="sxs-lookup"><span data-stu-id="8d33e-135">Properly configuring a data warehouse to fit the needs of your business can bring some of the following challenges:</span></span>

* <span data-ttu-id="8d33e-136">提交正确为业务概念建模所需的时间。</span><span class="sxs-lookup"><span data-stu-id="8d33e-136">Committing the time required to properly model your business concepts.</span></span> <span data-ttu-id="8d33e-137">这是一个重要步骤，因为数据仓库由信息驱动，而概念映射项目的余下部分。</span><span class="sxs-lookup"><span data-stu-id="8d33e-137">This is an important step, as data warehouses are information driven, where concept mapping drives the rest of the project.</span></span> <span data-ttu-id="8d33e-138">这涉及到标准化业务相关的术语和常见格式（例如货币和日期），以及通过业务用户可以理解的、但仍可确保数据聚合和关系准确性的方式来重构架构。</span><span class="sxs-lookup"><span data-stu-id="8d33e-138">This involves standardizing business-related terms and common formats (such as currency and dates), and restructuring the schema in a way that makes sense to business users but still ensures accuracy of data aggregates and relationships.</span></span>
* <span data-ttu-id="8d33e-139">规划和设置数据业务流程。</span><span class="sxs-lookup"><span data-stu-id="8d33e-139">Planning and setting up your data orchestration.</span></span> <span data-ttu-id="8d33e-140">考虑因素包括如何将数据从源事务系统复制到数据仓库，以及何时从操作数据存储移出历史数据，并将其移入仓库。</span><span class="sxs-lookup"><span data-stu-id="8d33e-140">Consideration include how to copy data from the source transactional system to the data warehouse, and when to move historical data out of your operational data stores and into the warehouse.</span></span>
* <span data-ttu-id="8d33e-141">将数据导入仓库时，通过清理数据来保持或改善数据质量。</span><span class="sxs-lookup"><span data-stu-id="8d33e-141">Maintaining or improving data quality by cleaning the data as it is imported into the warehouse.</span></span>

## <a name="data-warehousing-in-azure"></a><span data-ttu-id="8d33e-142">Azure 中的数据仓库</span><span class="sxs-lookup"><span data-stu-id="8d33e-142">Data warehousing in Azure</span></span>

<span data-ttu-id="8d33e-143">在 Azure 中，你可能维护了一个或多个数据源，不管是客户交易的数据，还是各部门使用的各种业务应用程序中的数据。</span><span class="sxs-lookup"><span data-stu-id="8d33e-143">In Azure, you may have one or more sources of data, whether from customer transactions, or from various business applications used by various departments.</span></span> <span data-ttu-id="8d33e-144">此数据通常存储在一个或多个 [OLTP](online-transaction-processing.md) 数据库中。</span><span class="sxs-lookup"><span data-stu-id="8d33e-144">This data is traditionally stored in one or more [OLTP](online-transaction-processing.md) databases.</span></span> <span data-ttu-id="8d33e-145">可以在网络共享、Azure 存储 Blob 或 Data Lake 等其他存储媒体中保存这些数据。</span><span class="sxs-lookup"><span data-stu-id="8d33e-145">The data could be persisted in other storage mediums such as network shares, Azure Storage Blobs, or a data lake.</span></span> <span data-ttu-id="8d33e-146">数据仓库本身或者 Azure SQL 数据库等关系数据库也可以存储数据。</span><span class="sxs-lookup"><span data-stu-id="8d33e-146">The data could also be stored by the data warehouse itself or in a relational database such as Azure SQL Database.</span></span> <span data-ttu-id="8d33e-147">分析数据存储层的用途是满足分析和报告工具针对数据仓库或数据市场发出的查询。</span><span class="sxs-lookup"><span data-stu-id="8d33e-147">The purpose of the analytical data store layer is to satisfy queries issued by analytics and reporting tools against the data warehouse or data mart.</span></span> <span data-ttu-id="8d33e-148">在 Azure 中，可以使用 Azure SQL 数据仓库，或者结合使用 Azure HDInsight 和 Hive 或交互式查询来实现此分析存储功能。</span><span class="sxs-lookup"><span data-stu-id="8d33e-148">In Azure, this analytical store capability can be met with Azure SQL Data Warehouse, or with Azure HDInsight using Hive or Interactive Query.</span></span> <span data-ttu-id="8d33e-149">此外，需要使用 Azure 数据工厂或 Oozie on Azure HDInsight 执行某种程度的协调，定期将数据从数据存储移动或复制到数据仓库。</span><span class="sxs-lookup"><span data-stu-id="8d33e-149">In addition, you will need some level of orchestration to periodically move or copy data from data storage to the data warehouse, which can be done using Azure Data Factory or Oozie on Azure HDInsight.</span></span>

<span data-ttu-id="8d33e-150">相关服务：</span><span class="sxs-lookup"><span data-stu-id="8d33e-150">Related services:</span></span>

* [<span data-ttu-id="8d33e-151">Azure SQL 数据库</span><span class="sxs-lookup"><span data-stu-id="8d33e-151">Azure SQL Database</span></span>](/azure/sql-database/)
* [<span data-ttu-id="8d33e-152">VM 中的 SQL Server</span><span class="sxs-lookup"><span data-stu-id="8d33e-152">SQL Server in a VM</span></span>](/sql/sql-server/sql-server-technical-documentation)
* [<span data-ttu-id="8d33e-153">Azure 数据仓库</span><span class="sxs-lookup"><span data-stu-id="8d33e-153">Azure Data Warehouse</span></span>](/azure/sql-data-warehouse/sql-data-warehouse-overview-what-is)
* [<span data-ttu-id="8d33e-154">HDInsight 上的 Apache Hive</span><span class="sxs-lookup"><span data-stu-id="8d33e-154">Apache Hive on HDInsight</span></span>](/azure/hdinsight/hadoop/hdinsight-use-hive)
* [<span data-ttu-id="8d33e-155">HDInsight 上的交互式查询 (Hive LLAP)</span><span class="sxs-lookup"><span data-stu-id="8d33e-155">Interactive Query (Hive LLAP) on HDInsight</span></span>](/azure/hdinsight/interactive-query/apache-interactive-query-get-started)


## <a name="technology-choices"></a><span data-ttu-id="8d33e-156">技术选择</span><span class="sxs-lookup"><span data-stu-id="8d33e-156">Technology choices</span></span>

- [<span data-ttu-id="8d33e-157">数据仓库</span><span class="sxs-lookup"><span data-stu-id="8d33e-157">Data warehouses</span></span>](../technology-choices/data-warehouses.md)
- [<span data-ttu-id="8d33e-158">管道业务流程</span><span class="sxs-lookup"><span data-stu-id="8d33e-158">Pipeline orchestration</span></span>](../technology-choices/pipeline-orchestration-data-movement.md)

